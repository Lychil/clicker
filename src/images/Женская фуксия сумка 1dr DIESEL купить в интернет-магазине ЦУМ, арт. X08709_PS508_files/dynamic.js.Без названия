window.SL = window.SL || {};
window.SL.timezone = "+03:00";
window.SL.templates = [];
window.SL.evals = {"637b9f6a3e933e27f40b3248":{"code":"new Promise((resolve, reject) => {\r\nSL.waitForElement('app-not-found, [data-page-type=\"404\"]', (el) => {\r\n    if (el[0].nodeName === \"APP-NOT-FOUND\") {\r\n        resolve(\"angular\");\r\n    } else {\r\n        resolve(\"react\");\r\n    }\r\n}, 1, 10, 400)\r\n})"},"643feded60f2147a3e0a552d":{"code":"new Promise((resolve, reject) => { \r\n   SL.waitForElement('div[data-test-id=\"emptyCartNotice\"]',\r\n  (el) => resolve (true) , 1, 10, 400);\r\n });"},"643ff18a68a393b6d90ea6ad":{"code":"new Promise((resolve, reject) => { \r\n  if (window.location.pathname !== '\/catalog\/search\/') return resolve('not search');\r\n  \r\n  SL.waitForElement('div[data-meta-name=\"nothing_found\"], [data-meta-name=\"catalog_counter\"]', (el) => { \r\n    if (el[0].dataset.metaName === \"nothing_found\") {\r\n      resolve(true) \r\n    } else {\r\n      resolve(false) \r\n    }\r\n    \r\n  }, 1, 10, 400) \r\n })"},"648b462b255733f2760999ed":{"code":"(function(){\r\n    if (window.location.pathname === \"\/catalog\/search\/\") {\r\n        try {\r\n            return new URLSearchParams(window.location.search).get('q').toLowerCase()\r\n        } catch {\r\n            return \"false\"\r\n        }\r\n    } else {\r\n        return \"false\"\r\n    }\r\n  \r\n})()"},"655373b0ded1fba30b082482":{"code":"new Promise(resolve => {\r\n    if (SL.pageContext.type === \"CATEGORY\" && window.location.search.includes('brand=') || window.location.pathname.includes('\/brand\/')) {\r\n        SL.waitForElement('[data-meta-name=\"nothing_found\"]', (el) => {\r\n            const h1 = document.querySelector('h1');\r\n            if (h1) {\r\n                const text = h1.innerText.toLowerCase();\r\n                if (text !== \"\u043a\u0430\u0442\u0430\u043b\u043e\u0433\") {\r\n                    window.slPageTitle = text;\r\n                } else {\r\n                    const url = new URL(window.location.href);\r\n                    window.slPageTitle = url.searchParams.get('brand');\r\n                }\r\n                resolve(window.slPageTitle)\r\n            } else {\r\n                resolve(\"false\")\r\n            }\r\n        },1,100,40)\r\n    } else {\r\n        return resolve(\"false\")\r\n    }\r\n    \r\n\r\n})"},"659d45a6f4427ba59b000219":{"code":"new Promise(resolve => {\r\n    function checkSigmaExp() {\r\n        const sigmaExp = SL.StorageUtils.get('sigmaExperiments', ['localStorage'])\r\n        if (!sigmaExp) return false;\r\n        return true\r\n    }\r\n\r\n    SL.Utils.waitUntil(checkSigmaExp, () => {\r\n        resolve(SL.StorageUtils.get('sigmaExperiments', ['localStorage']))\r\n    }, () => { resolve(\"false\") }, 100, 10000)\r\n})"},"659d556d14ee58b3540681c2":{"code":"new Promise(resolve => {\r\n    if (SL.pageContext.type !== \"PRODUCT\") {\r\n        return resolve(0);\r\n    }\r\n    function checkSigmaExp() {\r\n        const sigmaExp = SL.StorageUtils.get('sigmaExperiments', ['localStorage'])\r\n        if (!sigmaExp) return false;\r\n\r\n        if (sigmaExp.includes(\"1420fb68-cf8a-4cc9\")) {\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n\r\n    SL.Utils.waitUntil(checkSigmaExp, () => {\r\n        const sigmaExp = SL.StorageUtils.get('sigmaExperiments', ['localStorage']);\r\n        if (sigmaExp.includes(\"1420fb68-cf8a-4cc9.1\")) {\r\n                resolve(\"true\")\r\n        } else {\r\n                resolve(\"false\")\r\n        }\r\n    }, () => { resolve(\"false\") }, 100, 4000)\r\n})"}};
window.SL.Campaigns = {"6356b30ad9062ed0380b532e":{"name":"Other - sticky banner","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"653f5e1871582672ec0c0970","name":"fix bonus","version":"665979bace43b917d40878b4","status":1,"target":[{"type":"Cookie","conds":[{"id":"653f5e1871582672ec0c0971","key":"sl_close_bar_312","method":"not_exist","value":null}]},{"type":"PageType","conds":[{"id":"653f5e1871582672ec0c0973","value":"CART","method":"not_equal"}]},{"type":"PageType","conds":[{"id":"653f5e1871582672ec0c0975","value":"PRODUCT","method":"not_equal"}]},{"type":"URL","conds":[{"id":"653f5e1871582672ec0c0977","value":"\/checkout","method":"not_contains","ignoreURLParams":1}]},{"type":"URL","conds":[{"id":"653f5e1871582672ec0c0979","value":"www.tsum.ru\/v2\/cart\/","method":"not_equal","ignoreURLParams":1}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"may","htmlCode":null,"cssCode":"#dy-bar-${slVariationId} {\r\n  min-height: 64px;\r\n  background-color: #F94F0D;\r\n  color:#fff;\r\n  font-size: 13px;\r\n  text-align:center;\r\n  padding:10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-box-pack: center;\r\n  -ms-flex-pack: center;\r\n  justify-content: center;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n  -ms-flex-direction: column;\r\n  flex-direction: column;\r\n  position:relative;\r\ncursor:pointer;\r\n}\r\n[data-dy-hidden=\"true\"] { display:none !important;}\r\n.dy-bar-initial a[href=\"\"] { display:none}\r\n#dy-bar-${slVariationId} a {\r\n  color:#fff;\r\n  line-height:18px;\r\n}\r\n#dy-bar-${slVariationId} a.dy-copy-promo,#dy-bar-${slVariationId} a.dy-bar-link,#dy-bar-${slVariationId} .dy-show-more-link {\r\n  text-decoration:none;\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n\r\n#dy-bar-${slVariationId} a:hover {\r\n  color:#fff;\r\n}\r\n\r\n#dy-bar-${slVariationId} .dy-close-icon {\r\n  position:absolute;\r\n  right:16px;\r\n  cursor:pointer;\r\n}\r\n\r\n#dy-bar-${slVariationId} br { display:none;}\r\n.dy-bar-success {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied + .dy-bar-success {\r\n  display:block;\r\n}\r\n\r\nbr.dy-visible-mobile {\r\n  display:none;\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-bar-${slVariationId} .dy-show-more-link{border-bottom:0;}\r\n#dy-bar-${slVariationId} .dy-show-more-link span{\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n  #dy-bar-${slVariationId} {\r\n    position:static;\r\n    left:0;\r\n    width:100%;\r\n    z-index:113;\r\n  }\r\n}\r\n\r\n@media (max-width:767px) {\r\n  #dy-bar-${slVariationId} br { display:block;}\r\n  #dy-bar-${slVariationId} p { \r\n    max-width:65%;\r\n    line-height: 18px; \r\n  }\r\n  br.dy-visible-mobile {\r\n    display:inline;\r\n  }\r\n  #dy-bar-${slVariationId} { padding:13px;}\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-spa-header-dynamic.sl-sticky {\r\n    position: fixed;\r\n    width: 100%;\r\n    z-index: 113;}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header {\r\n    min-height: 125px;\r\n}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header__sticky.container {\r\ntop:64px;\r\n}\r\n}","jsCode":"SL.waitForVariable('window.slAnalytics').then(() => {\r\n  window.slAnalytics.show({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n  })\r\n})\r\n\r\nconst CONFIG = {\r\n  promocode: '',\r\n  genderLinks: {\r\n    active: 1,\r\n    kids: 'https:\/\/www.tsum.ru\/catalog\/detskie_tovary-2518\/',\r\n    women: 'https:\/\/www.tsum.ru\/catalog\/zhenskoe-18368\/',\r\n    men: 'https:\/\/www.tsum.ru\/catalog\/muzhskoe-2408\/',\r\n  },\r\n  closeCookieName: 'sl_close_bar_312',\r\n  closeCookieExpire: 86400 * 7,\r\n  openTab: '_blank',\r\n  text: '<span>100 000 \u0440\u0443\u0431\u043b\u0435\u0439 \u0432 \u043f\u043e\u0434\u0430\u0440\u043e\u043a \u043f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043e\u0442 300 000 \u0440\u0443\u0431\u043b\u0435\u0439 \u0441 31 \u043c\u0430\u044f \u0434\u043e 10 \u0438\u044e\u043d\u044f<\/span> ',\r\n  showMoreLink: 'https:\/\/www.tsum.ru\/catalog\/zhenskoe-18368\/',\r\n  showMoreText: '\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435',\r\n  copyText: '',\r\n  textSuccess: '',\r\n  buttonSuccessLink: '',\r\n  buttonSuccessText: '',\r\n};\r\n\r\nlet copied = false;\r\n\r\nfunction initContainer() {\r\n  if (!window.slSpaLoaded) {\r\n    document.addEventListener('sl-ready', function () {\r\n      window.dyAngularLoaded = true;\r\n      SL.waitForElement('app-root,#app-root', function (el) {\r\n        if (window.slTopBanner) return;\r\n        const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n        el[0].insertAdjacentHTML('beforebegin', html);\r\n        window.slTopBanner = true;\r\n        if (window.innerWidth < 1024 && el[0].nodeName === 'APP-ROOT') {\r\n          SL.waitForElement('app-root .header__sticky', () => {\r\n            const el = document.getElementById('dy-spa-header-dynamic');\r\n            if (el) {\r\n              el.classList.add('sl-sticky');\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  } else {\r\n    SL.waitForElement('app-root,#app-root', function (el) {\r\n      if (window.slTopBanner) return;\r\n      const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n      el[0].insertAdjacentHTML('beforebegin', html);\r\n      window.slTopBanner = true;\r\n    });\r\n  }\r\n}\r\n\r\nif (!window.slTopBanner) {\r\n  initContainer();\r\n}\r\n\r\nfunction init(parent) {\r\n  const html = `\r\n    <div id=\"dy-bar-${dyVariationId}\" data-dy-sticky>\r\n    <a class=\"dy-bar-initial dy-show-more-link\" target=\"${CONFIG.openTab}\" href=\"${CONFIG.showMoreLink}\">${CONFIG.text} <\/a>\r\n    <a class=\"dy-copy-promo\">${CONFIG.copyText}<\/a>\r\n \r\n    <a class=\"dy-close-icon\">\r\n      <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"> <g fill=\"none\" fill-rule=\"evenodd\"> <path d=\"M0 0h24v24H0z\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#99A0AD\" opacity=\".24\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" opacity=\".9\"\/> <path fill=\"#FFF\" d=\"M8.47 7.586l3.537 3.538L15.54 7.59a.625.625 0 0 1 .884.883l-3.534 3.535 3.534 3.533a.625.625 0 1 1-.884.884l-3.533-3.534-3.538 3.537a.625.625 0 1 1-.884-.884l3.538-3.537L7.586 8.47a.625.625 0 0 1 .884-.884z\"\/> <\/g> <\/svg>\r\n    <\/a>\r\n  <\/div>`;\r\n  parent.innerHTML = html;\r\n  var message = parent.querySelector('#dy-bar-${slVariationId}');\r\n\r\n  parent.style.height = message.offsetHeight + 'px';\r\n  parent.style.height = '64px';\r\n  parent.className += ' dy-message-bar';\r\n\r\n  if (CONFIG.promocode) {\r\n    addCopyScript();\r\n  }\r\n\r\n  if (CONFIG.genderLinks.active) {\r\n    checkAndChangeLink();\r\n  }\r\n\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-close-icon').addEventListener('click', (e) => {\r\n    e.stopPropagation();\r\n    closeMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-copy-promo').addEventListener('click', () => {\r\n    copyMessage(parent);\r\n  });\r\n  \/\/parent.querySelector('#dy-bar-${slVariationId} .dy-bar-link').addEventListener('click', () => {openMessage(parent)});\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').addEventListener('click', () => {\r\n    openMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId}').addEventListener('click', () => {\r\n    window.slAnalytics.click({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n    }, 'stickyBanner')\r\n   \/\/ parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').click();\r\n  });\r\n  \r\n}\r\n\r\nSL.waitForElement('#dy-spa-header-dynamic', (el) => {\r\n  init(el[0]);\r\n});\r\n\r\nfunction addCopyScript() {\r\n  if (document.getElementById('sl_clipboard_script_id')) return;\r\n  var s = document.createElement('script');\r\n  var head = document.getElementsByTagName('head')[0];\r\n  s.addEventListener('load', onClipboardReady);\r\n  s.src = 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/clipboard.js\/2.0.0\/clipboard.min.js';\r\n  s.id = 'sl_clipboard_script_id';\r\n  head.appendChild(s);\r\n}\r\n\r\nfunction onClipboardReady() {\r\n  var clipboard = new ClipboardJS('.dy-copy-promo', {\r\n    text: function (trigger) {\r\n      return CONFIG.promocode;\r\n    },\r\n  });\r\n\r\n  clipboard.on('success', function (e) {\r\n    var copySuccess = document.querySelector('#dy-bar-${slVariationId} p');\r\n    copied = true;\r\n    copySuccess.className += ' _copied';\r\n  });\r\n}\r\n\r\nfunction checkAndChangeLink() {\r\n  var gender = SL.StorageUtils.get('selectedGender', ['cookieStorage']);\r\n  var links = document.querySelectorAll('.dy-bar-link, .dy-show-more-link');\r\n  if (links.length) {\r\n    for (let i = 0; i < links.length; i++) {\r\n      switch (gender) {\r\n        case 'kids':\r\n          links[i].href = CONFIG.genderLinks.kids;\r\n          break;\r\n        case 'men':\r\n          links[i].href = CONFIG.genderLinks.men;\r\n          break;\r\n        case 'women':\r\n          links[i].href = CONFIG.genderLinks.women;\r\n          break;\r\n        default:\r\n        \/\/ default\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setCookieAndEvent(eventName) {\r\n  SL.StorageUtils.set(CONFIG.closeCookieName, true, ['cookieStorage'], { expires: CONFIG.closeCookieExpire });\r\n  SL.API('event', { name: eventName, properties: { experience: '${slExperienceId}' } });\r\n}\r\n\r\nfunction closeMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Close bar message');\r\n}\r\nfunction copyMessage() {\r\n  setCookieAndEvent('Copy promo - bar message');\r\n}\r\nfunction openMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Open bar message');\r\n}","weight":100,"variables":[],"id":"653f5e1871582672ec0c097c"}],"timeframe":{"start":null,"end":"2024-06-10T23:59:00.000Z","user_timezone":true},"targetingWhen":false},{"id":"664f5f3fcdfef816de0f36c0","name":"best price 2 day","version":"665052351df88ddf4c031922","status":1,"target":[{"type":"Cookie","conds":[{"id":"664f5f3fcdfef816de0f36c1","key":"sl_close_bar_312","method":"not_exist","value":null}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36c3","value":"CART","method":"not_equal"}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36c5","value":"PRODUCT","method":"not_equal"}]},{"type":"URL","conds":[{"id":"664f5f3fcdfef816de0f36c7","value":"\/checkout","method":"not_contains","ignoreURLParams":1}]},{"type":"URL","conds":[{"id":"664f5f3fcdfef816de0f36c9","value":"www.tsum.ru\/v2\/cart\/","method":"not_equal","ignoreURLParams":1}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36cb","value":"HOMEPAGE","method":"not_equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"dubai","htmlCode":null,"cssCode":"#dy-bar-${slVariationId} {\r\n  min-height: 64px;\r\n  background-color: #F94F0D;\r\n  color:#fff;\r\n  font-size: 13px;\r\n  text-align:center;\r\n  padding:10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-box-pack: center;\r\n  -ms-flex-pack: center;\r\n  justify-content: center;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n  -ms-flex-direction: column;\r\n  flex-direction: column;\r\n  position:relative;\r\ncursor:pointer;\r\n}\r\n[data-dy-hidden=\"true\"] { display:none !important;}\r\n.dy-bar-initial a[href=\"\"] { display:none}\r\n#dy-bar-${slVariationId} a {\r\n  color:#fff;\r\n  line-height:18px;\r\n}\r\n#dy-bar-${slVariationId} a.dy-copy-promo,#dy-bar-${slVariationId} a.dy-bar-link,#dy-bar-${slVariationId} .dy-show-more-link {\r\n  text-decoration:none;\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n\r\n#dy-bar-${slVariationId} a:hover {\r\n  color:#fff;\r\n}\r\n\r\n#dy-bar-${slVariationId} .dy-close-icon {\r\n  position:absolute;\r\n  right:16px;\r\n  cursor:pointer;\r\n}\r\n\r\n#dy-bar-${slVariationId} br { display:none;}\r\n.dy-bar-success {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied + .dy-bar-success {\r\n  display:block;\r\n}\r\n\r\nbr.dy-visible-mobile {\r\n  display:none;\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-bar-${slVariationId} .dy-show-more-link{border-bottom:0;}\r\n#dy-bar-${slVariationId} .dy-show-more-link span{\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n  #dy-bar-${slVariationId} {\r\n    position:static;\r\n    left:0;\r\n    width:100%;\r\n    z-index:113;\r\n  }\r\n}\r\n\r\n@media (max-width:767px) {\r\n  #dy-bar-${slVariationId} br { display:block;}\r\n  #dy-bar-${slVariationId} p { \r\n    max-width:65%;\r\n    line-height: 18px; \r\n  }\r\n  br.dy-visible-mobile {\r\n    display:inline;\r\n  }\r\n  #dy-bar-${slVariationId} { padding:13px;}\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-spa-header-dynamic.sl-sticky {\r\n    position: fixed;\r\n    width: 100%;\r\n    z-index: 113;}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header {\r\n    min-height: 125px;\r\n}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header__sticky.container {\r\ntop:64px;\r\n}\r\n}","jsCode":"SL.waitForVariable('window.slAnalytics').then(() => {\r\n  window.slAnalytics.show({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n  })\r\n})\r\n\r\nconst CONFIG = {\r\n  promocode: '',\r\n  genderLinks: {\r\n    active: 1,\r\n    kids: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-women\/',\r\n    women: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-women\/?',\r\n    men: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-men\/',\r\n  },\r\n  closeCookieName: 'sl_close_bar_312',\r\n  closeCookieExpire: 86400 * 7,\r\n  openTab: '_blank',\r\n  text: '<span>\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c 2 \u0434\u043d\u044f \u0430\u043a\u0446\u0438\u0438 \u00ab\u0426\u0435\u043d\u044b \u043b\u0443\u0447\u0448\u0435, \u0447\u0435\u043c \u0432 \u0414\u0443\u0431\u0430\u0435\u00bb<\/span> ',\r\n  showMoreLink: 'https:\/\/www.tsum.ru\/catalog\/zhenskoe-18368\/',\r\n  showMoreText: '\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435',\r\n  copyText: '',\r\n  textSuccess: '',\r\n  buttonSuccessLink: '',\r\n  buttonSuccessText: '',\r\n};\r\n\r\nlet copied = false;\r\n\r\nfunction initContainer() {\r\n  if (!window.slSpaLoaded) {\r\n    document.addEventListener('sl-ready', function () {\r\n      window.dyAngularLoaded = true;\r\n      SL.waitForElement('app-root,#app-root', function (el) {\r\n        if (window.slTopBanner) return;\r\n        const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n        el[0].insertAdjacentHTML('beforebegin', html);\r\n        window.slTopBanner = true;\r\n        if (window.innerWidth < 1024 && el[0].nodeName === 'APP-ROOT') {\r\n          SL.waitForElement('app-root .header__sticky', () => {\r\n            const el = document.getElementById('dy-spa-header-dynamic');\r\n            if (el) {\r\n              el.classList.add('sl-sticky');\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  } else {\r\n    SL.waitForElement('app-root,#app-root', function (el) {\r\n      if (window.slTopBanner) return;\r\n      const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n      el[0].insertAdjacentHTML('beforebegin', html);\r\n      window.slTopBanner = true;\r\n    });\r\n  }\r\n}\r\n\r\nif (!window.slTopBanner) {\r\n  initContainer();\r\n}\r\n\r\nfunction init(parent) {\r\n  const html = `\r\n    <div id=\"dy-bar-${dyVariationId}\" data-dy-sticky>\r\n    <a class=\"dy-bar-initial dy-show-more-link\" target=\"${CONFIG.openTab}\" href=\"${CONFIG.showMoreLink}\">${CONFIG.text} <\/a>\r\n    <a class=\"dy-copy-promo\">${CONFIG.copyText}<\/a>\r\n \r\n    <a class=\"dy-close-icon\">\r\n      <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"> <g fill=\"none\" fill-rule=\"evenodd\"> <path d=\"M0 0h24v24H0z\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#99A0AD\" opacity=\".24\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" opacity=\".9\"\/> <path fill=\"#FFF\" d=\"M8.47 7.586l3.537 3.538L15.54 7.59a.625.625 0 0 1 .884.883l-3.534 3.535 3.534 3.533a.625.625 0 1 1-.884.884l-3.533-3.534-3.538 3.537a.625.625 0 1 1-.884-.884l3.538-3.537L7.586 8.47a.625.625 0 0 1 .884-.884z\"\/> <\/g> <\/svg>\r\n    <\/a>\r\n  <\/div>`;\r\n  parent.innerHTML = html;\r\n  var message = parent.querySelector('#dy-bar-${slVariationId}');\r\n\r\n  parent.style.height = message.offsetHeight + 'px';\r\n  parent.style.height = '64px';\r\n  parent.className += ' dy-message-bar';\r\n\r\n  if (CONFIG.promocode) {\r\n    addCopyScript();\r\n  }\r\n\r\n  if (CONFIG.genderLinks.active) {\r\n    checkAndChangeLink();\r\n  }\r\n\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-close-icon').addEventListener('click', (e) => {\r\n    e.stopPropagation();\r\n    closeMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-copy-promo').addEventListener('click', () => {\r\n    copyMessage(parent);\r\n  });\r\n  \/\/parent.querySelector('#dy-bar-${slVariationId} .dy-bar-link').addEventListener('click', () => {openMessage(parent)});\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').addEventListener('click', () => {\r\n    openMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId}').addEventListener('click', () => {\r\n    window.slAnalytics.click({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n    }, 'stickyBanner')\r\n   \/\/ parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').click();\r\n  });\r\n  \r\n}\r\n\r\nSL.waitForElement('#dy-spa-header-dynamic', (el) => {\r\n  init(el[0]);\r\n});\r\n\r\nfunction addCopyScript() {\r\n  if (document.getElementById('sl_clipboard_script_id')) return;\r\n  var s = document.createElement('script');\r\n  var head = document.getElementsByTagName('head')[0];\r\n  s.addEventListener('load', onClipboardReady);\r\n  s.src = 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/clipboard.js\/2.0.0\/clipboard.min.js';\r\n  s.id = 'sl_clipboard_script_id';\r\n  head.appendChild(s);\r\n}\r\n\r\nfunction onClipboardReady() {\r\n  var clipboard = new ClipboardJS('.dy-copy-promo', {\r\n    text: function (trigger) {\r\n      return CONFIG.promocode;\r\n    },\r\n  });\r\n\r\n  clipboard.on('success', function (e) {\r\n    var copySuccess = document.querySelector('#dy-bar-${slVariationId} p');\r\n    copied = true;\r\n    copySuccess.className += ' _copied';\r\n  });\r\n}\r\n\r\nfunction checkAndChangeLink() {\r\n  var gender = SL.StorageUtils.get('selectedGender', ['cookieStorage']);\r\n  var links = document.querySelectorAll('.dy-bar-link, .dy-show-more-link');\r\n  if (links.length) {\r\n    for (let i = 0; i < links.length; i++) {\r\n      switch (gender) {\r\n        case 'kids':\r\n          links[i].href = CONFIG.genderLinks.kids;\r\n          break;\r\n        case 'men':\r\n          links[i].href = CONFIG.genderLinks.men;\r\n          break;\r\n        case 'women':\r\n          links[i].href = CONFIG.genderLinks.women;\r\n          break;\r\n        default:\r\n        \/\/ default\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setCookieAndEvent(eventName) {\r\n  SL.StorageUtils.set(CONFIG.closeCookieName, true, ['cookieStorage'], { expires: CONFIG.closeCookieExpire });\r\n  SL.API('event', { name: eventName, properties: { experience: '${slExperienceId}' } });\r\n}\r\n\r\nfunction closeMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Close bar message');\r\n}\r\nfunction copyMessage() {\r\n  setCookieAndEvent('Copy promo - bar message');\r\n}\r\nfunction openMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Open bar message');\r\n}","weight":100,"variables":[],"id":"664f5f3fcdfef816de0f36ce"}],"timeframe":{"start":"2024-05-29T00:00:00.000Z","end":"2024-05-29T23:59:00.000Z","user_timezone":true},"targetingWhen":false},{"id":"664f5f3fcdfef816de0f36d1","name":"best price last day","version":"664f5f3fcdfef816de0f36e1","status":1,"target":[{"type":"Cookie","conds":[{"id":"664f5f3fcdfef816de0f36d2","key":"sl_close_bar_312","method":"not_exist","value":null}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36d4","value":"CART","method":"not_equal"}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36d6","value":"PRODUCT","method":"not_equal"}]},{"type":"URL","conds":[{"id":"664f5f3fcdfef816de0f36d8","value":"\/checkout","method":"not_contains","ignoreURLParams":1}]},{"type":"URL","conds":[{"id":"664f5f3fcdfef816de0f36da","value":"www.tsum.ru\/v2\/cart\/","method":"not_equal","ignoreURLParams":1}]},{"type":"PageType","conds":[{"id":"664f5f3fcdfef816de0f36dc","value":"HOMEPAGE","method":"not_equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"dubai","htmlCode":null,"cssCode":"#dy-bar-${slVariationId} {\r\n  min-height: 64px;\r\n  background-color: #F94F0D;\r\n  color:#fff;\r\n  font-size: 13px;\r\n  text-align:center;\r\n  padding:10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-box-pack: center;\r\n  -ms-flex-pack: center;\r\n  justify-content: center;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n  -ms-flex-direction: column;\r\n  flex-direction: column;\r\n  position:relative;\r\ncursor:pointer;\r\n}\r\n[data-dy-hidden=\"true\"] { display:none !important;}\r\n.dy-bar-initial a[href=\"\"] { display:none}\r\n#dy-bar-${slVariationId} a {\r\n  color:#fff;\r\n  line-height:18px;\r\n}\r\n#dy-bar-${slVariationId} a.dy-copy-promo,#dy-bar-${slVariationId} a.dy-bar-link,#dy-bar-${slVariationId} .dy-show-more-link {\r\n  text-decoration:none;\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n\r\n#dy-bar-${slVariationId} a:hover {\r\n  color:#fff;\r\n}\r\n\r\n#dy-bar-${slVariationId} .dy-close-icon {\r\n  position:absolute;\r\n  right:16px;\r\n  cursor:pointer;\r\n}\r\n\r\n#dy-bar-${slVariationId} br { display:none;}\r\n.dy-bar-success {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied {\r\n  display:none;\r\n}\r\n.dy-bar-initial._copied + .dy-bar-success {\r\n  display:block;\r\n}\r\n\r\nbr.dy-visible-mobile {\r\n  display:none;\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-bar-${slVariationId} .dy-show-more-link{border-bottom:0;}\r\n#dy-bar-${slVariationId} .dy-show-more-link span{\r\n\/*border-bottom:1px solid #fff;*\/\r\n}\r\n  #dy-bar-${slVariationId} {\r\n    position:static;\r\n    left:0;\r\n    width:100%;\r\n    z-index:113;\r\n  }\r\n}\r\n\r\n@media (max-width:767px) {\r\n  #dy-bar-${slVariationId} br { display:block;}\r\n  #dy-bar-${slVariationId} p { \r\n    max-width:65%;\r\n    line-height: 18px; \r\n  }\r\n  br.dy-visible-mobile {\r\n    display:inline;\r\n  }\r\n  #dy-bar-${slVariationId} { padding:13px;}\r\n}\r\n\r\n@media (max-width:1023px) {\r\n#dy-spa-header-dynamic.sl-sticky {\r\n    position: fixed;\r\n    width: 100%;\r\n    z-index: 113;}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header {\r\n    min-height: 125px;\r\n}\r\n#dy-spa-header-dynamic.sl-sticky + app-root .header__sticky.container {\r\ntop:64px;\r\n}\r\n}","jsCode":"SL.waitForVariable('window.slAnalytics').then(() => {\r\n  window.slAnalytics.show({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n  })\r\n})\r\n\r\nconst CONFIG = {\r\n  promocode: '',\r\n  genderLinks: {\r\n    active: 1,\r\n    kids: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-women\/',\r\n    women: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-women\/?',\r\n    men: 'https:\/\/www.tsum.ru\/catalog\/sel\/sale-24-men\/',\r\n  },\r\n  closeCookieName: 'sl_close_bar_312',\r\n  closeCookieExpire: 86400 * 7,\r\n  openTab: '_blank',\r\n  text: '<span>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0434\u0435\u043d\u044c \u0430\u043a\u0446\u0438\u0438 \u00ab\u0426\u0435\u043d\u044b \u043b\u0443\u0447\u0448\u0435, \u0447\u0435\u043c \u0432 \u0414\u0443\u0431\u0430\u0435\u00bb<\/span> ',\r\n  showMoreLink: 'https:\/\/www.tsum.ru\/catalog\/zhenskoe-18368\/',\r\n  showMoreText: '\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435',\r\n  copyText: '',\r\n  textSuccess: '',\r\n  buttonSuccessLink: '',\r\n  buttonSuccessText: '',\r\n};\r\n\r\nlet copied = false;\r\n\r\nfunction initContainer() {\r\n  if (!window.slSpaLoaded) {\r\n    document.addEventListener('sl-ready', function () {\r\n      window.dyAngularLoaded = true;\r\n      SL.waitForElement('app-root,#app-root', function (el) {\r\n        if (window.slTopBanner) return;\r\n        const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n        el[0].insertAdjacentHTML('beforebegin', html);\r\n        window.slTopBanner = true;\r\n        if (window.innerWidth < 1024 && el[0].nodeName === 'APP-ROOT') {\r\n          SL.waitForElement('app-root .header__sticky', () => {\r\n            const el = document.getElementById('dy-spa-header-dynamic');\r\n            if (el) {\r\n              el.classList.add('sl-sticky');\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  } else {\r\n    SL.waitForElement('app-root,#app-root', function (el) {\r\n      if (window.slTopBanner) return;\r\n      const html = '<div id=\"dy-spa-header-dynamic\"><\/div>';\r\n      el[0].insertAdjacentHTML('beforebegin', html);\r\n      window.slTopBanner = true;\r\n    });\r\n  }\r\n}\r\n\r\nif (!window.slTopBanner) {\r\n  initContainer();\r\n}\r\n\r\nfunction init(parent) {\r\n  const html = `\r\n    <div id=\"dy-bar-${dyVariationId}\" data-dy-sticky>\r\n    <a class=\"dy-bar-initial dy-show-more-link\" target=\"${CONFIG.openTab}\" href=\"${CONFIG.showMoreLink}\">${CONFIG.text} <\/a>\r\n    <a class=\"dy-copy-promo\">${CONFIG.copyText}<\/a>\r\n \r\n    <a class=\"dy-close-icon\">\r\n      <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"> <g fill=\"none\" fill-rule=\"evenodd\"> <path d=\"M0 0h24v24H0z\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"#99A0AD\" opacity=\".24\"\/> <circle cx=\"12\" cy=\"12\" r=\"10\" opacity=\".9\"\/> <path fill=\"#FFF\" d=\"M8.47 7.586l3.537 3.538L15.54 7.59a.625.625 0 0 1 .884.883l-3.534 3.535 3.534 3.533a.625.625 0 1 1-.884.884l-3.533-3.534-3.538 3.537a.625.625 0 1 1-.884-.884l3.538-3.537L7.586 8.47a.625.625 0 0 1 .884-.884z\"\/> <\/g> <\/svg>\r\n    <\/a>\r\n  <\/div>`;\r\n  parent.innerHTML = html;\r\n  var message = parent.querySelector('#dy-bar-${slVariationId}');\r\n\r\n  parent.style.height = message.offsetHeight + 'px';\r\n  parent.style.height = '64px';\r\n  parent.className += ' dy-message-bar';\r\n\r\n  if (CONFIG.promocode) {\r\n    addCopyScript();\r\n  }\r\n\r\n  if (CONFIG.genderLinks.active) {\r\n    checkAndChangeLink();\r\n  }\r\n\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-close-icon').addEventListener('click', (e) => {\r\n    e.stopPropagation();\r\n    closeMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-copy-promo').addEventListener('click', () => {\r\n    copyMessage(parent);\r\n  });\r\n  \/\/parent.querySelector('#dy-bar-${slVariationId} .dy-bar-link').addEventListener('click', () => {openMessage(parent)});\r\n  parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').addEventListener('click', () => {\r\n    openMessage(parent);\r\n  });\r\n  parent.querySelector('#dy-bar-${slVariationId}').addEventListener('click', () => {\r\n    window.slAnalytics.click({\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n    }, 'stickyBanner')\r\n   \/\/ parent.querySelector('#dy-bar-${slVariationId} .dy-show-more-link').click();\r\n  });\r\n  \r\n}\r\n\r\nSL.waitForElement('#dy-spa-header-dynamic', (el) => {\r\n  init(el[0]);\r\n});\r\n\r\nfunction addCopyScript() {\r\n  if (document.getElementById('sl_clipboard_script_id')) return;\r\n  var s = document.createElement('script');\r\n  var head = document.getElementsByTagName('head')[0];\r\n  s.addEventListener('load', onClipboardReady);\r\n  s.src = 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/clipboard.js\/2.0.0\/clipboard.min.js';\r\n  s.id = 'sl_clipboard_script_id';\r\n  head.appendChild(s);\r\n}\r\n\r\nfunction onClipboardReady() {\r\n  var clipboard = new ClipboardJS('.dy-copy-promo', {\r\n    text: function (trigger) {\r\n      return CONFIG.promocode;\r\n    },\r\n  });\r\n\r\n  clipboard.on('success', function (e) {\r\n    var copySuccess = document.querySelector('#dy-bar-${slVariationId} p');\r\n    copied = true;\r\n    copySuccess.className += ' _copied';\r\n  });\r\n}\r\n\r\nfunction checkAndChangeLink() {\r\n  var gender = SL.StorageUtils.get('selectedGender', ['cookieStorage']);\r\n  var links = document.querySelectorAll('.dy-bar-link, .dy-show-more-link');\r\n  if (links.length) {\r\n    for (let i = 0; i < links.length; i++) {\r\n      switch (gender) {\r\n        case 'kids':\r\n          links[i].href = CONFIG.genderLinks.kids;\r\n          break;\r\n        case 'men':\r\n          links[i].href = CONFIG.genderLinks.men;\r\n          break;\r\n        case 'women':\r\n          links[i].href = CONFIG.genderLinks.women;\r\n          break;\r\n        default:\r\n        \/\/ default\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setCookieAndEvent(eventName) {\r\n  SL.StorageUtils.set(CONFIG.closeCookieName, true, ['cookieStorage'], { expires: CONFIG.closeCookieExpire });\r\n  SL.API('event', { name: eventName, properties: { experience: '${slExperienceId}' } });\r\n}\r\n\r\nfunction closeMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Close bar message');\r\n}\r\nfunction copyMessage() {\r\n  setCookieAndEvent('Copy promo - bar message');\r\n}\r\nfunction openMessage(parent) {\r\n  if (parent) parent.parentNode.removeChild(parent);\r\n  setCookieAndEvent('Open bar message');\r\n}","weight":100,"variables":[],"id":"664f5f3fcdfef816de0f36df"}],"timeframe":{"start":"2024-05-30T00:00:00.000Z","end":"2024-05-30T23:59:00.000Z","user_timezone":true},"targetingWhen":false},{"id":"638efde511fad4619a0c051e","name":"Remove block - other pages - do not touch","version":"638efe1411fad4619a0c051f","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"const sticky = document.getElementById('dy-spa-header-dynamic');\r\nif (sticky) {\r\n  sticky.innerHTML = '';\r\n  sticky.removeAttribute('style');\r\n  sticky.classList.remove('sl-sticky')\r\n}","weight":100,"variables":[],"id":"638efe0e99dcd5fb6905fa49"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"6356bcba1c6b3f9e14042adc":{"name":"Listener sl-ready","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"6356bcd1fe9b4f979a0449dc","name":"Exp","version":"6356bd1d91c5f7125a019247","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"V","htmlCode":null,"cssCode":null,"jsCode":"if (!window.dyAngularLoaded) {\r\n   document.addEventListener('sl-ready',function(){\r\n          window.dyAngularLoaded = true;\r\n  });\r\ndocument.addEventListener('dy-ready',function(){\r\n window.dyAngularLoaded = true;\r\n});\r\n}\r\n\r\n(() => {\r\n    let oldPushState = history.pushState;\r\n    history.pushState = function pushState() {\r\n        let ret = oldPushState.apply(this, arguments);\r\n        window.dispatchEvent(new Event('pushstate'));\r\n        window.dispatchEvent(new Event('locationchange'));\r\n        return ret;\r\n    };\r\n\r\n    let oldReplaceState = history.replaceState;\r\n    history.replaceState = function replaceState() {\r\n        let ret = oldReplaceState.apply(this, arguments);\r\n        window.dispatchEvent(new Event('replacestate'));\r\n        window.dispatchEvent(new Event('locationchange'));\r\n        return ret;\r\n    };\r\n\r\n    window.addEventListener('popstate', () => {\r\n        window.dispatchEvent(new Event('locationchange'));\r\n    });\r\n})();\r\n\r\nwindow.addEventListener('locationchange', function () {\r\n    if (window.location.pathname === '\/about\/giftcard\/buy\/') {\r\n      SL.API('spa', { url: window.location.href, countAsPageview:true, context: { type:\"OTHER\" }})\r\n    }\r\n});","weight":100,"variables":[],"id":"6356bce1d9062ed0380b5331"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"637b9e9d9da744ff010c58ed":{"name":"404 - recs","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"64367d87d1d0a9d8320518dc","name":"React (women)","version":"65ccd9c58eb38112b102109d","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16992b7df0e34c60c40c8","key":"selectedGender","method":"equal","value":"women"}]},{"type":"Evaluator","conds":[{"id":"64b16992b7df0e34c60c40c9","key":"637b9f6a3e933e27f40b3248","method":"equal","value":"react"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation (copy React)1","htmlCode":null,"cssCode":"@media (min-width:454px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin-top:24px;\r\n    width: 90vw;\r\n}\r\n}\r\n\r\n@media (min-width:1024px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin: 48px -20px 0;\r\n    width: calc(100% + 40px);\r\n}\r\n}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '642ea1611f204f8625000fd5'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: \"app-not-found, [data-page-type='404'] a\",\r\n    strategyId: \"642ea1611f204f8625000fd5\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '642ea1611f204f8625000fd5'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"64367d87d1d0a9d8320518dd"}],"timeframe":false,"targetingWhen":false},{"id":"6451232838b701835d05c33e","name":"React (men)","version":"65ccd9c58eb38112b10210a1","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16992b7df0e34c60c40cc","key":"selectedGender","method":"equal","value":"men"}]},{"type":"Evaluator","conds":[{"id":"64b16992b7df0e34c60c40cd","key":"637b9f6a3e933e27f40b3248","method":"equal","value":"react"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation (copy React)1","htmlCode":null,"cssCode":"@media (min-width:454px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin-top:24px;\r\n    width: 90vw;\r\n}\r\n}\r\n\r\n@media (min-width:1024px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin: 48px -20px 0;\r\n    width: calc(100% + 40px);\r\n}\r\n}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '642ea67c11fad4619a0c0be5'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: \"app-not-found, [data-page-type='404'] a\",\r\n    strategyId: \"642ea67c11fad4619a0c0be5\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '642ea67c11fad4619a0c0be5'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"6451232838b701835d05c33f"}],"timeframe":false,"targetingWhen":false},{"id":"6451232838b701835d05c347","name":"React (kids)","version":"65ccd9c58eb38112b10210a5","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16992b7df0e34c60c40d0","key":"selectedGender","method":"equal","value":"kids"}]},{"type":"Evaluator","conds":[{"id":"64b16992b7df0e34c60c40d1","key":"637b9f6a3e933e27f40b3248","method":"equal","value":"react"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation (copy React)1","htmlCode":null,"cssCode":"@media (min-width:454px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin-top:24px;\r\n    width: 90vw;\r\n}\r\n}\r\n\r\n@media (min-width:1024px) {\r\n[data-page-type=\"404\"] #sl_recs_widget{\r\n    margin: 48px -20px 0;\r\n    width: calc(100% + 40px);\r\n}\r\n}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '642ea85d99dcd5fb6906003a'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: \"app-not-found, [data-page-type='404'] a\",\r\n    strategyId: \"642ea85d99dcd5fb6906003a\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '642ea85d99dcd5fb6906003a'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"6451232838b701835d05c348"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"6380d98e12e967bada0463cf":{"name":"Catalog - insert product from URL","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"6380d9a5d9062ed0380b53f7","name":"Experience 1","version":"63ac228b555e8d839c0456ca","status":1,"target":[{"type":"URL","conds":[{"id":"6380d9a5d9062ed0380b53f6","value":"utm_idproduct=","method":"contains","ignoreURLParams":0}]},{"type":"PageType","conds":[{"id":"6384981d9a3f3b9e90027887","value":"CATEGORY","method":"equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-meta-name=\"catalog\"] .product-list__item {text-align:center;}\r\n[data-meta-name=\"catalog\"] .product__image-wrapper{position: relative;\r\n    margin-bottom: 20px;\r\n    display: block;\r\n    overflow: hidden;    height: 222px;\r\n    width: 148px;    margin: 0 auto;}\r\n[data-meta-name=\"catalog\"] .product__brand__image {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    -o-object-fit: contain;\r\n    object-fit: contain;\r\nheight:28px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__brand {display:none}\r\n[data-meta-name=\"catalog\"] .product__description {\r\n    font-size: 12px;\r\n    line-height: 18px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\nmargin: 4px 0px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__price {font-size: 12px;  line-height: 18px;}\r\nlist-items [dy-catalog-custom]  .product__brand__image {display:none}\r\n[data-meta-name=\"catalog\"] .product__data {margin-top:10px;}\r\n@media (min-width: 1024px) {\r\n[data-meta-name=\"catalog\"] .product__image-wrapper{\r\n    height: 388px;\r\n    width: 252px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__brand__image {\r\n    height: 40px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__description {\r\nmargin: 8px 0 0;\r\nfont-size: 15px;\r\n    line-height: 23px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__price {font-size: 15px;  line-height: 23px;}\r\n}\r\n[data-meta-name=\"catalog\"] .product__image {\r\n    min-width: 1px;\r\n    max-width: 100%;\r\n    vertical-align: bottom;\r\n}\r\n[data-meta-name=\"catalog\"] .product__image-wrapper .product__image-last {\r\n    position: absolute;\r\n    top: 0;\r\n    left: -10000px;\r\n}\r\n\r\n[data-meta-name=\"catalog\"] .product__image-wrapper-gallery:hover .product__image-first:not(.product__image-no-last) {\r\n    position: absolute;\r\n    top: 0;\r\n    left: -10000px;\r\n}\r\n.product__image-wrapper-gallery:hover .product__image-last {\r\n    display: inline-block;\r\n    position: static;\r\n}","jsCode":"try {\r\n  if (!document.getElementById('dy-recs-styles-${slVariationId}')) {\r\n    var userStyle = document.createElement('style');\r\n    userStyle.id = 'dy-recs-styles-${slVariationId}';\r\n    userStyle.innerHTML = '[dy-catalog-custom] .price_type_new{color: #f94f0d;}[dy-catalog-custom] .price_type_old { text-decoration: line-through; color: #c8c8c8; }';\r\n\r\n    document.head.appendChild(userStyle);\r\n  }\r\n\r\n  var insertItemList = function (data, selector, replaceOption) {\r\n    SL.waitForElement(selector, function (elements) {\r\n      elements[0].parentNode.insertAdjacentHTML('beforeBegin', data.html);\r\n\r\n      SL.PubSub.once('spa', function (data) {\r\n        var insertedProducts = document.querySelectorAll('[dy-catalog-custom]');\r\n        for (var i = 0; i < insertedProducts.length; i++) {\r\n          insertedProducts[i].remove();\r\n        }\r\n      });\r\n\r\n      var insertedProducts = document.querySelectorAll('[dy-catalog-custom]');\r\n      for (var i = 0; i < insertedProducts.length; i++) {\r\n        insertedProducts[i].addEventListener('click', function (e) {\r\n          SL.API('event', {\r\n            name: 'Product from URL click',\r\n            properties: {\r\n              sku: e.currentTarget.getAttribute('data-product-id'),\r\n            },\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  var hideExistingProducts = function (products) {\r\n    var urls = products.map(function (p) {\r\n      return p.url.replace('https:\/\/www.tsum.ru', '');\r\n    });\r\n    for (var i = 0; i < urls.length; i++) {\r\n      var eProduct = document.querySelector('[href=\"' + urls[i] + '\"]');\r\n      if (eProduct) {\r\n        eProduct.closest('.product-list__item, [data-meta-name=\"product\"]').parentNode.style.display = 'none';\r\n      }\r\n    }\r\n  };\r\n\r\n  var showProducts = function (skus) {\r\n    return new Promise((resolve, reject) => {\r\n      SL.ServerUtils.getProductsData(skus, { interest: false, data: true }).then((data) => {\r\n        let layout = '';\r\n        if (data && data.products) {\r\n          let products = Object.keys(data.products)\r\n            .map((key) => data.products[key].productData)\r\n            .filter(function (product) {\r\n              return product !== undefined;\r\n            })\r\n            .sort(function (a, b) {\r\n              return skus.indexOf(a.sku) - skus.indexOf(b.sku);\r\n            });\r\n          hideExistingProducts(products);\r\n          layout = generateRecsLayout(products);\r\n        }\r\n        resolve({ html: layout });\r\n      });\r\n    });\r\n  };\r\n\r\n  var generateRecsLayout = function (products) {\r\n    var html = '';\r\n\r\n    for (var i = 0; i < products.length; i++) {\r\n      html +=\r\n        '<div class=\"product-list__item\" dy-catalog-custom data-product-id=\"' +\r\n        products[i].sku +\r\n        '\">' +\r\n        '    <div list-item=\"\"> ' +\r\n        '       <div class=\"product product_type_catalog\">' +\r\n        '        <a class=\"product__image-wrapper product__image-wrapper-gallery\" href=\"' +\r\n        products[i].url +\r\n        '\">' +\r\n        '            <img class=\"product__image product__image-first\" role=\"presentation\" alt=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21161\" title=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21161\" src=\"' +\r\n        products[i].image_url +\r\n        '\">' +\r\n        '            <img class=\"product__image product__image-last\" role=\"presentation\" alt=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21162\" title=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21162\" src=\"' +\r\n        products[i].image_url2 +\r\n        '\"><\/a>' +\r\n        '        <div class=\"product__data\">' +\r\n        '            <a class=\"product__info\" href=\"' +\r\n        products[i].url +\r\n        '\">' +\r\n        '                <p class=\"product__brand\">' +\r\n        products[i].brand +\r\n        '<\/p>' +\r\n        '             <img class=\"product__brand__image\" src=\"' +\r\n        products[i].brand_logo_url +\r\n        '\" alt=\"' +\r\n        products[i].brand +\r\n        '\" >' +\r\n        '                <p class=\"product__description\">' +\r\n        products[i].name +\r\n        '<\/p>' +\r\n        '                <span class=\"product__price-wrapper\">' +\r\n        (products[i].in_sale === 't' ? '<span class=\"product__price\"><span class=\"price price_type_old\"><span>' + parseInt(products[i].old_price).toLocaleString('ru-RU') + ' \u20bd<\/span><\/span><\/span>' : '') +\r\n        '                 <span class=\"product__price\">' +\r\n        '                    <span class=\"price ' +\r\n        (products[i].in_sale === 't' ? 'price_type_new' : '') +\r\n        '\"><span>' +\r\n        parseInt(products[i].price).toLocaleString('ru-RU') +\r\n        ' \u20bd<\/span><\/span>' +\r\n        '                <\/span>' +\r\n        '                <\/span>' +\r\n        '            <\/a>' +\r\n        \/\/ '<span class=\"product__label\"><span class=\"product__label\"><span class=\"label\" style=\"height: auto\">' + products[i].labels + '<\/span><\/span><\/span>' +\r\n        '        <\/div>' +\r\n        '    <\/div>' +\r\n        ' <\/div>' +\r\n        '<\/div>';\r\n    }\r\n\r\n    return html;\r\n  };\r\n\r\n  var getUtmSkus = function () {\r\n    const vars = {};\r\n    const parts = window.location.href.replace(\/[?&]+([^=&]+)=([^&]*)\/gi, function (m, key, value) {\r\n      vars[key] = value;\r\n    });\r\n    var s = decodeURI(vars['utm_idproduct']).toLowerCase();\r\n    if (s && s !== 'null') {\r\n      return s.replace(\/\\+\/g, ' ');\r\n    } else {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  var buildRecs = function () {\r\n    \/** @param {{html: string, data: object}} data *\/\r\n\r\n    var skus = getUtmSkus();\r\n    if (skus) {\r\n      skus = skus.split(',');\r\n      showProducts(skus).then(function (data) {\r\n        if (data) insertItemList(data, \".product-list__products > div:first-child, [data-meta-name='product']:first-child\", parseInt(2));\r\n      });\r\n    }\r\n  };\r\n\r\n  if (!window.slSpaLoaded) {\r\n    document.addEventListener('sl-ready', function () {\r\n      window.dyAngularLoaded = true;\r\n      buildRecs();\r\n    });\r\n  } else {\r\n    buildRecs();\r\n  }\r\n} catch (e) {}","weight":100,"variables":[],"id":"6380d9b3610bbed34204d810"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"63a036a5571df285e601c7b8":{"name":"Load slider","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"63a036ad3dd23539b00f231d","name":"1","version":"63a036beec56d5a30b0515eb","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"1","htmlCode":null,"cssCode":null,"jsCode":"(function(){\r\n  var HEAD = document.querySelector('head');\r\n  var SWIPER_JS = document.createElement('script');\r\n  SWIPER_JS.setAttribute('src', 'https:\/\/unpkg.com\/swiper@7.4.1\/swiper-bundle.min.js');\r\n  HEAD.appendChild(SWIPER_JS);\r\n\/\/ var SWIPER_CSS = document.createElement('link');\r\n\/\/ SWIPER_CSS.setAttribute('rel', 'stylesheet');\r\n\/\/ SWIPER_CSS.setAttribute('href', 'https:\/\/unpkg.com\/swiper@7\/swiper-bundle.min.css');\r\n\/\/ HEAD.appendChild(SWIPER_CSS);\r\n})();","weight":100,"variables":[],"id":"63a036bc658fe276db00cdf4"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"63a03c65d9ea38c20202265c":{"name":"PDP - recs","type":"custom_code","status":1,"frequency":null,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"6422e4d73dd23539b00f28ff","name":"Swimwear","version":"6422e5b6d1d0a9d83205174a","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422e4d73dd23539b00f28fc","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422e4d73dd23539b00f28fd","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u041a\u0443\u043f\u0430\u043b\u044c\u043d\u0438\u043a\u0438"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"6422caecd1d0a9d832051746\",\r\n            fallback: {\r\n                strategyId: \"6422caef1f204f8625000f1c\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"6422caefd9ea38c202022b5f\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"6422caef3dd23539b00f28e9\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422e5a11f204f8625000f22"}],"timeframe":false,"targetingWhen":false},{"id":"6422e1c13dd23539b00f28f6","name":"Slippers","version":"6422e40d083a980895099d2d","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422e1c13dd23539b00f28f4","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422e1c13dd23539b00f28f5","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0414\u043e\u043c\u0430\u0448\u043d\u0438\u0435 \u0442\u0443\u0444\u043b\u0438"}]},{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u043e\u0431\u0443\u0432\u044c"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"6422c99ad9ea38c202022b5e\",\r\n            fallback: {\r\n                strategyId: \"6422c99c3dd23539b00f28e8\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"6422c99e083a980895099d26\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"6422c99f658fe276db00d335\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422e3c8d1d0a9d832051748"}],"timeframe":false,"targetingWhen":false},{"id":"6422dcb73dd23539b00f28ef","name":"Lingerie","version":"6422dddd571df285e601cdb6","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422dcb73dd23539b00f28ec","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422dcb73dd23539b00f28ed","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0411\u0435\u043b\u044c\u0451"}]},{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0411\u0435\u043b\u044c\u0451 \u0438 \u0434\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u043e\u0434\u0435\u0436\u0434\u0430"}]},{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u043e\u0434\u0435\u0436\u0434\u0430"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"6422c71a0d9d844acd09c264\",\r\n            fallback: {\r\n                strategyId: \"6422c85a99dcd5fb6905ffaf\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"6422c85b571df285e601cdb5\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"6422c85d555e8d839c045ce2\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422ddd899dcd5fb6905ffb7"}],"timeframe":false,"targetingWhen":false},{"id":"6422d84099dcd5fb6905ffb4","name":"Interior","version":"6422d88d11fad4619a0c0b4c","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422d84099dcd5fb6905ffb1","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422d84099dcd5fb6905ffb2","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u0418\u043d\u0442\u0435\u0440\u044c\u0435\u0440"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"6422c5c399dcd5fb6905ffae\",\r\n            fallback: {\r\n                strategyId: \"6422c5c5555e8d839c045ce1\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"6422c5c7a34794aefc0eea7a\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"6422c5c811fad4619a0c0b4a\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422d887ec56d5a30b051aeb"}],"timeframe":false,"targetingWhen":false},{"id":"6422d691ec56d5a30b051aea","name":"Apple","version":"6422d77d11fad4619a0c0b4b","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422d7280d9d844acd09c266","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422d7280d9d844acd09c267","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"Apple"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"6422c2fc8c8b0661830f95e9\",\r\n            fallback: {\r\n                strategyId: \"6422c2ff3dd23539b00f28e7\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"6422c301d1d0a9d832051745\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"6422c303571df285e601cdb4\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422d778d9ea38c202022b61"}],"timeframe":false,"targetingWhen":false},{"id":"6422bd78083a980895099d25","name":"\u0421osmetics","version":"6422d3903dd23539b00f28ea","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422bd77083a980895099d23","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422bd78083a980895099d24","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"\u041a\u043e\u0441\u043c\u0435\u0442\u0438\u043a\u0430"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.Templates.pdpRecs({ \r\n    recs: { \r\n        tab1: { \r\n            strategyId: \"641d9fba571df285e601cd5e\",\r\n            fallback: {\r\n                strategyId: \"641d9fc011fad4619a0c0b29\"\r\n            },\r\n            fallback2: {\r\n                strategyId: \"641d9fc4d9ea38c202022b3f\"\r\n            }\r\n       },\r\n        widget: { \r\n            strategyId: \"641da06aec56d5a30b051acb\"\r\n        }\r\n    }\r\n}, ${slClickObj} )","weight":100,"variables":[],"id":"6422bd8e99dcd5fb6905ffad"}],"timeframe":false,"targetingWhen":false},{"id":"6422a6fd0d9d844acd09c262","name":"Shop-In-Shop","version":"6422b0ce11fad4619a0c0b47","status":1,"target":[{"type":"Cookie","conds":[{"id":"6422a6fd0d9d844acd09c261","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"6422a9058927d30e7103b7e0","value":"PRODUCT","method":"equal"}]},{"type":"ProductPage","conds":[{"type":"product_with_property","value":[{"key":"categories","method":"equal","value":"Shop-In-Shop"}]}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.waitForVariable('SL.Templates').then(() => {\r\nSL.Templates.pdpRecs({ recs: { widget: { enabled:0 }}}, ${slClickObj} )\r\n})","weight":100,"variables":[],"id":"6422a73b8927d30e7103b7de"}],"timeframe":false,"targetingWhen":false},{"id":"63a03c7499dcd5fb6905faac","name":"Experience 1","version":"6422e60d0d9d844acd09c269","status":1,"target":[{"type":"Cookie","conds":[{"id":"63a2d6a8658fe276db00ce13","key":"t_sl_test","method":"equal","value":"true"}]},{"type":"PageType","conds":[{"id":"63a03c7499dcd5fb6905faab","value":"PRODUCT","method":"equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"SL.waitForVariable('SL.Templates').then(() => {\r\nSL.Templates.pdpRecs(false, ${slClickObj})\r\n})","weight":100,"variables":[],"id":"63a03c89083a9808950997bb"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"63d2aed599dcd5fb6905fc2d":{"name":"Set test cookie","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"63d2aee599dcd5fb6905fc31","name":"1","version":"63d2aef28927d30e7103b24c","status":1,"target":[{"type":"URL","conds":[{"id":"63d2aee599dcd5fb6905fc30","value":"?sl_set_cookie","method":"contains","ignoreURLParams":0}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"1","htmlCode":null,"cssCode":null,"jsCode":"document.cookie=\"sl_test=1;path=\/\";\r\ndocument.cookie='_sl_qa=1;path=\/';","weight":100,"variables":[],"id":"63d2aeefec56d5a30b051763"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"642154891f204f8625000eeb":{"name":"Templates","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"64b94dd74c26bb6403032532","name":"v3","version":"64b954e01baf5c06e606effd","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"window.SL.Templates = {\r\n  pdpRecs: function (updatedConfig, trackObject) {\r\n    var CURRENCY_SYMBOL = getCurrency();\r\n    function mergeDeep(target, source) {\r\n      if (typeof target !== 'object' || typeof source !== 'object') {\r\n        return source;\r\n      }\r\n\r\n      const merged = { ...target };\r\n\r\n      Object.keys(source).forEach((key) => {\r\n        if (merged[key] && typeof merged[key] === 'object') {\r\n          merged[key] = mergeDeep(merged[key], source[key]);\r\n        } else {\r\n          Object.assign(merged, { [key]: source[key] });\r\n        }\r\n      });\r\n\r\n      return merged;\r\n    }\r\n    function getCurrency() {\r\n      if (SL.pageContext.lng && SL.pageContext.lng === 'kz') {\r\n        return '\u20b8';\r\n      } else {\r\n        return '\u20bd';\r\n      }\r\n    }\r\n    let CONFIG = {\r\n      selector: 'item-view,item-view-phone',\r\n      insertMethod: 1,\r\n      recs: {\r\n        tab1: {\r\n          enabled: 1,\r\n          strategyId: '6398755fa34794aefc0ee1fc',\r\n          heading: '\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u044b',\r\n          layoutType: 'slider',\r\n          minPriceRatio: 30,\r\n          maxPriceRatio: 50,\r\n          maxProducts: 36,\r\n          minProducts: 6,\r\n          usePriceRange: 1,\r\n          useColorFilter: 1,\r\n          useStyleFilter: 1,\r\n          fallback: {\r\n            enabled: 1,\r\n            strategyId: '6398761ea34794aefc0ee1fd',\r\n            maxProducts: 36,\r\n            minPriceRatio: 30,\r\n            maxPriceRatio: 50,\r\n            minProducts: 6,\r\n            usePriceRange: 1,\r\n            useColorFilter: 0,\r\n            useStyleFilter: 1,\r\n            events: {\r\n              widgetInserted: 'PDP tab 1 fallback inserted',\r\n              widgetEmptyDueToResponse: 'PDP tab 1 fallback empty response',\r\n              widgetEmptyDueToConditions: 'PDP tab 1 fallback empty conditions',\r\n              click: 'PDP tab 1 click',\r\n            },\r\n          },\r\n          fallback2: {\r\n            enabled: 1,\r\n            strategyId: '64184a88d9ea38c202022b12',\r\n            maxProducts: 36,\r\n            minPriceRatio: 30,\r\n            maxPriceRatio: 50,\r\n            minProducts: 6,\r\n            usePriceRange: 1,\r\n            useColorFilter: 0,\r\n            useStyleFilter: 0,\r\n            events: {\r\n              widgetInserted: 'PDP tab 1 fallback2 inserted',\r\n              widgetEmptyDueToResponse: 'PDP tab 1 fallback2 empty response',\r\n              widgetEmptyDueToConditions: 'PDP tab 1 fallback2 empty conditions',\r\n              click: 'PDP tab 1 click',\r\n            },\r\n          },\r\n          events: {\r\n            widgetInserted: 'PDP tab 1 inserted',\r\n            widgetEmptyDueToResponse: 'PDP tab 1 empty response',\r\n            widgetEmptyDueToConditions: 'PDP tab 1 empty conditions',\r\n            click: 'PDP tab 1 click',\r\n          },\r\n        },\r\n        tab2: {\r\n          enabled: 1,\r\n          strategyId: '639873feec56d5a30b0515c0',\r\n          heading: '\u0412\u044b \u0441\u043c\u043e\u0442\u0440\u0435\u043b\u0438',\r\n          layoutType: 'slider',\r\n          minPriceRatio: 0,\r\n          maxPriceRatio: 10,\r\n          maxProducts: 50,\r\n          minProducts: 1,\r\n          usePriceRange: 0,\r\n          useColorFilter: 0,\r\n          useStyleFilter: 0,\r\n          fallback: {\r\n            enabled: 0,\r\n            strategyId: '',\r\n            maxProducts: 50,\r\n            minProducts: 1,\r\n            usePriceRange: 0,\r\n            minPriceRatio: 0,\r\n            maxPriceRatio: 100,\r\n            useColorFilter: 0,\r\n            useStyleFilter: 0,\r\n            events: {\r\n              widgetInserted: 'PDP tab 2 fallback inserted',\r\n              widgetEmptyDueToResponse: 'PDP tab 2 fallback empty response',\r\n              widgetEmptyDueToConditions: 'PDP tab 2 fallback empty conditions',\r\n              click: 'PDP tab 2 click',\r\n            },\r\n          },\r\n          events: {\r\n            widgetInserted: 'PDP tab 2 inserted',\r\n            widgetEmptyDueToResponse: 'PDP tab 2 empty response',\r\n            widgetEmptyDueToConditions: 'PDP tab 2 empty conditions',\r\n            click: 'PDP tab 2 click',\r\n          },\r\n        },\r\n        widget: {\r\n          enabled: 1,\r\n          strategyId: '63a0351411fad4619a0c0580',\r\n          heading: '\u0412\u0430\u043c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f',\r\n          layoutType: 'grid',\r\n          minPriceRatio: 30,\r\n          maxPriceRatio: 50,\r\n          maxProducts: 30,\r\n          minProducts: 6,\r\n          usePriceRange: 0,\r\n          useColorFilter: 0,\r\n          useStyleFilter: 0,\r\n          fallback: {\r\n            enabled: 0,\r\n            strategyId: '6398770c99dcd5fb6905fa70',\r\n            maxProducts: 30,\r\n            minProducts: 6,\r\n            usePriceRange: 0,\r\n            minPriceRatio: 0,\r\n            maxPriceRatio: 100,\r\n            useColorFilter: 0,\r\n            useStyleFilter: 0,\r\n            events: {\r\n              widgetInserted: 'PDP fallback widget inserted',\r\n              widgetEmptyDueToResponse: 'PDP fallback widget empty response',\r\n              widgetEmptyDueToConditions: 'PDP fallback widget empty conditions',\r\n              click: 'PDP widget click',\r\n            },\r\n          },\r\n          events: {\r\n            widgetInserted: 'PDP widget inserted',\r\n            widgetEmptyDueToResponse: 'PDP widget empty response',\r\n            widgetEmptyDueToConditions: 'PDP widget empty conditions',\r\n            click: 'PDP widget click',\r\n          },\r\n        },\r\n      },\r\n    };\r\n    if (updatedConfig) {\r\n      CONFIG = mergeDeep(CONFIG, updatedConfig);\r\n    }\r\n\r\n    addStyles();\r\n\r\n    if (!window.dyAngularLoaded) {\r\n      document.addEventListener('sl-ready', function () {\r\n        window.dyAngularLoaded = true;\r\n        init();\r\n      });\r\n    } else {\r\n      init();\r\n    }\r\n\r\n    function init() {\r\n      removeElements('#dy-reco-widgets');\r\n      createWidgetContainer();\r\n      if (CONFIG.recs.tab1.enabled) {\r\n        getRecsLayout(CONFIG.recs.tab1).then(function (response) {\r\n          SL.waitForElement(\r\n            '#dy-recs-tab-content-1',\r\n            function (el) {\r\n              var targetNode = el[0];\r\n              if (response && response.html) {\r\n                targetNode.innerHTML = response.html;\r\n                targetNode.dyClickEvent = CONFIG.recs.tab1.events.click;\r\n                initSlider(targetNode);\r\n                initDYTracking(targetNode);\r\n                dispatchEvent(targetNode, 'dy-widget-rendered', {\r\n                  bubbles: true,\r\n                  detail: response.data,\r\n                });\r\n                sendWidgetInsertedEvent(CONFIG.recs.tab1, response);\r\n              } else {\r\n                targetNode.style.display = 'none';\r\n                document.querySelector('#dy-recs-tab-1 + label').style.display = 'none';\r\n                SL.waitForElement('#dy-recs-tab-2 + label', function (el) {\r\n                  el[0].click();\r\n                });\r\n              }\r\n            },\r\n            1,\r\n            100,\r\n            10,\r\n          );\r\n        });\r\n      } else {\r\n        SL.waitForElement('#dy-recs-tab-content-1', (el) => {\r\n          el[0].style.display = 'none';\r\n          document.querySelector('#dy-recs-tab-1 + label').style.display = 'none';\r\n          SL.waitForElement('#dy-recs-tab-2 + label', function (el) {\r\n            el[0].click();\r\n          });\r\n        });\r\n      }\r\n      if (CONFIG.recs.tab2.enabled) {\r\n        getRecsLayout(CONFIG.recs.tab2).then(function (response) {\r\n          SL.waitForElement(\r\n            '#dy-recs-tab-content-2',\r\n            function (el) {\r\n              var targetNode = el[0];\r\n              if (response && response.html) {\r\n                targetNode.innerHTML = response.html;\r\n                targetNode.dyClickEvent = CONFIG.recs.tab2.events.click;\r\n                initSlider(targetNode);\r\n                initDYTracking(targetNode);\r\n                dispatchEvent(targetNode, 'dy-widget-rendered', {\r\n                  bubbles: true,\r\n                  detail: response.data,\r\n                });\r\n                sendWidgetInsertedEvent(CONFIG.recs.tab2, response);\r\n              } else {\r\n                targetNode.style.display = 'none';\r\n                document.querySelector('#dy-recs-tab-2 + label').style.display = 'none';\r\n              }\r\n            },\r\n            1,\r\n            100,\r\n            10,\r\n          );\r\n        });\r\n      } else {\r\n        SL.waitForElement('#dy-recs-tab-content-2', (el) => {\r\n          el[0].style.display = 'none';\r\n          document.querySelector('#dy-recs-tab-2 + label').style.display = 'none';\r\n        });\r\n      }\r\n\r\n      if (CONFIG.recs.widget.enabled) {\r\n        getRecsLayout(CONFIG.recs.widget).then(function (response) {\r\n          SL.waitForElement(\r\n            '.dy-bottom-widget',\r\n            function (el) {\r\n              if (!response) return;\r\n              var targetNode = el[0];\r\n              targetNode.innerHTML = response.html;\r\n              targetNode.dyClickEvent = CONFIG.recs.widget.events.click;\r\n              dispatchEvent(targetNode, 'dy-widget-rendered', {\r\n                bubbles: true,\r\n                detail: response.data,\r\n              });\r\n              sendWidgetInsertedEvent(CONFIG.recs.widget, response);\r\n              if (window.innerWidth > 1023) {\r\n                initGrid();\r\n              }\r\n\r\n              initDYTracking(targetNode);\r\n              elementInViewportEvent('.dy-bottom-widget ', 'PDP widget in viewport');\r\n            },\r\n            1,\r\n            100,\r\n            10,\r\n          );\r\n        });\r\n      }\r\n\r\n      initClickEvents();\r\n      elementInViewportEvent('#dy-recs-tab-content', 'PDP Tabs in viewport');\r\n    }\r\n\r\n    function createWidgetContainer() {\r\n      SL.waitForElement(CONFIG.selector, function (arr) {\r\n        var replaceOption = CONFIG.insertMethod;\r\n        var elementToReplace = arr[0];\r\n        \/\/ 0 - replace, 1 - insert after, 2 - insert before\r\n        var container;\r\n        if (replaceOption === 1) {\r\n          container = document.createElement('div');\r\n          elementToReplace.parentNode.insertBefore(container, elementToReplace.nextSibling);\r\n        } else if (replaceOption === 2) {\r\n          container = document.createElement('div');\r\n          elementToReplace.parentNode.insertBefore(container, elementToReplace);\r\n        } else {\r\n          container = elementToReplace;\r\n        }\r\n\r\n        if (!container.id) container.id = 'dy-reco-widgets';\r\n\r\n        container.innerHTML = '<div class=\"dy-recs-tabs\"> <div class=\"dy-recs-tab-head\"><input type=\"radio\" name=\"tab-btn\" id=\"dy-recs-tab-1\" value=\"\" checked> <label for=\"dy-recs-tab-1\">' + CONFIG.recs.tab1.heading + '<\/label> <input type=\"radio\" name=\"tab-btn\" id=\"dy-recs-tab-2\" value=\"\"> <label for=\"dy-recs-tab-2\">' + CONFIG.recs.tab2.heading + '<\/label> <\/div><div id=\"dy-recs-tab-content\"><div id=\"dy-recs-tab-content-1\" data-id=\"dy-recs-tab-1\" class=\"dy-recs-tab-content active dy-recs-parent\"><\/div> <div data-id=\"dy-recs-tab-2\" id=\"dy-recs-tab-content-2\" class=\"dy-recs-tab-content dy-recs-parent\"><\/div><\/div> <\/div><div class=\"dy-bottom-widget dy-recs-parent\"><\/div>';\r\n\r\n        initTabs(container);\r\n      });\r\n    }\r\n\r\n    function initTabs(container) {\r\n      var tabs = container.querySelectorAll('input[type=\"radio\"]');\r\n      for (var i = 0; i < tabs.length; i++) {\r\n        tabs[i].addEventListener('change', function (e) {\r\n          var activeTab = container.querySelector('.dy-recs-tab-content.active');\r\n          if (activeTab) {\r\n            activeTab.classList.remove('active');\r\n          }\r\n          container.querySelector('.dy-recs-tab-content[data-id=\"' + e.target.id + '\"]').classList.add('active');\r\n          sendDYCustomEvent('PDP change tab');\r\n        });\r\n      }\r\n    }\r\n\r\n    function getRecsLayout(blockData) {\r\n      return new Promise((resolve) => {\r\n        getRecommendations(blockData).then(function (data) {\r\n          var layout = '';\r\n          var heading = blockData.heading;\r\n          var layoutType = blockData.layoutType;\r\n\r\n          if (data && data.slots && data.slots.length && data.slots.length >= blockData.minProducts) {\r\n            layout = generateRecsLayout(data, layoutType, heading);\r\n          }\r\n          if (!layout.length && blockData.fallback.enabled) {\r\n            getRecommendations(blockData.fallback).then(function (fallbackData) {\r\n              if (fallbackData && fallbackData.slots && fallbackData.slots.length && fallbackData.slots.length >= blockData.fallback.minProducts) {\r\n                layout = generateRecsLayout(fallbackData, layoutType, heading);\r\n                resolve({ html: layout, data: fallbackData, fallback: true });\r\n              } else {\r\n                if (!layout.length && blockData.fallback2 && blockData.fallback2.enabled) {\r\n                  getRecommendations(blockData.fallback2).then(function (fallback2Data) {\r\n                    if (fallback2Data && fallback2Data.slots && fallback2Data.slots.length && fallback2Data.slots.length >= blockData.fallback2.minProducts) {\r\n                      layout = generateRecsLayout(fallback2Data, layoutType, heading);\r\n                      resolve({\r\n                        html: layout,\r\n                        data: fallback2Data,\r\n                        fallback: true,\r\n                      });\r\n                    } else {\r\n                      resolve(false);\r\n                    }\r\n                  });\r\n                } else {\r\n                  resolve(false);\r\n                }\r\n              }\r\n            });\r\n          } else if (!layout.length) {\r\n            resolve(false);\r\n          } else {\r\n            resolve({ html: layout, data: data });\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    function getRecommendations(recsObj) {\r\n      var rules = recsObj.usePriceRange ? getRules(recsObj) : [];\r\n      var strategy = recsObj.strategyId;\r\n\r\n      return new Promise((resolve) => {\r\n        SL.Recommendations.get(strategy, { maxProducts: recsObj.maxProducts }, function (err, data) {\r\n          if (err || !data) {\r\n            return resolve(false);\r\n          }\r\n\r\n          data = getProductsInRange(data, recsObj);\r\n          if (recsObj.useColorFilter) {\r\n            data = getProductsFilteredByProp(data, recsObj, 'color');\r\n          }\r\n          if (recsObj.useStyleFilter) {\r\n            data = getProductsFilteredByProp(data, recsObj, 'style');\r\n          }\r\n\r\n          sendWidgetEvents(data, recsObj);\r\n\r\n          resolve(data);\r\n        });\r\n      });\r\n    }\r\n\r\n    function getProductsInRange(data, config) {\r\n      var productPrice = getCurrentPrice();\r\n      if (!productPrice) return data;\r\n      if (!config.usePriceRange) return data;\r\n      var minPrice = parseInt(productPrice - productPrice * (config.minPriceRatio \/ 100));\r\n      var maxPrice = parseInt(productPrice + productPrice * (config.maxPriceRatio \/ 100));\r\n\r\n      data.slots = data.slots.filter(function (product) {\r\n        if (product.item.price >= minPrice && product.item.price <= maxPrice) {\r\n          return true;\r\n        }\r\n      });\r\n\r\n      return data;\r\n    }\r\n\r\n    function getProductsFilteredByProp(data, config, prop) {\r\n      const propValue = getCurrentPropductProp(prop);\r\n      if (!propValue) return data;\r\n\r\n      data.slots = data.slots.filter(function (product) {\r\n        if (product.item[prop] === propValue) {\r\n          return true;\r\n        }\r\n      });\r\n\r\n      return data;\r\n    }\r\n\r\n    function sendWidgetEvents(data, blockData) {\r\n      var eventProps = {};\r\n      if (data)\r\n        eventProps = {\r\n          strategyId: data.wId,\r\n          strategyName: data.name,\r\n          fallback: data.fallback,\r\n        };\r\n\r\n      if (data && data.slots && data.slots.length && data.slots.length >= blockData.minProducts) {\r\n        \/\/ layout = generateRecsLayout(data);\r\n      } else if (data && data.slots.length && blockData.events.widgetEmptyDueToConditions.length) {\r\n        sendDYCustomEvent(blockData.events.widgetEmptyDueToConditions, eventProps);\r\n      } else if (data && blockData.events.widgetEmptyDueToResponse.length) {\r\n        sendDYCustomEvent(blockData.events.widgetEmptyDueToResponse, eventProps);\r\n      } else {\r\n        sendDYCustomEvent('PDP recs error', eventProps);\r\n      }\r\n    }\r\n    function sendWidgetInsertedEvent(widget, response) {\r\n      var eventProps = {\r\n        strategyId: response.data.wId,\r\n        strategyName: response.data.name,\r\n        fallback: response.data.fallback,\r\n      };\r\n      if (response.fallback && widget.fallback.events.widgetInserted.length) {\r\n        sendDYCustomEvent(widget.fallback.events.widgetInserted, eventProps);\r\n      } else if (widget.events.widgetInserted.length) {\r\n        sendDYCustomEvent(widget.events.widgetInserted, eventProps);\r\n      }\r\n    }\r\n\r\n    function getRules(config) {\r\n      var realtimeRules = [];\r\n\r\n      var currentPrice = getCurrentPrice();\r\n      var gte = parseInt(currentPrice - currentPrice * (config.minPriceRatio \/ 100));\r\n      var lte = parseInt(currentPrice + currentPrice * (config.maxPriceRatio \/ 100));\r\n\r\n      realtimeRules = [\r\n        {\r\n          id: -1,\r\n          isContextAware: false,\r\n          query: {\r\n            conditions: [\r\n              {\r\n                field: 'price',\r\n                arguments: [\r\n                  {\r\n                    action: 'GTE',\r\n                    value: gte,\r\n                  },\r\n                ],\r\n              },\r\n              {\r\n                field: 'price',\r\n                arguments: [\r\n                  {\r\n                    action: 'LTE',\r\n                    value: lte,\r\n                  },\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n          type: 'include',\r\n          slots: [],\r\n        },\r\n      ];\r\n\r\n      return realtimeRules;\r\n    }\r\n\r\n    function initGrid() {\r\n      var list = document.querySelectorAll(\"#dy-reco-widgets [data-type='grid'] .product\");\r\n      var button = document.getElementById('dy-show-more');\r\n      var numInList = list.length;\r\n      if (numInList > getNumShow()) {\r\n        button.style.display = 'inline-block';\r\n      }\r\n      Array.from(list)\r\n        .slice(0, getNumShow())\r\n        .forEach((el) => el.classList.add('dy-visible'));\r\n\r\n      button.addEventListener('click', function () {\r\n        var showing = Array.from(list).filter((el) => el.classList.contains('dy-visible')).length;\r\n        Array.from(list)\r\n          .slice(showing - 1, showing + getNumShow())\r\n          .forEach((el) => el.classList.add('dy-visible'));\r\n        var nowShowing = Array.from(list).filter((el) => el.classList.contains('dy-visible')).length;\r\n        if (nowShowing >= numInList) {\r\n          button.style.display = 'none';\r\n        }\r\n      });\r\n    }\r\n\r\n    function initSlider(container) {\r\n      var config = getSwiperConfig(container);\r\n      var slidesCount = container.querySelectorAll('.swiper-slide').length;\r\n\r\n      if ((slidesCount < 6 && window.innerWidth > 1023) || (slidesCount < 5 && window.innerWidth < 1024 && window.innerWidth > 767) || (slidesCount < 4 && window.innerWidth < 768 && window.innerWidth > 480) || (slidesCount < 3 && window.innerWidth < 480)) {\r\n        config.loop = false;\r\n      }\r\n\r\n      if (window.innerWidth > 767) {\r\n        var swiper = new Swiper(container.querySelector('.swiper'), config);\r\n\r\n        swiper.on('resize', function (instance) {\r\n          container.querySelector('.swiper').classList.toggle('dy-swiper-active', instance.virtualSize > instance.size);\r\n        });\r\n      } else {\r\n        container.querySelector('.swiper').setAttribute('data-type', 'grid');\r\n      }\r\n    }\r\n\r\n    function getSwiperConfig(container) {\r\n      return {\r\n        loop: true,\r\n        slidesPerView: 6,\r\n        spaceBetween: 24,\r\n        slidesPerGroup: 3,\r\n        watchOverflow: true,\r\n        threshold: 15,\r\n        breakpoints: {\r\n          320: {\r\n            slidesPerView: 2.1,\r\n            spaceBetween: 24,\r\n            slidesPerGroup: 1,\r\n            freemode: true,\r\n            threshold: 0,\r\n          },\r\n          480: {\r\n            slidesPerView: 3,\r\n            slidesPerGroup: 1,\r\n            threshold: 0,\r\n          },\r\n          768: {\r\n            slidesPerView: 4,\r\n            slidesPerGroup: 2,\r\n            threshold: 5,\r\n          },\r\n          1024: {\r\n            slidesPerView: 6,\r\n            freemode: false,\r\n            slidesPerGroup: 3,\r\n            threshold: 12,\r\n          },\r\n        },\r\n        pagination: {\r\n          el: container.querySelector('.swiper-pagination'),\r\n          dynamicBullets: true,\r\n        },\r\n\r\n        navigation: {\r\n          nextEl: container.querySelector('.dy-button-next'),\r\n          prevEl: container.querySelector('.dy-button-prev'),\r\n        },\r\n      };\r\n    }\r\n    function initDYTracking(container) {\r\n      SL.Recommendations.track(container.querySelector('[data-sl-widget-id]'), trackObject);\r\n    }\r\n    function generateRecsLayout(data, layoutType, heading) {\r\n      var products = data.slots.map(function (i) {\r\n        i.item.strId = i.strId;\r\n        i.item.fallback = i.fallback;\r\n        return i.item;\r\n      });\r\n      var html = '';\r\n\r\n      var isMinimal = products.length <= 6 ? true : false;\r\n      var isGrid = layoutType === 'grid' ? true : false;\r\n\r\n      html += '<div class=\"dy-recs-container\" data-dy-lng=\"' + SL.pageContext.lng + '\">';\r\n      html += '  <h3 class=\"dy-heading_ stl_header\">' + heading + '<\/h3>';\r\n      html += '<div class=\"swiper\" data-type=\"' + layoutType + '\">';\r\n      html += '  <div class=\"dy-container swiper-wrapper\"  data-dy-minimal=\"' + isMinimal + '\" data-sl-fallback=\"' + data.fallback + '\" data-sl-widget-id=\"' + data.wId + '\" data-sl-feed-id=\"' + data.fId + '\" data-dy-title=\"' + heading + '\">';\r\n      for (var i = 0; i < products.length; i++) {\r\n        html += '   <div class=\"product swiper-slide\" data-sl-product-slot=\"' + i + '\" data-sl-product-fallback=\"' + products[i].fallback + '\" data-sl-strategy-id=\"' + products[i].strId + '\" data-sl-product-id=\"' + products[i].sku + '\">' + '               <a class=\"product__image-wrapper dy-click-link\" href=\"' + products[i].url + '\" data-id=\"' + products[i].sku + '\" data-position=\"' + (i + 1) + '\">  ' + '                   <img alt=\"\" class=\"product__image product__image-first\" src=\"' + products[i].image_url + '\">  ' + '               <\/a>  ' + '               <div class=\"product__data\">  ' + '                   <a href=\"' + products[i].url + '\" class=\"dy-click-link\" data-id=\"' + products[i].sku + '\" data-position=\"' + (i + 1) + '\">  ' + '                     <p class=\"product__brand\">' + products[i].brand + '<\/p>  ' + '                     <p class=\"product__description\">' + products[i].name + '<\/p>  ' + '                     <span class=\"product__price-wrapper\">  ' + (products[i].in_sale === 't' ? '<span class=\"product__price\"><span class=\"price price_type_old\"><span>' + Math.round(products[i].old_price).toLocaleString('ru-RU') + ' ' + CURRENCY_SYMBOL + '<\/span><\/span><\/span>' : '') + '                         <span class=\"product__price\">  ' + '                             <span class=\"price ' + (products[i].in_sale === 't' ? 'price_type_new' : '') + '\"><span>' + Math.round(products[i].price).toLocaleString('ru-RU') + ' ' + CURRENCY_SYMBOL + '<\/span><\/span>' + '                         <\/span>  ' + '                     <\/span>  ' + '                   <\/a>  ' + '               <\/div>  ' + '           <\/div> ';\r\n      }\r\n      html += '  <\/div>';\r\n      if (isGrid) {\r\n        html += '<div class=\"dy-show-more\" data-dy-minimal=\"' + isMinimal + '\"> <a class=\"button button_style_transparent\" id=\"dy-show-more\"> <span class=\"button__text\">\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432<\/span> <\/a> <\/div>';\r\n      }\r\n      html += '  <\/div>';\r\n      if (!isGrid) {\r\n        html += '<div class=\"swiper-pagination\"><\/div><div class=\"dy-nav-button dy-button-prev\"><svg width=\"41\" height=\"40\" viewBox=\"0 0 41 40\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\"> <g fill=\"none\" fill-rule=\"evenodd\"> <path d=\"M40 0H0v40h40z\"\/> <path stroke=\"#F94F0D\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M25.753 5.86 11.86 20.247 26.247 34.14\"\/> <\/g> <\/svg><\/div> <div class=\"dy-nav-button dy-button-next\"><svg width=\"41\" height=\"40\" viewBox=\"0 0 41 40\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\"> <g fill=\"none\" fill-rule=\"evenodd\"> <path d=\"M.14 0h40v40h-40z\"\/> <path stroke=\"#F94F0C\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M14.387 5.86 28.28 20.247 13.893 34.14\"\/> <\/g> <\/svg><\/div>';\r\n      }\r\n      html += '<\/div>';\r\n\r\n      return html;\r\n    }\r\n\r\n    function getCurrentPrice() {\r\n      if (SL.pageData && SL.pageData.price) {\r\n        return parseInt(SL.pageData.price);\r\n      }\r\n      var metaAmount = document.querySelector('[property=\"og:price:amount\"]');\r\n      if (metaAmount) {\r\n        return parseInt(metaAmount.getAttribute('content'));\r\n      }\r\n      return false;\r\n    }\r\n    function getCurrentColor() {\r\n      if (SL.pageData && SL.pageData.color) {\r\n        return SL.pageData.color;\r\n      }\r\n      return false;\r\n    }\r\n    function getCurrentPropductProp(prop) {\r\n      if (SL.pageData && SL.pageData[prop]) {\r\n        return SL.pageData[prop];\r\n      }\r\n      return false;\r\n    }\r\n\r\n    function removeElements(selector) {\r\n      var elements = document.querySelectorAll(selector);\r\n      for (var i = 0; i < elements.length; i++) {\r\n        elements[i].parentNode.removeChild(elements[i]);\r\n      }\r\n    }\r\n\r\n    function sendDYCustomEvent(name, properties) {\r\n      var props = properties ? properties : {};\r\n      SL.API('event', { name: name, properties: props });\r\n    }\r\n\r\n    function initClickEvents() {\r\n      if (window.dyRecsClicksInitialized) return;\r\n\r\n      window.dyRecsClicksInitialized = true;\r\n\r\n      SL.Utils.on('click', '#dy-reco-widgets .dy-click-link', function (e) {\r\n        var currentTarget = e.target.getAttribute('data-id') ? e.target : e.target.closest('[data-id]');\r\n        var eventName = currentTarget.closest('.dy-recs-parent').dyClickEvent;\r\n        if (eventName) {\r\n          sendDYCustomEvent(eventName, {\r\n            productId: currentTarget.getAttribute('data-id'),\r\n            position: parseInt(currentTarget.getAttribute('data-position')),\r\n            strategy_id: currentTarget.closest('[data-dy-widget-id]').getAttribute('data-dy-widget-id'),\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    function elementInViewportEvent(elementSelector, eventName) {\r\n      var observer = new IntersectionObserver(\r\n        (entries, observer) => {\r\n          if (!entries[0].isIntersecting || entries[0].intersectionRatio < 0.4) {\r\n            return;\r\n          }\r\n          sendDYCustomEvent(eventName);\r\n\r\n          observer.disconnect();\r\n        },\r\n        { threshold: 0.4 },\r\n      );\r\n\r\n      SL.waitForElement(\r\n        elementSelector,\r\n        function (el) {\r\n          observer.observe(el[0]);\r\n        },\r\n        1,\r\n        100,\r\n        10,\r\n      );\r\n    }\r\n\r\n    function getNumShow() {\r\n      var numToShow = 6;\r\n      if (window.innerWidth > 1200) {\r\n        numToShow = 6;\r\n      } else if (window.innerWidth > 1060) {\r\n        numToShow = 5;\r\n      } else if (window.innerWidth > 809) {\r\n        numToShow = 4;\r\n      } else if (window.innerWidth > 615) {\r\n        numToShow = 3;\r\n      } else {\r\n        numToShow = 2;\r\n      }\r\n      return numToShow;\r\n    }\r\n\r\n    function dispatchEvent(target, type, options) {\r\n      try {\r\n        options || (options = {});\r\n        var evt;\r\n        if (typeof CustomEvent === 'function') {\r\n          evt = new CustomEvent(type, options);\r\n        } else {\r\n          evt = document.createEvent('CustomEvent');\r\n          evt.initCustomEvent(type, options.bubbles || false, options.cancelable || false, options.detail || null);\r\n        }\r\n        target.dispatchEvent(evt);\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n    function addStyles() {\r\n      if (document.getElementById('dy-recs-styles-${dyVariationId}')) return;\r\n      var userStyle = document.createElement('style');\r\n      userStyle.innerHTML += '.dy-recs-container .swiper-slide,.dy-recs-container .swiper-wrapper{height:100%;transition-property:transform;width:100%;position:relative}.dy-recs-container .swiper-slide{flex-shrink:0}.dy-recs-container .swiper-wrapper{z-index:1;display:flex;box-sizing:content-box;transform:translate3d(0,0,0)}.dy-recs-container .swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1}.dy-recs-container .swiper-pointer-events{touch-action:pan-y}.dy-recs-container .swiper-pagination{position:absolute;text-align:center;transition:opacity .3s;transform:translate3d(0,0,0);z-index:10}.dy-recs-container .swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.dy-recs-container .swiper-horizontal>.swiper-pagination-bullets,.dy-recs-container .swiper-pagination-bullets.swiper-pagination-horizontal,.dy-recs-container .swiper-pagination-custom,.dy-recs-container .swiper-pagination-fraction{bottom:10px;left:0;width:100%}.dy-recs-container .swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.dy-recs-container .swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.dy-recs-container .swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.dy-recs-container .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next,.dy-recs-container .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.dy-recs-container .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,.dy-recs-container .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.dy-recs-container .swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.dy-recs-container .swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.dy-recs-container .swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.dy-recs-container .swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:transform .2s,left .2s}.dy-recs-container .swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:50%;background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}.dy-recs-container .swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}';\r\n      userStyle.innerHTML += '.dy-heading_.stl_header {font-style: italic;} #dy-reco-widgets{background-color: #fff;--swiper-theme-color: #1b1b1b;--swiper-pagination-bullet-inactive-opacity:1;--swiper-pagination-bullet-inactive-color:#dadce1;--swiper-pagination-color:#000;width: 86%;margin: 0 auto }#dy-reco-widgets .swiper-pagination {bottom:-35px;}.dy-recs-tabs {margin-left: auto;margin-right: auto;max-width:1200px;text-align:center;margin-bottom: 60px;}.dy-bottom-widget {margin:110px auto 60px;max-width:1200px;}.dy-recs-tabs .dy-heading_ {display:none;}.dy-recs-tabs input[type=\"radio\"] {display: none;}.dy-recs-tabs input[type=\"radio\"]:checked+label {border-color: #f94f0d;}.dy-recs-tabs .dy-recs-tab-content {display: none;}.dy-recs-container {position:relative;}#dy-recs-tab-1:checked~#dy-recs-tab-content-1, #dy-recs-tab-2:checked~#dy-recs-tab-content-2 {display: block;}.dy-recs-tab-content.active {display:block;}.dy-recs-tabs label {display: inline-block;text-align: center;vertical-align: middle;user-select: none;border-bottom: 2px solid transparent;padding: 10px 40px;font-size: 20px;line-height: 1.5;transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;cursor: pointer;margin-bottom: 10px;font-family: \"21 Cent\",sans-serif;font-style: italic;}.dy-recs-tabs label:first-of-type {margin-left: 0;}#dy-reco-widgets .dy-nav-button {position: absolute;top: 38%;cursor:pointer;}#dy-reco-widgets .dy-nav-button.dy-button-next {right: -70px;}#dy-reco-widgets .dy-nav-button.dy-button-prev {left: -70px;}@media (max-width:767px) {#dy-reco-widgets .dy-nav-button, #dy-reco-widgets .swiper-pagination{display:none;}.dy-recs-tab-head {overflow:auto;white-space:nowrap;}.dy-recs-tabs label {padding:10px 15px;}#dy-reco-widgets {width:100%;margin-top: 20px;}#dy-reco-widgets .swiper {padding:0 20px;}.dy-bottom-widget {margin:40px auto;}}.dy-recs-tab-head{margin-bottom:20px;} #dy-reco-widgets [data-type=\"grid\"] ~ .dy-nav-button {display:none}';\r\n      \/\/userStyle.innerHTML += '#dy-reco-widgets .swiper-slide{max-width:180px;}';\r\n      userStyle.innerHTML += '#dy-reco-widgets .swiper-initialized:not(.dy-swiper-active) .swiper-wrapper{justify-content:center}';\r\n      userStyle.innerHTML += '#dy-reco-widgets [data-type=\"grid\"]{text-align:center;}#dy-reco-widgets [data-type=\"grid\"] .product {width:172px;background:#fff;padding:8px;text-align:center;margin-bottom:24px;padding-bottom:16px;display:none;-ms-flex-wrap: wrap;flex-wrap: wrap;height: auto;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center;margin-right: 33px;}#dy-reco-widgets [data-type=\"grid\"] .dy-visible {display: -webkit-box !important;display: -ms-flexbox !important;display: flex !important;}#dy-reco-widgets [data-type=\"grid\"] .product__image-wrapper {padding:8px;margin-bottom:0;}#dy-reco-widgets [data-type=\"grid\"] .product img {width:100%;}#dy-reco-widgets [data-type=\"grid\"] .dy-container {margin: 0 auto;-ms-flex-wrap: wrap;flex-wrap: wrap;display: -webkit-box;display: -ms-flexbox;display: flex;max-width:1200px;}.dy-show-more {display:inline-block;margin-top:24px;}#dy-reco-widgets [data-type=\"grid\"] .product__brand {height:36px;overflow:hidden;display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-align: end;-ms-flex-align: end;align-items: flex-end;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center;}#dy-reco-widgets [data-type=\"grid\"] .product:nth-child(6n) {margin-right: 0px;}@media (max-width:1200px) {#dy-reco-widgets [data-type=\"grid\"] .dy-container {padding:0 20px;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;}#dy-reco-widgets [data-type=\"grid\"] .product {margin-right:0;}}@media (max-width:1096px) {#dy-reco-widgets [data-type=\"grid\"] .dy-container {padding:0 100px;}}@media (max-width:920px) {#dy-reco-widgets [data-type=\"grid\"].dy-container {padding:0 60px;}}@media (max-width:640px) {#dy-reco-widgets [data-type=\"grid\"] .dy-container {padding:0 65px;}}@media (max-width:500px) {#dy-reco-widgets [data-type=\"grid\"] .dy-container {padding:0 20px;}}@media (max-width:420px) {#dy-reco-widgets [data-type=\"grid\"] .dy-container {padding:0px;-webkit-box-pack: justify;-ms-flex-pack: justify;justify-content: space-between;}.dy-show-more{width: calc(100vw - 32px);}.dy-show-more .button {border-radius:5px;}#dy-reco-widgets [data-type=\"grid\"] .product {width:156px;}#dy-reco-widgets [data-type=\"grid\"] .dy-container:after {content:\"\";width:156px;}}#dy-reco-widgets [data-type=\"grid\"] .dy-container[data-dy-minimal=\"true\"]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;}.dy-show-more[data-dy-minimal=\"true\"]{display:none;}#dy-reco-widgets .price_type_new{color: #f94f0d;}#dy-reco-widgets .price_type_old {text-decoration: line-through;color: #c8c8c8;}@media (max-width:1023px){#dy-reco-widgets .dy-show-more{display:none}#dy-reco-widgets [data-type=\"grid\"] .dy-container{display:flex;width:100%;overflow-x:scroll;-webkit-overflow-scrolling:touch;flex-wrap: nowrap;padding-left:0;}#dy-reco-widgets [data-type=\"grid\"] .dy-container .product{background:#fff;padding:8px;text-align:center;margin-bottom:24px;padding-bottom:16px;display:flex;flex-wrap:wrap;height:auto;justify-content:center;flex:1 0 40%;width:auto }#dy-reco-widgets [data-type=\"grid\"] .dy-container .dy-show-more{display:none }#dy-reco-widgets .swiper[data-type=\"grid\"] {padding:0;}}@media (min-width:768px) and (max-width:1023px){#dy-reco-widgets [data-type=\"grid\"] .dy-container .product{flex:1 0 40%;}}';\r\n     \r\n      document.head.appendChild(userStyle);\r\n    }\r\n  },\r\n  gridRecs: {\r\n    insert: function (customOptions) {\r\n      const opts = {\r\n        strategyId: '',\r\n        selector: '',\r\n        title: '',\r\n        layout: 'grid',\r\n        maxProducts: 24,\r\n        events: {\r\n          widgetInserted: '',\r\n          emptyWidgetConditions: '',\r\n          emptyWidgetResponse: '',\r\n        },\r\n      };\r\n      const options = { ...opts, ...customOptions };\r\n\r\n      \/\/ const myClass=${slVariationId};\r\n      let styles = `\r\n  .sl-heading,.sl-style-container{color:#1b1b1b;text-align:center}.sl-heading{margin:12px 0;font-family:Lenta,sans-serif;font-weight:400;font-size:19px;line-height:1.2;letter-spacing:1.2px;text-transform:uppercase}.sl-style-container{position:relative;flex-direction:column;max-width:100%;display:none}.sl-header,.sl-link{justify-content:center}.sl-link,.sl-product__info{background-color:transparent;text-decoration:none;color:#000;outline:0}.sl-body,.sl-header,.sl-link,.sl-visible{display:flex}.sl-header{align-items:center;margin-bottom:8px}.sl-iconContainer{position:relative;height:222px;width:148px}.sl-body{flex:1;flex-direction:column;justify-content:space-between;font-family:Geometria,sans-serif}.sl-baseTypography{font-size:12px;line-height:1.5}.sl-product__info{display:flex;flex-direction:column}.sl-link{position:absolute;top:0;align-items:center;width:100%}.sl-style-list{display:grid;grid-template-columns:repeat(2,minmax(164px,1fr));grid-gap:28px 16px}.sl-style__content{position:relative;display:flex;align-self:center;overflow:hidden;justify-content:center;align-items:center}.sl-imageSizes{height:222px;width:148px}.sl-photo{position:absolute;left:0;top:0;width:calc(100% + 2px);height:calc(100% + 2px);margin-left:-1px;margin-top:-1px;border:none;outline:0;object-fit:contain}.sl-product-brand-text,.sl-product__brand__image{height:28px;max-width:100%;max-height:100%;object-fit:contain;margin-bottom:8px}.hide,.sl-product__image-last,.sl-style__content:hover .sl-product__image-first{display:none}.sl-product-brand-text{display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;text-transform:uppercase}.sl-product-description{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-size:12px;line-height:1.5}.sl-show-more{margin:16px auto;display:flex;justify-content:center}.sl-button{width:100%}.sl-button__text{width:100%;font-size:15px;font-weight:400;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;text-align:center;color:#1b1b1b;height:50px;border-radius:10px;border:1.5px solid #f94f0d}@media (min-width:1024px){.sl-iconContainer,.sl-imageSizes{width:268px;height:388px}.sl-heading{font-size:24px}.sl-style-list{display:grid;grid-template-columns:repeat(3,minmax(220px,1fr));grid-gap:16px 0}.sl-iconContainer{position:relative}.sl-style-container{margin-top:8px;padding:0}.sl-baseTypography{font-size:15px}.sl-product-brand-text,.sl-product__brand__image{height:40px}.sl-product-description{margin:0;font-size:15px;line-height:1.5}.sl-button{width:auto}.sl-button__text{width:300px;height:50px}}.sl-style__content:hover .sl-product__image-last{display:block}\r\n    `;\r\n      styles += '[data-type=\"slider\"] .sl-style-container{display:flex;}[data-type=\"slider\"] .sl-style-list{display:flex;}#sl_recs_widget {position:relative;}#sl_recs_widget .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,#sl_recs_widget .swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}#sl_recs_widget .swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,#sl_recs_widget .swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}#sl_recs_widget .swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,#sl_recs_widget .swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:transform .2s,left .2s}#sl_recs_widget .swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:50%;background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}#sl_recs_widget .swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:#000}#sl_recs_widget .dy-button-prev { position: absolute; top: calc(50% + 18px); z-index: 2; left: 28px; } #sl_recs_widget .dy-button-next { position: absolute; top: calc(50% + 18px); z-index: 2; right: 28px; }';\r\n      styles += '#sl_recs_widget .swiper[data-type=\"grid\"] {display:grid}';\r\n      document.querySelector('head').insertAdjacentHTML('beforeend', `<style>${styles}<\/style>`);\r\n      try {\r\n        var CURRENCY_SYMBOL = getCurrency();\r\n\r\n        function getCurrency() {\r\n          if (SL.pageContext.lng && SL.pageContext.lng === 'kz') {\r\n            return '\u20b8';\r\n          } else {\r\n            return '\u20bd';\r\n          }\r\n        }\r\n\r\n        function removeElements(selector) {\r\n          var elements = document.querySelectorAll(selector);\r\n          for (var i = 0; i < elements.length; i++) {\r\n            elements[i].parentNode.removeChild(elements[i]);\r\n          }\r\n        }\r\n\r\n        function sendDYCustomEvent(name, properties) {\r\n          var props = properties ? properties : {};\r\n          SL.API('event', { name: name, properties: props });\r\n        }\r\n\r\n        function dispatchEvent(target, type, options) {\r\n          try {\r\n            options || (options = {});\r\n            var evt;\r\n            if (typeof CustomEvent === 'function') {\r\n              evt = new CustomEvent(type, options);\r\n            } else {\r\n              evt = document.createEvent('CustomEvent');\r\n              evt.initCustomEvent(type, options.bubbles || false, options.cancelable || false, options.detail || null);\r\n            }\r\n            target.dispatchEvent(evt);\r\n          } catch (e) {\r\n            console.error(e);\r\n          }\r\n        }\r\n\r\n        function isVisible(element) {\r\n          return element.offsetWidth > 0 || element.offsetHeight > 0 || element.getClientRects().length > 0;\r\n        }\r\n        function getSwiperConfig(container) {\r\n          return {\r\n            loop: true,\r\n            slidesPerView: 6,\r\n            spaceBetween: 24,\r\n            slidesPerGroup: 1,\r\n            watchOverflow: true,\r\n            threshold: 15,\r\n            breakpoints: {\r\n              320: {\r\n                slidesPerView: 2.1,\r\n                spaceBetween: 24,\r\n                slidesPerGroup: 2,\r\n                freemode: true,\r\n                threshold: 0,\r\n              },\r\n              480: {\r\n                slidesPerView: 3,\r\n                slidesPerGroup: 3,\r\n                threshold: 0,\r\n              },\r\n              768: {\r\n                slidesPerView: 4,\r\n                slidesPerGroup: 4,\r\n                threshold: 5,\r\n              },\r\n              1024: {\r\n                slidesPerView: 5,\r\n                freemode: false,\r\n                slidesPerGroup: 5,\r\n                threshold: 12,\r\n              },\r\n            },\r\n            pagination: {\r\n              el: container.querySelector('.swiper-pagination'),\r\n              dynamicBullets: true,\r\n            },\r\n\r\n            navigation: {\r\n              nextEl: container.querySelector('.dy-button-next'),\r\n              prevEl: container.querySelector('.dy-button-prev'),\r\n            },\r\n          };\r\n        }\r\n        function initSlider(container) {\r\n          var config = getSwiperConfig(container);\r\n          var slidesCount = container.querySelectorAll('.swiper-slide').length;\r\n\r\n          if ((slidesCount < 6 && window.innerWidth > 1023) || (slidesCount < 5 && window.innerWidth < 1024 && window.innerWidth > 767) || (slidesCount < 4 && window.innerWidth < 768 && window.innerWidth > 480) || (slidesCount < 3 && window.innerWidth < 480)) {\r\n            config.loop = false;\r\n          }\r\n\r\n          if (window.innerWidth > 1023) {\r\n            var swiper = new Swiper(container.querySelector('.swiper'), config);\r\n\r\n            swiper.on('resize', function (instance) {\r\n              container.querySelector('.swiper').classList.toggle('dy-swiper-active', instance.virtualSize > instance.size);\r\n            });\r\n          } else {\r\n            container.querySelector('.swiper').setAttribute('data-type', 'grid');\r\n          }\r\n        }\r\n        function initDYTracking(container) {\r\n          const campaignObj = options.campaignObj;\r\n          if (campaignObj && campaignObj.var && Array.isArray(campaignObj.var)) {\r\n            campaignObj.var = campaignObj.var[0];\r\n          }\r\n          container.querySelector('[data-sl-widget-id]').addEventListener('gf_wrimp', e => {\r\n            window.slAnalytics.show(options.analytics, e.detail.slots.map(s => { \r\n              return {\r\n                brand: null,\r\n                category: null,\r\n                categoryId: null,\r\n                id: s.sku,\r\n                name: null,\r\n                position: null,\r\n                price: null,\r\n              }\r\n            }));\r\n\r\n          })\r\n          SL.Recommendations.track(container.querySelector('[data-sl-widget-id]'), campaignObj);\r\n\r\n          if (options.analytics) {\r\n            container.querySelector('[data-sl-widget-id]').addEventListener('click', (e) => {\r\n              const product = e.target.closest('[data-sl-product-id]');\r\n              if (product) {\r\n                window.slAnalytics.click(options.analytics, false, {\r\n                  brand: product.dataset.brand || null,\r\n                  category: product.dataset.category || null,\r\n                  categoryId: product.dataset.custom_category_id || null,\r\n                  id: product.dataset.id || null,\r\n                  name: product.dataset.name || null,\r\n                  position: product.dataset.position || null,\r\n                  price: product.dataset.price || null,\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n\r\n        var insertItemList = function (data, selector, replaceOption) {\r\n          SL.waitForElement(selector, function (arr) {\r\n            var elementToReplace = arr[0];\r\n\r\n            var container;\r\n            if (replaceOption === 1) {\r\n              container = document.createElement('div');\r\n              elementToReplace.parentNode.insertBefore(container, elementToReplace.nextSibling);\r\n            } else if (replaceOption === 2) {\r\n              container = document.createElement('div');\r\n              elementToReplace.parentNode.insertBefore(container, elementToReplace);\r\n            } else {\r\n              container = elementToReplace;\r\n            }\r\n\r\n            if (!container.id) container.id = 'sl_recs_widget';\r\n\r\n            container.innerHTML = data.html;\r\n\r\n            if (options.layout !== 'slider') {\r\n              var list = document.querySelectorAll('#sl-recs_myClass .sl-style-container');\r\n              var listArray = [].slice.call(list);\r\n\r\n              var button = document.querySelector('#sl-show-more');\r\n              var numInList = list.length;\r\n\r\n              if (numInList > getNumShow()) {\r\n                button.style.display = 'inline-flex';\r\n              }\r\n              listArray.slice(0, getNumShow()).forEach((p) => p.classList.add('sl-visible'));\r\n\r\n              button.addEventListener('click', function () {\r\n                var showing = listArray.filter(isVisible).length;\r\n\r\n                listArray.slice(showing - 1, showing + getNumShow()).forEach((p) => p.classList.add('sl-visible'));\r\n\r\n                var nowShowing = listArray.filter(isVisible).length;\r\n                if (nowShowing >= numInList) {\r\n                  button.style.display = 'none';\r\n                }\r\n              });\r\n            } else {\r\n              SL.waitForVariable('window.Swiper').then(() => {\r\n                initSlider(container);\r\n              })\r\n              \r\n            }\r\n\r\n            if (data.html && data.data) {\r\n              dispatchEvent(container, 'sl-widget-rendered', {\r\n                bubbles: true,\r\n                detail: data.data,\r\n              });\r\n\r\n              initDYTracking(container);\r\n            }\r\n          });\r\n        };\r\n\r\n        var getNumShow = function () {\r\n          var numToShow = 6;\r\n          if (window.innerWidth > 1023) {\r\n            numToShow = 6;\r\n          } else if (window.innerWidth > 809) {\r\n            numToShow = 4;\r\n          } else if (window.innerWidth > 615) {\r\n            numToShow = 4;\r\n          } else if (window.innerWidth > 374) {\r\n            numToShow = 4;\r\n          } else {\r\n            numToShow = 4;\r\n          }\r\n\r\n          return numToShow;\r\n        };\r\n\r\n        var showRecs = function (strategy) {\r\n\r\n          const rules = options.rules || [];\r\n          \r\n          return new Promise((resolve, reject) => {\r\n            SL.Recommendations.get(strategy, { maxProducts: options.maxProducts, realtimeRules: rules }, function (err, data) {\r\n              var layout = '';\r\n              var eventProps = {};\r\n              if (data)\r\n                eventProps = {\r\n                  strategyId: data.wId,\r\n                  strategyName: data.name,\r\n                  fallback: data.fallback,\r\n                };\r\n\r\n              if (data && data.slots && data.slots.length) {\r\n                var updatedData = data;\r\n\r\n                if (updatedData.slots.length >= 4) {\r\n                  layout = generateRecsLayout(updatedData);\r\n\r\n                  if (options.events.widgetInserted.length) sendDYCustomEvent(options.events.widgetInserted, eventProps);\r\n                } else {\r\n                  if (options.events.emptyWidgetConditions.length) sendDYCustomEvent(options.events.emptyWidgetConditions, eventProps);\r\n                }\r\n              } else if (data) {\r\n                if (options.events.emptyWidgetResponse.length) sendDYCustomEvent(options.events.emptyWidgetResponse, eventProps);\r\n              }\r\n\r\n              resolve({ html: layout, data: data });\r\n            });\r\n          });\r\n        };\r\n\r\n        var generateRecsLayout = function (data) {\r\n          var products = data.slots.map(function (i) {\r\n            i.item.strId = i.strId;\r\n            i.item.fallback = i.fallback;\r\n            return i.item;\r\n          });\r\n          var html = '';\r\n          var isMinimal = products.length <= 6 ? true : false;\r\n          var isGrid = options.layout === 'grid' ? true : false;\r\n\r\n          html += '<div id=\"sl-recs_myClass\" data-sl-lng=\"' + SL.pageContext.lng + '\">';\r\n          html += ' <h3 class=\"sl-heading stl_header\">' + options.title + '<\/h3>';\r\n          html += '<div class=\"swiper\" data-type=\"' + options.layout + '\">';\r\n          html += '  <div class=\"sl-style-list sl-container swiper-wrapper\"  data-sl-widget-id=\"' + data.wId + '\" data-sl-feed-id=\"' + data.fId + '\" data-sl-minimal=\"' + isMinimal + '\" data-sl-title=\"\u0412\u0430\u043c \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\">';\r\n          for (let i = 0; i < products.length; i++) {\r\n            let brandTextClass = products[i].brand_logo_url === '' ? 'sl-product-brand-text' : 'hide';\r\n            let brandLogoClass = products[i].brand_logo_url === '' ? 'hide' : 'sl-product__brand__image';\r\n\r\n            html += '<div class=\"sl-style-container swiper-slide\" data-price=\"' + products[i].price + '\" data-id=\"' + products[i].sku + '\" data-category=\"' + products[i].categories[products[i].categories.length - 1] + '\" data-custom_category_id=\"' + products[i].custom_category_id + '\" data-position=\"' + (i + 1) + '\" data-brand=\"' + products[i].brand + '\" data-name=\"' + products[i].name + '\" data-sl-product-slot=\"' + i + '\" data-sl-product-fallback=\"' + products[i].fallback + '\" data-sl-strategy-id=\"' + products[i].strId + '\" data-sl-product-id=\"' + products[i].sku + '\">' + '<div class=\"sl-header\">' + '<div class=\"sl-iconContainer sl-imageSizes\">' + '<\/div>' + '<a class=\"sl-link dy-click-link product_type_catalog-wrapper sl-product__image-wrapper-gallery\" href=\"' + products[i].url + '\">' + '<div class=\"sl-style__content sl-imageSizes\">' + '<img class=\"sl-photo sl-product__image sl-product__image-first\" role=\"presentation\" alt=\"' + products[i].name + ' | \u0424\u043e\u0442\u043e \u21161\" title=\"' + products[i].name + ' | \u0424\u043e\u0442\u043e \u21161\" src=\"' + products[i].image_url + '\" \/>' + '<img class=\"sl-photo sl-product__image sl-product__image-last\" role=\"presentation\" alt=\"' + products[i].name + ' | \u0424\u043e\u0442\u043e \u21162\" title=\"' + products[i].name + ' | \u0424\u043e\u0442\u043e \u21162\" src=\"' + products[i].image_url2 + '\" \/>' + '<\/div>' + '<\/a>' + '<\/div>' + '<div class=\"sl-body\">' + '<a class=\"sl-product__info\" href=\"' + products[i].url + '\">' + '<img class=\"' + brandLogoClass + '\" src=\"' + products[i].brand_logo_url + '\" alt=\"' + products[i].brand + '\" \/>' + '<p class=\"' + brandTextClass + '\">' + products[i].brand + '<\/p>' + '<p class=\"sl-product-description\">' + products[i].name + '<\/p>' + '<\/a>' + '<div class=\"sl-baseTypography\">' + '<span class=\"product__price-wrapper\">' + (products[i].in_sale === 't' ? '<span class=\"product__price\"><span class=\"price price_type_old\"><span>' + parseInt(products[i].old_price).toLocaleString('ru-RU') + ' \u20bd<\/span><\/span><\/span>' : '') + '<span class=\"product__price\">' + '<span class=\"price ' + (products[i].in_sale === 't' ? 'price_type_new' : '') + '\"><span>' + parseInt(products[i].price).toLocaleString('ru-RU') + ' \u20bd<\/span><\/span>' + '<\/span>' + '<\/span>' + '<\/div>' + '<\/div>' + '<\/div>';\r\n          }\r\n\r\n          html += '  <\/div>';\r\n          if (isGrid) {\r\n            html += '<div class=\"sl-show-more\" data-sl-minimal=\"' + isMinimal + '\"> <a class=\"sl-button button_style_transparent\" id=\"sl-show-more\"> <button class=\"sl-button__text\">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432<\/button> <\/a> <\/div>';\r\n          }\r\n          html += '  <\/div>';\r\n\r\n          if (!isGrid) {\r\n            html += '<div class=\"swiper-pagination\"><\/div><div class=\"dy-nav-button dy-button-prev\"><svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\"> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.243 9.11507L13.879 15.479L20.243 21.843C20.6335 22.2335 20.6335 22.8667 20.243 23.2572C19.8525 23.6477 19.2193 23.6477 18.8288 23.2572L11.7577 16.1861C11.3672 15.7956 11.3672 15.1624 11.7577 14.7719L18.8288 7.70085C19.2193 7.31033 19.8525 7.31033 20.243 7.70085C20.6335 8.09138 20.6335 8.72454 20.243 9.11507Z\" fill=\"#1B1B1B\"\/> <\/svg><\/div> <div class=\"dy-nav-button dy-button-next\"><svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http:\/\/www.w3.org\/2000\/svg\"> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.7578 21.8429L18.1218 15.479L11.7578 9.11502C11.3673 8.72449 11.3673 8.09133 11.7578 7.7008C12.1483 7.31028 12.7815 7.31028 13.172 7.7008L20.2431 14.7719C20.6336 15.1624 20.6336 15.7956 20.2431 16.1861L13.172 23.2572C12.7815 23.6477 12.1483 23.6477 11.7578 23.2572C11.3673 22.8666 11.3673 22.2335 11.7578 21.8429Z\" fill=\"#1B1B1B\"\/> <\/svg><\/div>';\r\n          }\r\n\r\n          html += '<\/div>';\r\n\r\n          return html;\r\n        };\r\n\r\n        var buildRecs = function () {\r\n          showRecs(options.strategyId).then(function (data) {\r\n            removeElements('#sl_recs_widget');\r\n            if (data) insertItemList(data, options.selector, parseInt(1));\r\n          });\r\n        };\r\n\r\n        if (!window.slSpaLoaded) {\r\n          document.addEventListener('sl-ready', function () {\r\n            window.slSpaLoaded = true;\r\n            buildRecs();\r\n          });\r\n        } else {\r\n          buildRecs();\r\n        }\r\n      } catch (e) {}\r\n    },\r\n  },\r\n};\r\n\r\nwindow.dataLayer = window.dataLayer || [];\r\n\r\nwindow.slAnalytics = {\r\n  show: function (options, slots) {\r\n    let context = 'tll:';\r\n    if (options.strategyName) {\r\n      context += options.strategyName + ':' + options.strategyId + ':';\r\n    }\r\n    context += options.campaignId + ':' + options.campaignName + ':' + options.experienceName + ':' + options.variationName;\r\n\r\n    dataLayer.push({\r\n      event: 'SL Event Lag',\r\n      eventCategory: 'Non-Interactions',\r\n      eventAction: options.campaignName,\r\n      eventLabel: options.experienceName + ' (' + options.variationName + ')',\r\n      eventLocation: SL.pageContext.type,\r\n      eventContent: context,\r\n    });\r\n\r\n    if (slots) {\r\n      dataLayer.push({\r\n          event: 'SL Event', \r\n          eventCategory: 'Real impression', \r\n          eventAction: options.campaignName, \r\n          eventLabel: options.experienceName + ' (' + options.variationName + ')',\r\n          eventContent: context,\r\n          eventLocation: SL.pageContext.type,\r\n          ecommerce: { 'impressions': slots } \r\n      });\r\n    }\r\n  },\r\n  \r\n  click: function (options, type, product) {\r\n    let context = 'tll:';\r\n    if (options.strategyName) {\r\n      context += options.strategyName + ':' + options.strategyId + ':';\r\n    }\r\n    context += options.campaignId + ':' + options.campaignName + ':' + options.experienceName + ':' + options.variationName;\r\n    let ecommerce;\r\n    if (product) {\r\n      ecommerce = {\r\n        click: {\r\n          actionField: {\r\n            list: context,\r\n          },\r\n          products: [\r\n            {\r\n              brand: product.brand || null,\r\n              category: product.category || null,\r\n              categoryId: product.categoryId || null,\r\n              id: product.id || null,\r\n              list: context,\r\n              name: product.name || null,\r\n              position: product.position || null,\r\n              price: product.price || null,\r\n            },\r\n          ],\r\n        },\r\n      };\r\n      dataLayer.push({\r\n        event: 'SL Event Lag',\r\n        eventCategory: 'Interactions',\r\n        eventAction: 'click',\r\n        eventLabel: 'productClick',\r\n        eventCategoryName: product.category || null,\r\n        eventLocation: SL.pageContext.type,\r\n        ecommerce: ecommerce,\r\n      });\r\n    } else {\r\n      ecommerce = {\r\n        promoClick: {\r\n          promotions: [\r\n            {\r\n              creative: type,\r\n              id: options.campaignId,\r\n              name: options.experienceName,\r\n              position: 1,\r\n            },\r\n          ],\r\n        },\r\n      };\r\n      dataLayer.push({\r\n        event: 'SL Event Lag',\r\n        eventCategory: 'Interactions',\r\n        eventAction: 'click', \/\/ \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438\r\n        eventLabel: 'banner',\r\n        eventLocation: SL.pageContext.type,\r\n        ecommerce: ecommerce,\r\n      });\r\n    }\r\n  },\r\n};","weight":100,"variables":[],"id":"64b94dd74c26bb6403032535"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"643fc1a7a4d04f190903fb06":{"name":"Empty search page","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"643fc1b936faf16507014b17","name":"aff men","version":"65ccd9a600f32b644b04c208","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b169f23ac255ab97062bfc","key":"selectedGender","method":"equal","value":"men"}]},{"type":"Evaluator","conds":[{"id":"64b169f23ac255ab97062bfd","key":"643ff18a68a393b6d90ea6ad","method":"equal","value":"true"}]},{"type":"URL","conds":[{"id":"64b169f23ac255ab97062bfe","value":"search\/","method":"contains","ignoreURLParams":1}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511f8568a393b6d90ea7a0'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates.gridRecs').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector:'div[data-meta-name=\"nothing_found\"]',\r\n    strategyId: \"64511f8568a393b6d90ea7a0\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511f8568a393b6d90ea7a0'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"643fc1f086043ea3d008ec39"}],"timeframe":false,"targetingWhen":false},{"id":"645123e56d7949a1ce034d2e","name":"aff women","version":"65ccd9a600f32b644b04c20d","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b169f23ac255ab97062c01","key":"selectedGender","method":"equal","value":"women"}]},{"type":"Evaluator","conds":[{"id":"64b169f23ac255ab97062c02","key":"643ff18a68a393b6d90ea6ad","method":"equal","value":"true"}]},{"type":"URL","conds":[{"id":"64b169f23ac255ab97062c03","value":"search\/","method":"contains","ignoreURLParams":1}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511f9536faf16507014c22'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates.gridRecs').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector:'div[data-meta-name=\"nothing_found\"]',\r\n    strategyId: \"64511f9536faf16507014c22\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511f9536faf16507014c22'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"645123e56d7949a1ce034d2f"}],"timeframe":false,"targetingWhen":false},{"id":"645123e56d7949a1ce034d36","name":"aff kids","version":"65ccd9a700f32b644b04c212","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b169f23ac255ab97062c06","key":"selectedGender","method":"equal","value":"kids"}]},{"type":"Evaluator","conds":[{"id":"64b169f23ac255ab97062c07","key":"643ff18a68a393b6d90ea6ad","method":"equal","value":"true"}]},{"type":"URL","conds":[{"id":"64b169f23ac255ab97062c08","value":"search\/","method":"contains","ignoreURLParams":1}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511f71a143b8c4bb053c36'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates.gridRecs').then(() => {\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector:'div[data-meta-name=\"nothing_found\"]',\r\n    strategyId: \"64511f71a143b8c4bb053c36\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511f71a143b8c4bb053c36'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"645123e56d7949a1ce034d37"}],"timeframe":false,"targetingWhen":false},{"id":"64b143d5267795a8d3091adc","name":"Remove","version":"64b143d5267795a8d3091ae1","status":1,"target":[{"type":"URL","conds":[{"id":"64b169f23ac255ab97062c0b","value":"\/catalog\/search\/?q=","method":"contains","ignoreURLParams":0}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"const w = document.querySelector('#sl_recs_widget');\r\nif (w) {\r\n   w.remove();\r\n}","weight":100,"variables":[],"id":"64b143d5267795a8d3091adf"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"643fcd0c36faf16507014b1a":{"name":"Empty cart page","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"653942c7972e50558c049dfe","name":"qa","version":"653942c8972e50558c049e08","status":1,"target":[{"type":"Cookie","conds":[{"id":"653942c7972e50558c049dff","key":"selectedGender","method":"equal","value":"men"}]},{"type":"Evaluator","conds":[{"id":"653942c7972e50558c049e01","key":"643feded60f2147a3e0a552d","method":"equal","value":"true"}]},{"type":"URL","conds":[{"id":"653942c7972e50558c049e03","value":"?gf_qa","method":"contains","ignoreURLParams":0}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-page-type=\"cart\"] [data-test-id=\"emptyCartFavouritesWrapper\"] {margin-bottom:48px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '6537d41a731504cca80fe259'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\nconst element = document.querySelector('div[data-test-id=\"emptyCartNotice\"]').parentNode;\r\nconst className = element.getAttribute('class');\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: `.${className}`,\r\n    strategyId: \"6537d41a731504cca80fe259\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '6537d41a731504cca80fe259'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"653942c8972e50558c049e06"}],"timeframe":false,"targetingWhen":false},{"id":"643fcd25a4d04f190903fb0a","name":"aff men","version":"6532a089f7672043490d892a","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16a1b5c1afe216b0a0ed4","key":"selectedGender","method":"equal","value":"men"}]},{"type":"Evaluator","conds":[{"id":"64b16a1b5c1afe216b0a0ed5","key":"643feded60f2147a3e0a552d","method":"equal","value":"true"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-page-type=\"cart\"] [data-test-id=\"emptyCartFavouritesWrapper\"] {margin-bottom:48px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511f49404f91f26103f548'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\nconst element = document.querySelector('div[data-test-id=\"emptyCartNotice\"]').parentNode;\r\nconst className = element.getAttribute('class');\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: `.${className}`,\r\n    strategyId: \"64511f49404f91f26103f548\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511f49404f91f26103f548'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"643fd183a143b8c4bb053abd"}],"timeframe":false,"targetingWhen":false},{"id":"6451211a404f91f26103f554","name":"aff women","version":"6532a5cc410ad5dbb501128b","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16a1b5c1afe216b0a0ed8","key":"selectedGender","method":"equal","value":"women"}]},{"type":"Evaluator","conds":[{"id":"64b16a1b5c1afe216b0a0ed9","key":"643feded60f2147a3e0a552d","method":"equal","value":"true"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-page-type=\"cart\"] [data-test-id=\"emptyCartFavouritesWrapper\"] {margin-bottom:48px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511effc8d0e2d6e40e79ef'\r\n})\r\n\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\nconst element = document.querySelector('div[data-test-id=\"emptyCartNotice\"]').parentNode;\r\nconst className = element.getAttribute('class');\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: `.${className}`,\r\n    strategyId: \"64511effc8d0e2d6e40e79ef\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511effc8d0e2d6e40e79ef'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"6451211a404f91f26103f555"}],"timeframe":false,"targetingWhen":false},{"id":"6451211a404f91f26103f55c","name":"aff kids","version":"6532a5cc410ad5dbb501128e","status":1,"target":[{"type":"Cookie","conds":[{"id":"64b16a1b5c1afe216b0a0edc","key":"selectedGender","method":"equal","value":"kids"}]},{"type":"Evaluator","conds":[{"id":"64b16a1b5c1afe216b0a0edd","key":"643feded60f2147a3e0a552d","method":"equal","value":"true"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-page-type=\"cart\"] [data-test-id=\"emptyCartFavouritesWrapper\"] {margin-bottom:48px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '64511f115ad90a40be00378e'\r\n})\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\nconst element = document.querySelector('div[data-test-id=\"emptyCartNotice\"]').parentNode;\r\nconst className = element.getAttribute('class');\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0412\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f\",\r\n    selector: `.${className}`,\r\n    strategyId: \"64511f115ad90a40be00378e\",\r\n    campaignObj: ${slClickObj},\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: '64511f115ad90a40be00378e'\r\n    }\r\n  });\r\n});","weight":100,"variables":[],"id":"6451211a404f91f26103f55d"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"646f1016a143b8c4bb054628":{"name":"Catalog - price filter","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"64c8f8e55bdadc85d5047d1e","name":"v3","version":"64c8fc0ab7df0e34c60c44eb","status":1,"target":[{"type":"URL","conds":[{"id":"64c8f8e55bdadc85d5047d18","value":"max_price=","method":"contains","ignoreURLParams":0}]},{"type":"PageType","conds":[{"id":"64c8f8e55bdadc85d5047d1b","value":"CATEGORY","method":"equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":"[data-meta-name=\"catalog\"] .product-list__item {text-align:center;}\r\n[data-meta-name=\"catalog\"] .product__image-wrapper{position: relative;\r\n    margin-bottom: 20px;\r\n    display: block;\r\n    overflow: hidden;    height: 222px;\r\n    width: 148px;    margin: 0 auto;}\r\n[data-meta-name=\"catalog\"] .product__brand__image {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    -o-object-fit: contain;\r\n    object-fit: contain;\r\nheight:28px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__brand {display:none}\r\n[data-meta-name=\"catalog\"] .product__description {\r\n    font-size: 12px;\r\n    line-height: 18px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\nmargin: 4px 0px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__price {font-size: 12px;  line-height: 18px;}\r\nlist-items [dy-catalog-custom]  .product__brand__image {display:none}\r\n[data-meta-name=\"catalog\"] .product__data {margin-top:10px;}\r\n@media (min-width: 1024px) {\r\n[data-meta-name=\"catalog\"] .product__image-wrapper{\r\n    height: 388px;\r\n    width: 252px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__brand__image {\r\n    height: 40px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__description {\r\nmargin: 8px 0 0;\r\nfont-size: 15px;\r\n    line-height: 23px;\r\n}\r\n[data-meta-name=\"catalog\"] .product__price {font-size: 15px;  line-height: 23px;}\r\n}\r\n[data-meta-name=\"catalog\"] .product__image {\r\n    min-width: 1px;\r\n    max-width: 100%;\r\n    vertical-align: bottom;\r\n}\r\n[data-meta-name=\"catalog\"] .product__image-wrapper .product__image-last {\r\n    position: absolute;\r\n    top: 0;\r\n    left: -10000px;\r\n}\r\n\r\n[data-meta-name=\"catalog\"] .product__image-wrapper-gallery:hover .product__image-first:not(.product__image-no-last) {\r\n    position: absolute;\r\n    top: 0;\r\n    left: -10000px;\r\n}\r\n.product__image-wrapper-gallery:hover .product__image-last {\r\n    display: inline-block;\r\n    position: static;\r\n}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: '646f03e186043ea3d008f3e5'\r\n})\r\n\r\n\r\n\r\nlet filtersArray = [];\r\nlet filtersCleared = false;\r\nlet landingPath = window.location.pathname;\r\nlet url = location.href;\r\nlet enabled = true;\r\n\r\nSL.Utils.on('click', '[data-test-id=\"resetButton\"]', () => {\r\n  if (enabled && window.location.pathname == landingPath) {\r\n    getActiveFilters(true);\r\n  }\r\n})\r\n\r\nfunction getUrlParams(){\r\n  const vars = {};\r\n  const parts = window.location.href.replace(\/[?&]+([^=&]+)=([^&]*)\/gi, function (m, key, value) {\r\n    vars[key] = value.split(',');\r\n  });\r\n  return vars;\r\n}\r\n\r\ndocument.body.addEventListener('click', ()=>{\r\n  \r\n      requestAnimationFrame(()=>{\r\n     \r\n        url = location.href;\r\n        if (url.includes('page=')) {\r\n          removeRecs();\r\n          return;\r\n        }\r\n        if (window.location.pathname !== landingPath) {\r\n          enabled = false;\r\n          return;\r\n        } else if (!enabled && window.location.pathname == landingPath){\r\n          enabled = true;\r\n          getActiveFilters(true);\r\n          return;\r\n        }\r\n\r\n        if (enabled && window.location.search === \"\" && window.location.pathname === landingPath) {\r\n          debugger;\r\n          if (!filtersCleared) {\r\n             getActiveFilters(true);\r\n          }\r\n         \r\n        }\r\n      });\r\n}, true);\r\n\r\n\r\nconst debouncedGetFilters = debounce(function() {\r\n  getActiveFilters();\r\n}, 100);\r\n\r\nif (!window.slPriceEventSub) {\r\n  SL.PubSub.on('sl-event', function (data) {\r\n    if (!enabled) return;\r\n\r\n    if (data.eventName === \"Filter Items Joined\") {\r\n      filtersCleared = false;\r\n     \/\/ const filter = data.properties.filterType;\r\n     \/\/ const value = data.properties.filterStringValue.split(',');\r\n     \/\/ filtersArray.push({ filter: filter, value: value })\r\n      debouncedGetFilters()\r\n    }\r\n  })\r\n}\r\n\r\nfunction debounce(func, wait) {\r\n  let timeout;\r\n  return function executedFunction(...args) {\r\n    const later = () => {\r\n      timeout = null;\r\n      func(...args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n}\r\n  \r\n\r\n\r\n\r\nfunction getActiveFilters(isFilterCleared){\r\n\r\n \/\/ let copy = [...filtersArray];\r\n  let copy = isFilterCleared ? [] : [...window.FILTER_DATA]\r\n  removeRecs();\r\n  \r\n  if (isFilterCleared) {\r\n    filtersCleared = true;\r\n  }\r\n\r\n  if (copy.filter(f => !['brand', 'color', 'size', 'section'].includes(f.type)).length > 0) {\r\n    \/\/ filtersArray = [];\r\n     return;\r\n  } \r\n  \r\n  \r\n  init(copy, isFilterCleared);\r\n  \/\/filtersArray = [];\r\n}\r\nSL.waitForVariable('window.FILTER_DATA').then(() => {\r\n  init(window.FILTER_DATA.filter(f => ['brand', 'color', 'size', 'section'].includes(f.type))) \r\n})\r\n\r\n\r\nfunction removeRecs() {\r\n  document.querySelectorAll('[dy-catalog-custom]').forEach(el => el.remove());\r\n}\r\n\r\nfunction init(activeFilters, isFilterCleared) {\r\n\r\n  if (!document.getElementById('dy-recs-styles-sl-preview-vid')) {\r\n    var userStyle = document.createElement('style');\r\n    userStyle.id = 'dy-recs-styles-sl-preview-vid';\r\n    userStyle.innerHTML = '[dy-catalog-custom] .price_type_new{color: #f94f0d;}[dy-catalog-custom] .price_type_old { text-decoration: line-through; color: #c8c8c8; }';\r\n\r\n    document.head.appendChild(userStyle);\r\n  }\r\n\r\n  var insertItemList = function (data, selector, replaceOption) {\r\n    SL.waitForElement(selector, function (elements) {\r\n      elements[0].parentNode.insertAdjacentHTML('beforeBegin', data.html);\r\n\r\n      const parent = elements[0].parentNode.parentNode;\r\n      parent.dataset.slWidgetFallback = data.data.fallback;\r\n      parent.dataset.slWidgetId = data.data.wId;\r\n      parent.dataset.slFeedId = data.data.fId;\r\n\r\n      SL.Recommendations.track(parent, {\r\n        var: '${slVariationId}',\r\n        ver: '${slVersionId}',\r\n        exp: '${slExperienceId}',\r\n        cam: '${slTagId}',\r\n      });\r\n\r\n      SL.PubSub.once('spa', function (data) {\r\n        var insertedProducts = document.querySelectorAll('[dy-catalog-custom]');\r\n        for (var i = 0; i < insertedProducts.length; i++) {\r\n          insertedProducts[i].remove();\r\n        }\r\n      });\r\n\r\n      var insertedProducts = document.querySelectorAll('[dy-catalog-custom]');\r\n      for (var i = 0; i < insertedProducts.length; i++) {\r\n        insertedProducts[i].addEventListener('click', function (e) {\r\n          SL.API('event', {\r\n            name: 'PLP - price product click',\r\n            properties: {\r\n              sku: e.currentTarget.getAttribute('data-product-id'),\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n\r\n    });\r\n  };\r\n\r\n  var hideExistingProducts = function (products) {\r\n    var urls = products.map(function (p) {\r\n      return p.url.replace('https:\/\/www.tsum.ru', '');\r\n    });\r\n    for (var i = 0; i < urls.length; i++) {\r\n      var eProduct = document.querySelector('[href=\"' + urls[i] + '\"]');\r\n      if (eProduct) {\r\n        eProduct.closest('.product-list__item, [data-meta-name=\"product\"]').parentNode.style.display = 'none';\r\n      }\r\n    }\r\n  };\r\n\r\n  var getRules = function (priceLimit, activeFilters, isFilterCleared) {\r\n    const rules = [];\r\n    rules.push({\r\n              id: 1,\r\n              type: 'include',\r\n              slots: [],\r\n              query: {\r\n                conditions: [\r\n                  {\r\n                    field: 'price',\r\n                    arguments: [\r\n                      {\r\n                        action: 'less_or_equal',\r\n                        value: [priceLimit],\r\n                      },\r\n                    ],\r\n                  },\r\n                ],\r\n              },\r\n   });\r\n\r\n   if (isFilterCleared) {\r\n     return rules;\r\n   }\r\n\r\n   const urlParams = getUrlParams();\r\n   if (urlParams[\"brand\"]) {\r\n     activeFilters.push({ type:\"brand_id\", value: urlParams[\"brand\"] })\r\n   }\r\n   if (urlParams[\"section\"]) {\r\n     activeFilters.push({ type:\"custom_category_id\", value: urlParams[\"section\"] })\r\n   }\r\n   const updatedFilters = activeFilters.filter(f => !['brand', 'section'].includes(f['type']))\r\n   if (updatedFilters) {\r\n     updatedFilters.forEach((f, index) => {\r\n       rules.push({\r\n              id: (2+index),\r\n              type: 'include',\r\n              slots: [],\r\n              query: {\r\n                conditions: [\r\n                  {\r\n                    field: f.type,\r\n                    arguments: f.value.map(v => {\r\n                      return {\r\n                        action:\"equal\",\r\n                        value: [v.replace('\u0451','\u0435')]\r\n                      }\r\n                    })\r\n                    \r\n                  },\r\n                ],\r\n              },\r\n        });\r\n     })\r\n   } \r\n\r\n   \r\n   \r\n\r\n\r\n   return rules;\r\n  }\r\n\r\n  var showProducts = function (priceLimit, activeFilters, isFilterCleared) {\r\n    return new Promise((resolve, reject) => {\r\n      SL.Recommendations.get(\r\n        '646f03e186043ea3d008f3e5',\r\n        {\r\n          maxProducts: 60,\r\n          realtimeRules: getRules(priceLimit, activeFilters, isFilterCleared),\r\n        },\r\n        function (err, data) {\r\n          let layout = '';\r\n          if (data.slots && data.slots.length) {\r\n            const products = data.slots.map((el, i) => {\r\n              el.item.strId = el.strId;\r\n              el.item.fallback = el.fallback;\r\n              el.item.slot = i;\r\n              return el.item;\r\n            });\r\n            hideExistingProducts(products);\r\n            layout = generateRecsLayout(products);\r\n          }\r\n          resolve({ html: layout, data: data });\r\n        },\r\n      );\r\n    });\r\n  };\r\n\r\n  var generateRecsLayout = function (products) {\r\n    var html = '';\r\n\r\n    for (var i = 0; i < products.length; i++) {\r\n      html +=\r\n        '<div  data-sl-product-fallback=\"' +\r\n        products[i].fallback +\r\n        '\" data-sl-product-id=\"' +\r\n        products[i].sku +\r\n        '\" data-sl-strategy-id=\"' +\r\n        products[i].strId +\r\n        '\" data-sl-product-slot=\"' +\r\n        products[i].slot +\r\n        '\" class=\"product-list__item\" dy-catalog-custom data-product-id=\"' +\r\n        products[i].sku +\r\n        '\">' +\r\n        '    <div list-item=\"\"> ' +\r\n        '       <div class=\"product product_type_catalog\">' +\r\n        '        <a class=\"product__image-wrapper product__image-wrapper-gallery\" href=\"' +\r\n        products[i].url +\r\n        '\">' +\r\n        '            <img class=\"product__image product__image-first\" role=\"presentation\" alt=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21161\" title=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21161\" src=\"' +\r\n        products[i].image_url +\r\n        '\">' +\r\n        '            <img class=\"product__image product__image-last\" role=\"presentation\" alt=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21162\" title=\"' +\r\n        products[i].name +\r\n        ' | \u0424\u043e\u0442\u043e \u21162\" src=\"' +\r\n        products[i].image_url2 +\r\n        '\"><\/a>' +\r\n        '        <div class=\"product__data\">' +\r\n        '            <a class=\"product__info\" href=\"' +\r\n        products[i].url +\r\n        '\">' +\r\n        '                <p class=\"product__brand\">' +\r\n        products[i].brand +\r\n        '<\/p>' +\r\n        '             <img class=\"product__brand__image\" src=\"' +\r\n        products[i].brand_logo_url +\r\n        '\" alt=\"' +\r\n        products[i].brand +\r\n        '\" >' +\r\n        '                <p class=\"product__description\">' +\r\n        products[i].name +\r\n        '<\/p>' +\r\n        '                <span class=\"product__price-wrapper\">' +\r\n        (products[i].in_sale === 't' ? '<span class=\"product__price\"><span class=\"price price_type_old\"><span>' + parseInt(products[i].old_price).toLocaleString('ru-RU') + ' \u20bd<\/span><\/span><\/span>' : '') +\r\n        '                 <span class=\"product__price\">' +\r\n        '                    <span class=\"price ' +\r\n        (products[i].in_sale === 't' ? 'price_type_new' : '') +\r\n        '\"><span>' +\r\n        parseInt(products[i].price).toLocaleString('ru-RU') +\r\n        ' \u20bd<\/span><\/span>' +\r\n        '                <\/span>' +\r\n        '                <\/span>' +\r\n        '            <\/a>' +\r\n        \/\/ '<span class=\"product__label\"><span class=\"product__label\"><span class=\"label\" style=\"height: auto\">' + products[i].labels + '<\/span><\/span><\/span>' +\r\n        '        <\/div>' +\r\n        '    <\/div>' +\r\n        ' <\/div>' +\r\n        '<\/div>';\r\n    }\r\n\r\n    return html;\r\n  };\r\n\r\n  var getPriceLimit = function () {\r\n    const vars = getUrlParams();\r\n    if (window.slMaxPrice) return window.slMaxPrice;\r\n    if (!vars['max_price']) return '';\r\n    var s = decodeURI(vars['max_price'][0]).toLowerCase();\r\n    if (s && s !== 'null') {\r\n      window.slMaxPrice = Number(s.replace(\/\\+\/g, ' '));\r\n      return window.slMaxPrice;\r\n    } else {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  var buildRecs = function (activeFilters, isFilterCleared) {\r\n \r\n    var priceLimit = getPriceLimit();\r\n    if (priceLimit) {\r\n      showProducts(priceLimit, activeFilters, isFilterCleared).then(function (data) {\r\n        if (data) insertItemList(data, \".product-list__products > div:first-child, [data-meta-name='product']:first-child\", parseInt(2));\r\n      });\r\n    }\r\n  };\r\n\r\n  if (!window.slSpaLoaded) {\r\n    document.addEventListener('sl-ready', function () {\r\n      window.dyAngularLoaded = true;\r\n      buildRecs(activeFilters, isFilterCleared);\r\n    });\r\n  } else {\r\n    buildRecs(activeFilters, isFilterCleared);\r\n  }\r\n}","weight":100,"variables":[],"id":"64c8f8e55bdadc85d5047d20"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"648b45933ac255ab97062649":{"name":"Search - banner","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"65537420dc506679aa0c578d","name":"Empty categories","version":"657358ba113775fc2103f4b8","status":1,"target":[{"type":"Evaluator","conds":[{"id":"65537420dc506679aa0c5794","key":"655373b0ded1fba30b082482","method":"contains","value":"herm\u00e8s"},{"id":"657358ba113775fc2103f4b4","key":"655373b0ded1fba30b082482","method":"contains","value":"louis vuitton"},{"id":"65e1839fcdabde801a067023","key":"655373b0ded1fba30b082482","method":"contains","value":"2375139"},{"id":"65e1839fcdabde801a067025","key":"655373b0ded1fba30b082482","method":"contains","value":"nike"},{"id":"65e1839fcdabde801a067027","key":"655373b0ded1fba30b082482","method":"contains","value":"goyard"},{"id":"65e1839fcdabde801a067029","key":"655373b0ded1fba30b082482","method":"contains","value":"manolo blahnik"},{"id":"65e1839fcdabde801a06702b","key":"655373b0ded1fba30b082482","method":"contains","value":"214036"},{"id":"65e1839fcdabde801a06702d","key":"655373b0ded1fba30b082482","method":"contains","value":"1320351"},{"id":"65e1839fcdabde801a06702f","key":"655373b0ded1fba30b082482","method":"contains","value":"new balance"},{"id":"65e1839fcdabde801a067031","key":"655373b0ded1fba30b082482","method":"contains","value":"rolex"},{"id":"65e1839fcdabde801a067033","key":"655373b0ded1fba30b082482","method":"contains","value":"1246087"},{"id":"65e1839fcdabde801a067035","key":"655373b0ded1fba30b082482","method":"contains","value":"vivienne westwood"},{"id":"65e1839fcdabde801a067037","key":"655373b0ded1fba30b082482","method":"contains","value":"192012"},{"id":"65e1839fcdabde801a067039","key":"655373b0ded1fba30b082482","method":"contains","value":"dior"},{"id":"65e1839fcdabde801a06703b","key":"655373b0ded1fba30b082482","method":"contains","value":"429760"},{"id":"65e1839fcdabde801a06703d","key":"655373b0ded1fba30b082482","method":"contains","value":"chanel"},{"id":"65e1839fcdabde801a06703f","key":"655373b0ded1fba30b082482","method":"contains","value":"1074423"},{"id":"65e1839fcdabde801a067041","key":"655373b0ded1fba30b082482","method":"contains","value":"1537690"},{"id":"65e1839fcdabde801a067043","key":"655373b0ded1fba30b082482","method":"contains","value":"1200369"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":".sl-search-banner {margin-bottom:20px;display: block;}\r\n.sl-search-banner img { width:100%; border-radius: 12px;}\r\n[data-test-id=\"brandLogoTitle\"] ~ .sl-search-banner {margin-top:15px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n})\r\n\r\nconst configWomen = {\r\n   dior: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567282496f30.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567285c06905.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/dior-3768?utm_ref=tsum_banner_catalog\" },\r\n   chanel: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672886c0392.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728b0a4f5e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/chanel-4286?utm_ref=tsum_banner_catalog\" },\r\n   hermes: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728e96a2e1.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567290427e02.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/hermes-5239?utm_ref=tsum_banner_catalog\" },\r\n   lv: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672c9817a66.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656729518f0b2.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/louis-vuitton-4424?utm_ref=tsum_banner_catalog\" },\r\n   nike: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b9236d88.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2f557a512.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/nike-5072?utm_ref=tsum_banner_catalog\" },\r\n   goyard: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a1e24782.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a8be57a1.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/goyard-5705?utm_ref=tsum_banner_catalog\" },\r\n   manolo: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2c896f4d6.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0ae13f422.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/manolo-blahnik-4283?utm_ref=tsum_banner_catalog\" },\r\n   nb: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2d26d6e95.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b7968a7e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/new-balance-5017?utm_ref=tsum_banner_catalog\" },\r\n   rolex: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c24bbc86.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c4fc4f54.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/rolex-4787?utm_ref=tsum_banner_catalog\"},\r\n   vivene: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c8457cc2.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c9909c15.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/vivienne-westwood-2995?utm_ref=tsum_banner_catalog\"}\r\n};\r\nconst configMen = {\r\n   dior: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576faab3d5ec.png\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fa6d8451f.png\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/dior-3768?utm_ref=tsum_banner_catalog\" },\r\n \/\/  chanel: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672886c0392.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728b0a4f5e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/chanel-4286?utm_ref=tsum_banner_catalog\" },\r\n   hermes: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fac2f093f.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fadabd6d0.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/hermes-5239?utm_ref=tsum_banner_catalog\" },\r\n   lv: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fb1ad8b8f.png\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fb381b6d9.png\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/louis-vuitton-4424?utm_ref=tsum_banner_catalog\" },\r\n   nike: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df1ac09b081.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c03642d4.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/nike-5072?utm_ref=tsum_banner_catalog\"},\r\n   nb: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e29530cb.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b7968a7e.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/new-balance-5017?utm_ref=tsum_banner_catalog\"},\r\n   goyard: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a1e24782.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a8be57a1.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/goyard-5705?utm_ref=tsum_banner_catalog\" },\r\n   manolo: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2c896f4d6.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0ae13f422.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/manolo-blahnik-4283?utm_ref=tsum_banner_catalog\" },\r\n   vivene: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c8457cc2.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c9909c15.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/vivienne-westwood-2995?utm_ref=tsum_banner_catalog\"},\r\n   rolex: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e80dca1c.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e9c63337.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/rolex-4787?utm_ref=tsum_banner_catalog\"}\r\n};\r\n\r\nconst existingBanner = document.querySelector('.sl-search-banner');\r\nif (existingBanner) {\r\n   existingBanner.remove();\r\n}\r\n\r\n\/\/ {{Variable to upload images}}\r\nlet config;\r\n\r\nconst gender = SL.StorageUtils.get('selectedGender',['cookieStorage']);\r\n\r\nif (gender === \"men\") {\r\n   config = configMen;\r\n} else {\r\n   config = configWomen;\r\n}\r\n\r\nconst data = getData(window.slPageTitle);\r\nif (data) {\r\n    insertBanner(data);\r\n}\r\n\r\nfunction getData(q){\r\n if (['dior', '\u0434\u0438\u043e\u0440', '429760'].some(v => q.includes(v))) {\r\n    return config.dior;\r\n } else if (['chanel', '\u0448\u0430\u043d\u0435\u043b\u044c', '1074423'].some(v => q.includes(v))) {\r\n    return config.chanel;\r\n } else if (['hermes', 'herm\u00e8s', '\u0433\u0435\u0440\u043c\u0435\u0441', '1537690'].some(v => q.includes(v))) {\r\n    return config.hermes;\r\n } else if (['louis vuitton', '\u043b\u0443\u0438 \u0432\u0438\u0442\u043e\u043d', '1200369'].some(v => q.includes(v))) {\r\n    return config.lv;\r\n }\r\n else if (['nike', '\u043d\u0430\u0439\u043a', '2375139'].some(item => q.includes(item))){\r\n    return config.nike  \r\n }\r\n   else if (['goyard', '\u0433\u043e\u044f\u0440\u0434'].some(item => q.includes(item))){\r\n    return config.goyard  \r\n }\r\n  else if (['manolo blahnik', '\u043c\u0430\u043d\u043e\u043b\u043e', '214036'].some(item => q.includes(item))){\r\n    return config.manolo  \r\n }\r\n else if (['new balance', '\u043d\u044c\u044e \u0431\u044d\u043b\u0430\u043d\u0441', '\u043d\u044c\u044e \u0431\u0435\u043b\u0430\u043d\u0441', '1320351'].some(item => q.includes(item))){\r\n    return config.nb  \r\n }\r\n else if (['rolex', '\u0440\u043e\u043b\u0435\u043a\u0441', '1246087'].some(item => q.includes(item))){\r\n    return config.rolex  \r\n }\r\n else if (['vivienne westwood', '\u0432\u0438\u0432\u044c\u0435\u043d', '192012'].some(item => q.includes(item))){\r\n    return config.vivene  \r\n }\r\n return false;\r\n}\r\n\r\nfunction insertBanner(data){\r\n   \r\n    SL.waitForElement('h1', (el) => {\r\n        \r\n        const html = '<a href=\"'+data.link+'\" target=\"'+getLinkTarget()+'\" class=\"sl-search-banner\"><picture> <source srcset=\"'+data.img+'\" media=\"(min-width: 600px)\" \/> <img src=\"'+data.mobileImg+'\" alt=\"\" \/> <\/picture><\/a>';\r\n        el[0].insertAdjacentHTML('afterend', html);\r\n\r\n        document.querySelector('.sl-search-banner').addEventListener('click', () => {\r\n            window.slAnalytics.click({\r\n               campaignName: '${slCampaignName}',\r\n               campaignId: '${slTagId}',\r\n               experienceName: '${slExperienceName}',\r\n               variationName: '${slVariationName}',\r\n            }, 'banner')\r\n        })\r\n    })\r\n}\r\n\r\nfunction getLinkTarget(){\r\n   try {\r\n      if (SL.userData.deviceInfo.type === \"mobile\") {\r\n         return \"_self\"\r\n      } else {\r\n         return \"_blank\";\r\n      }\r\n   } catch {\r\n      return \"_blank\";\r\n   }\r\n}","weight":100,"variables":{"Variable to upload images":"\/\/"},"id":"65537420dc506679aa0c579f"}],"timeframe":false,"targetingWhen":false},{"id":"648b45933ac255ab9706264e","name":"Search","version":"65848b4c4205a27a1903ae40","status":1,"target":[{"type":"Evaluator","conds":[{"id":"64b150a7fadf0f1d43096cb5","key":"648b462b255733f2760999ed","method":"contains","value":"dior"},{"id":"64b150a7fadf0f1d43096cb6","key":"648b462b255733f2760999ed","method":"contains","value":"\u0434\u0438\u043e\u0440"},{"id":"64b150a7fadf0f1d43096cb7","key":"648b462b255733f2760999ed","method":"contains","value":"chanel"},{"id":"64b150a7fadf0f1d43096cb8","key":"648b462b255733f2760999ed","method":"contains","value":"\u0448\u0430\u043d\u0435\u043b\u044c"},{"id":"64b150a7fadf0f1d43096cb9","key":"648b462b255733f2760999ed","method":"contains","value":"hermes"},{"id":"64b150a7fadf0f1d43096cbb","key":"648b462b255733f2760999ed","method":"contains","value":"louis vuitton"},{"id":"64b150a7fadf0f1d43096cbc","key":"648b462b255733f2760999ed","method":"contains","value":"\u043b\u0443\u0438 \u0432\u0438\u0442\u043e\u043d"},{"id":"65675f247e5ef476e40803db","key":"648b462b255733f2760999ed","method":"contains","value":"herm\u00e8s"},{"id":"656760075dcc0d4ebe07ee66","key":"648b462b255733f2760999ed","method":"contains","value":"\u0433\u0435\u0440\u043c\u0435\u0441"},{"id":"65df1c7864dd36555302b4bb","key":"648b462b255733f2760999ed","method":"contains","value":"nike"},{"id":"65df1c7864dd36555302b4bd","key":"648b462b255733f2760999ed","method":"contains","value":"\u043d\u0430\u0439\u043a"},{"id":"65df1c7864dd36555302b4bf","key":"648b462b255733f2760999ed","method":"contains","value":"goyard"},{"id":"65df1c7864dd36555302b4c1","key":"648b462b255733f2760999ed","method":"contains","value":"\u0433\u043e\u044f\u0440\u0434"},{"id":"65df1c7864dd36555302b4c3","key":"648b462b255733f2760999ed","method":"contains","value":"manolo blahnik"},{"id":"65df1c7864dd36555302b4c5","key":"648b462b255733f2760999ed","method":"contains","value":"\u043c\u0430\u043d\u043e\u043b\u043e"},{"id":"65df1c7864dd36555302b4c7","key":"648b462b255733f2760999ed","method":"contains","value":"new balance"},{"id":"65df1c7864dd36555302b4c9","key":"648b462b255733f2760999ed","method":"contains","value":"\u043d\u044c\u044e \u0431\u044d\u043b\u0430\u043dc"},{"id":"65df1c7864dd36555302b4cb","key":"648b462b255733f2760999ed","method":"contains","value":"\u043d\u044c\u044e \u0431\u0435\u043b\u0430\u043d\u0441"},{"id":"65df1c7964dd36555302b4cd","key":"648b462b255733f2760999ed","method":"contains","value":"rolex"},{"id":"65df1c7964dd36555302b4cf","key":"648b462b255733f2760999ed","method":"contains","value":"\u0440\u043e\u043b\u0435\u043a\u0441"},{"id":"65df1c7964dd36555302b4d1","key":"648b462b255733f2760999ed","method":"contains","value":"vivienne westwood"},{"id":"65df1c7964dd36555302b4d3","key":"648b462b255733f2760999ed","method":"contains","value":"\u0432\u0438\u0432\u044c\u0435\u043d"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":".sl-search-banner {margin-bottom:20px;display: block;}\r\n.sl-search-banner img { width:100%; border-radius: 12px;}","jsCode":"window.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n})\r\n\r\nconst configWomen = {\r\n   dior: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567282496f30.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567285c06905.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/dior-3768?utm_ref=tsum_banner_search\" },\r\n   chanel: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672886c0392.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728b0a4f5e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/chanel-4286?utm_ref=tsum_banner_search\" },\r\n   hermes: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728e96a2e1.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6567290427e02.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/hermes-5239?utm_ref=tsum_banner_search\" },\r\n   lv: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672c9817a66.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656729518f0b2.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/louis-vuitton-4424?utm_ref=tsum_banner_search\" },\r\n   nike: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b9236d88.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2f557a512.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/nike-5072?utm_ref=tsum_banner_search\" },\r\n   goyard: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a1e24782.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a8be57a1.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/goyard-5705?utm_ref=tsum_banner_search\" },\r\n   manolo: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2c896f4d6.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0ae13f422.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/manolo-blahnik-4283?utm_ref=tsum_banner_search\" },\r\n   nb: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2d26d6e95.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b7968a7e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/new-balance-5017?utm_ref=tsum_banner_search\" },\r\n   rolex: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c24bbc86.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c4fc4f54.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/rolex-4787?utm_ref=tsum_banner_search\"},\r\n   vivene: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c8457cc2.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c9909c15.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/vivienne-westwood-2995?utm_ref=tsum_banner_search\"}\r\n};\r\nconst configMen = {\r\n   dior: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576faab3d5ec.png\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fa6d8451f.png\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/dior-3768?utm_ref=tsum_banner_search\" },\r\n \/\/  chanel: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65672886c0392.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/656728b0a4f5e.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/chanel-4286?utm_ref=tsum_banner_search\" },\r\n   hermes: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fac2f093f.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fadabd6d0.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/hermes-5239?utm_ref=tsum_banner_search\" },\r\n   lv: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fb1ad8b8f.png\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/6576fb381b6d9.png\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/louis-vuitton-4424?utm_ref=tsum_banner_search\" },\r\n   nike: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df1ac09b081.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c03642d4.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/nike-5072?utm_ref=tsum_banner_search\"},\r\n   nb: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e29530cb.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0b7968a7e.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/new-balance-5017?utm_ref=tsum_banner_search\"},\r\n   goyard: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a1e24782.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0a8be57a1.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/goyard-5705?utm_ref=tsum_banner_search\" },\r\n   manolo: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2c896f4d6.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0ae13f422.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/manolo-blahnik-4283?utm_ref=tsum_banner_search\" },\r\n   vivene: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c8457cc2.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df0c9909c15.jpg\", link: \"https:\/\/collect.tsum.ru\/women\/brand\/vivienne-westwood-2995?utm_ref=tsum_banner_search\"},\r\n   rolex: { img: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e80dca1c.jpg\", mobileImg: \"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2e9c63337.jpg\", link: \"https:\/\/collect.tsum.ru\/men\/brand\/rolex-4787?utm_ref=tsum_banner_search\"}\r\n};\r\n\r\nconst existingBanner = document.querySelector('.sl-search-banner');\r\nif (existingBanner) {\r\n   existingBanner.remove();\r\n}\r\n\r\n\/\/ {{Variable to upload images}}\r\nlet config;\r\n\r\nconst gender = SL.StorageUtils.get('selectedGender',['cookieStorage']);\r\n\r\nif (gender === \"men\") {\r\n   config = configMen;\r\n} else {\r\n   config = configWomen;\r\n}\r\n\r\nconst query = new URLSearchParams(window.location.search).get('q');\r\nconst data = getData(query.toLowerCase());\r\nif (data) {\r\n    insertBanner(data);\r\n}\r\n\/\/array)\r\nfunction getData(q){\r\n   debugger;\r\n if (['dior', '\u0434\u0438\u043e\u0440'].some(item => q.includes(item))) {\r\n    return config.dior;\r\n } else if (['chanel', '\u0448\u0430\u043d\u0435\u043b\u044c'].some(item => q.includes(item))) {\r\n    return config.chanel;\r\n } else if (['hermes', 'herm\u00e8s', '\u0433\u0435\u0440\u043c\u0435\u0441'].some(item => q.includes(item))) {\r\n    return config.hermes;\r\n } else if (['louis vuitton', '\u043b\u0443\u0438 \u0432\u0438\u0442\u043e\u043d'].some(item => q.includes(item))) {\r\n    return config.lv;\r\n }\r\n   else if (['nike', '\u043d\u0430\u0439\u043a'].some(item => q.includes(item))){\r\n    return config.nike  \r\n }\r\n   else if (['goyard', '\u0433\u043e\u044f\u0440\u0434'].some(item => q.includes(item))){\r\n    return config.goyard  \r\n }\r\n  else if (['manolo blahnik', '\u043c\u0430\u043d\u043e\u043b\u043e'].some(item => q.includes(item))){\r\n    return config.manolo  \r\n }\r\n else if (['new balance', '\u043d\u044c\u044e \u0431\u044d\u043b\u0430\u043d\u0441', '\u043d\u044c\u044e \u0431\u0435\u043b\u0430\u043d\u0441'].some(item => q.includes(item))){\r\n    return config.nb  \r\n }\r\n else if (['rolex', '\u0440\u043e\u043b\u0435\u043a\u0441'].some(item => q.includes(item))){\r\n    return config.rolex  \r\n }\r\n else if (['vivienne westwood', '\u0432\u0438\u0432\u044c\u0435\u043d'].some(item => q.includes(item))){\r\n    return config.vivene  \r\n }\r\n return false;\r\n}\r\n\r\nfunction insertBanner(data){\r\n    SL.waitForElement('h1', (el) => {\r\n        \r\n        const html = '<a href=\"'+data.link+'\" target=\"'+getLinkTarget()+'\" class=\"sl-search-banner\"><picture> <source srcset=\"'+data.img+'\" media=\"(min-width: 600px)\" \/> <img src=\"'+data.mobileImg+'\" alt=\"\" \/> <\/picture><\/a>';\r\n        el[0].insertAdjacentHTML('afterend', html);\r\n\r\n        document.querySelector('.sl-search-banner').addEventListener('click', () => {\r\n            window.slAnalytics.click({\r\n               campaignName: '${slCampaignName}',\r\n               campaignId: '${slTagId}',\r\n               experienceName: '${slExperienceName}',\r\n               variationName: '${slVariationName}',\r\n            }, 'banner')\r\n        })\r\n    })\r\n}\r\n\r\nfunction getLinkTarget(){\r\n   try {\r\n      if (SL.userData.deviceInfo.type === \"mobile\") {\r\n         return \"_self\"\r\n      } else {\r\n         return \"_blank\";\r\n      }\r\n   } catch {\r\n      return \"_blank\";\r\n   }\r\n}","weight":100,"variables":{"Variable to upload images":"\/\/cdn01.stellarlabs.ai\/media\/6315df8d49698c81d603e1da\/65df2f557a512.jpg"},"id":"648b45933ac255ab97062651"}],"timeframe":false,"targetingWhen":false},{"id":"64b143224c26bb6403032428","name":"Remove on other search","version":"64b143224c26bb640303242d","status":1,"target":[{"type":"URL","conds":[{"id":"64b150a7fadf0f1d43096cc1","value":"\/catalog\/search\/?q=","method":"contains","ignoreURLParams":0}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"const existingBanner = document.querySelector('.sl-search-banner');\r\nif (existingBanner) {\r\n   existingBanner.remove();\r\n}","weight":100,"variables":[],"id":"64b143224c26bb640303242b"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"64a817d58854b90d520909ef":{"name":"PDP - recs v2","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"64a817d58854b90d520909f4","name":"Experience 1","version":"65c4988bdf6275df9a0185a6","status":1,"target":[{"type":"PageType","conds":[{"id":"64baa2872e5812188d0d0e2d","value":"PRODUCT","method":"equal"}]},{"type":"Evaluator","conds":[{"id":"659d45d697ed9269eb07eba3","key":"659d556d14ee58b3540681c2","method":"contains","value":"true"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"wo filter","htmlCode":null,"cssCode":"[id=\"DY:itemView\"] + #sl_recs_widget #sl-show-more{visibility: hidden;}","jsCode":"let KNOWN_USER_STRATEGY = '64c240fb311cc4c6900df2b9'\r\nlet UNKNOWN_USER_STRATEGY = '64c240fb311cc4c6900df2b9';\r\nlet AUDIENCE_ID = '6422ed6a571df285e601cdc6';\r\n\r\nlet STRATEGY_ID = UNKNOWN_USER_STRATEGY;\r\n\r\nconst currentAudiences = SL.Audiences.getCurrent();\r\nif (currentAudiences && currentAudiences.includes(AUDIENCE_ID)) {\r\n  STRATEGY_ID = KNOWN_USER_STRATEGY;\r\n} \r\n\r\n\r\nwindow.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: STRATEGY_ID\r\n})\r\n\r\n\r\nSL.waitForVariable('SL.pageDataLoaded').then(() => {\r\nSL.waitForVariable('SL.Templates.gridRecs').then(() => {\r\n  const category3lvl = getCategoryByLevel(3);\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0421 \u044d\u0442\u0438\u043c \u0442\u043e\u0432\u0430\u0440\u043e\u043c \u0441\u043c\u043e\u0442\u0440\u044f\u0442\",\r\n    selector:'[id=\"DY:itemView\"]',\r\n    strategyId: STRATEGY_ID,\r\n    campaignObj: ${slClickObj},\r\n    rules:getRules(),\r\n    maxProducts:6,\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: STRATEGY_ID\r\n    }\r\n  });\r\n});\r\n});\r\n\r\nfunction getRules(){\r\n  const rules = [];\r\n  const category3lvl = getCategoryByLevel(3);\r\n  const category1lvl = getCategoryByLevel(1);\r\n  if (!category3lvl) return rules;\r\n\r\n  rules.push({\r\n        id: 1,\r\n        type: 'exclude',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'categories',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [category3lvl]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n  rules.push({\r\n        id: 1,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'categories',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [category1lvl]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n  return rules;\r\n\r\n}\r\nfunction getCategoryByLevel(level){\r\n  try {\r\n    return SL.pageData.categories[level - 1]\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nif (!window.slPdpClick) {\r\n  window.slPdpClick=1;\r\n  SL.Utils.on('click', '[id=\"DY:itemView\"] + #sl_recs_widget [data-sl-product-id]', () => {\r\n    SL.API('event', { name:\"PDP click recs\"})\r\n  })\r\n}","weight":0,"variables":[],"id":"64a817d58854b90d520909f7"},{"name":"with filter","htmlCode":null,"cssCode":"[id=\"DY:itemView\"] + #sl_recs_widget #sl-show-more{visibility: hidden;}","jsCode":"let KNOWN_USER_STRATEGY = '65b8cb8b96b8fea34c05eb35'\r\nlet UNKNOWN_USER_STRATEGY = '65b8cb8b96b8fea34c05eb35';\r\nlet AUDIENCE_ID = '6422ed6a571df285e601cdc6';\r\n\r\nlet STRATEGY_ID = UNKNOWN_USER_STRATEGY;\r\n\r\nconst currentAudiences = SL.Audiences.getCurrent();\r\nif (currentAudiences && currentAudiences.includes(AUDIENCE_ID)) {\r\n  STRATEGY_ID = KNOWN_USER_STRATEGY;\r\n} \r\n\r\n\r\nwindow.slAnalytics.show({\r\n    campaignName: '${slCampaignName}',\r\n    campaignId: '${slTagId}',\r\n    experienceName: '${slExperienceName}',\r\n    variationName: '${slVariationName}',\r\n    strategyName: '_',\r\n    strategyId: STRATEGY_ID\r\n})\r\n\r\n\r\nSL.waitForVariable('SL.pageDataLoaded').then(() => {\r\nSL.waitForVariable('SL.Templates.gridRecs').then(() => {\r\n  const category3lvl = getCategoryByLevel(3);\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0421 \u044d\u0442\u0438\u043c \u0442\u043e\u0432\u0430\u0440\u043e\u043c \u0441\u043c\u043e\u0442\u0440\u044f\u0442\",\r\n    selector:'[id=\"DY:itemView\"]',\r\n    strategyId: STRATEGY_ID,\r\n    campaignObj: ${slClickObj},\r\n    rules:getRules(),\r\n    maxProducts:6,\r\n    analytics:{\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: STRATEGY_ID\r\n    }\r\n  });\r\n});\r\n});\r\n\r\nfunction getRules(){\r\n  const rules = [];\r\n  const category3lvl = getCategoryByLevel(3);\r\n  const category1lvl = getCategoryByLevel(1);\r\n  if (!category3lvl) return rules;\r\n\r\n  rules.push({\r\n        id: 1,\r\n        type: 'exclude',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'categories',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [category3lvl]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n  rules.push({\r\n        id: 2,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'categories',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [category1lvl]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n\r\n  rules.push({\r\n        id: 3,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'type',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [SL.pageData.type]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n  rules.push({\r\n        id: 3,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'gender',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [SL.pageData.gender]\r\n            }]\r\n          }]\r\n        }\r\n  })\r\n  \/\/ if(SL.pageData.price){\r\n  \/\/     rules.push({\r\n  \/\/       id: 4,\r\n  \/\/       type: 'exclude',\r\n  \/\/       slots: [],\r\n  \/\/       query: {\r\n  \/\/         conditions: [{\r\n  \/\/           field: 'price',\r\n  \/\/           arguments: [{\r\n  \/\/             action: 'less', \/\/ not more expensive than than 1.5\r\n  \/\/             value: [SL.pageData.price * 1.5] \/\/ change multiplier\r\n  \/\/           }]\r\n  \/\/         }]\r\n  \/\/       }\r\n  \/\/     })\r\n  \/\/     rules.push({\r\n  \/\/       id: 5,\r\n  \/\/       type: 'exclude',\r\n  \/\/       slots: [],\r\n  \/\/       query: {\r\n  \/\/         conditions: [{\r\n  \/\/           field: 'price',\r\n  \/\/           arguments: [{\r\n  \/\/             action: 'more', \/\/ not cheaper than 0.5\r\n  \/\/             value: [SL.pageData.price * 0.5] \/\/ change multiplier\r\n  \/\/           }]\r\n  \/\/         }]\r\n  \/\/       }\r\n  \/\/     })\r\n  \/\/ }\r\n\r\n  return rules;\r\n\r\n}\r\nfunction getCategoryByLevel(level){\r\n  try {\r\n    return SL.pageData.categories[level - 1]\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n\r\n}\r\n\r\nif (!window.slPdpClick) {\r\n  window.slPdpClick=1;\r\n  SL.Utils.on('click', '[id=\"DY:itemView\"] + #sl_recs_widget [data-sl-product-id]', () => {\r\n    SL.API('event', { name:\"PDP click recs\"})\r\n  })\r\n}","weight":100,"variables":[],"id":"65b7a56500d5005c1b0be844"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"64b954d5267795a8d3091c49":{"name":"HP - recs","type":"custom_code","status":1,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"652558e530345b2a760d30b4","name":"QA","version":"6532a7647b7f32e11807c42c","status":1,"target":[{"type":"PageType","conds":[{"id":"652558e530345b2a760d30b5","value":"HOMEPAGE","method":"equal"}]},{"type":"URL","conds":[{"id":"65255902ecc68a12aa056fa1","value":"sl_test","method":"contains","ignoreURLParams":0}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":".sl-hp-recs .product__price-wrapper,\r\n.sl-hp-recs .sl-product-description{\r\ndisplay: none;\r\n}\r\n.sl-hp-recs .sl-heading {color: #f94f0d;}\r\n.sl-hp-recs .swiper-pagination {bottom:-10px;}\r\n.sl-hp-recs{padding:0 100px;position: relative;margin-bottom: 30px;}\r\n.sl-hp-recs #sl_recs_widget{position: static;}\r\n.sl-hp-recs .dy-nav-button {cursor: pointer;}\r\n@media (min-width: 1024px) {\r\n.sl-hp-recs .sl-imageSizes {\r\n    width: 184px;\r\n    height: 275px;\r\n}\r\n}\r\n@media (max-width:1023px){\r\n    .sl-hp-recs{padding:0px;}\r\n   .sl-hp-recs .dy-nav-button{\r\n       display: none;\r\n   } \r\n   .sl-hp-recs .swiper, .sl-hp-recs .sl-style-list{flex-direction: row;display: flex;overflow: auto;}\r\n   .sl-hp-recs .sl-style-list::-webkit-scrollbar { \r\n        display: none;  \r\n    }\r\n   .sl-hp-recs .sl-style-container {display: flex;max-width: calc((100% - 8px * 1.5) \/ 2.5);}\r\n}","jsCode":"if (document.querySelector('.sl-hp-recs')) return;\r\n\r\nlet KNOWN_USER_STRATEGY = '64ba62a13ac255ab97062df8'\r\nlet UNKNOWN_USER_STRATEGY = '64ba62808deceb3c46016b5a';\r\n\r\nlet AUDIENCE_ID = '6422ed6a571df285e601cdc6';\r\nlet NEW_AUDIENCE_ID = '6526baab385bb0dba20373fc'\r\nlet NEW_STRATEGY_ID = '652555a2c5f6acdfd3008d45'\r\n\r\nlet STRATEGY_ID = UNKNOWN_USER_STRATEGY;\r\n\r\nconst currentAudiences = SL.Audiences.getCurrent();\r\n\r\nif (currentAudiences && currentAudiences.includes(NEW_AUDIENCE_ID)) {\r\n  STRATEGY_ID = NEW_STRATEGY_ID;\r\n} else if (currentAudiences && currentAudiences.includes(AUDIENCE_ID)) {\r\n  STRATEGY_ID = KNOWN_USER_STRATEGY;\r\n} else {\r\n  STRATEGY_ID = UNKNOWN_USER_STRATEGY;\r\n}\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\n\r\n  getPurchasedCategory().then(res => {\r\n    const rules = [];\r\n    const gender = getGender();\r\n    const lastPurchased = res\r\n    if (!gender) return rules;\r\n\r\n    if (gender === 'k') {\r\n      STRATEGY_ID = '6543a9bf5693ad4d520370fe'\r\n      rules.push({\r\n        id: 1,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'categories',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: ['\u0414\u0435\u0442\u0441\u043a\u043e\u0435'],\r\n            }, ],\r\n          }, ],\r\n        },\r\n      })\r\n    }\r\n    else{\r\n      rules.push({\r\n        id: 1,\r\n        type: 'include',\r\n        slots: [],\r\n        query: {\r\n          conditions: [{\r\n            field: 'gender',\r\n            arguments: [{\r\n              action: 'equal',\r\n              value: [gender],\r\n            }, ],\r\n          }, ],\r\n        },\r\n      });\r\n    }\r\n\r\n    if (lastPurchased) {\r\n      lastPurchased.map((lp, i, arr) => {\r\n        if (arr.length - 1 === i) {\r\n        rules.push({\r\n          id: -1,\r\n          type: 'exclude',\r\n          slots: [],\r\n          query: {\r\n            conditions: [{\r\n              field: 'categories',\r\n              arguments: [{\r\n                action: 'equal',\r\n                value: [lp],\r\n              }, ],\r\n            }, ],\r\n          },\r\n        })\r\n        }\r\n      })\r\n    }\r\n\r\n    SL.Templates.gridRecs.insert({\r\n      title: \"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0432\u0430\u0441\",\r\n      selector: \".sl-hp-recs > div\",\r\n      strategyId: STRATEGY_ID,\r\n      campaignObj: ${slClickObj},\r\n      layout: 'slider',\r\n      rules: rules,\r\n      analytics: {\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n        strategyName: '_',\r\n        strategyId: STRATEGY_ID\r\n      }\r\n    });\r\n\r\n  })\r\n});\r\n\r\nSL.waitForElement('[data-test-id=\"sliderTitleWrapper\"]', (els) => {\r\n  let targetNode;\r\n  for (let i = 0; i < els.length; i++) {\r\n    if (els[i].innerText.trim() === '\u041d\u041e\u0412\u041e\u0415 \u0412 \u0411\u0420\u0415\u041d\u0414\u0410\u0425') {\r\n      targetNode = els[i].closest('[data-test-id=\"fewSlidesSliderBlock\"]');\r\n      break;\r\n    }\r\n  }\r\n  if (targetNode) {\r\n    targetNode.insertAdjacentHTML('afterend', '<div class=\"sl-hp-recs\"><div><\/div><\/div>');\r\n  }\r\n})\r\n\r\nwindow.slAnalytics.show({\r\n  campaignName: '${slCampaignName}',\r\n  campaignId: '${slTagId}',\r\n  experienceName: '${slExperienceName}',\r\n  variationName: '${slVariationName}',\r\n  strategyName: '_',\r\n  strategyId: STRATEGY_ID\r\n})\r\n\r\n\r\nfunction getGender() {\r\n  const c = SL.StorageUtils.get('selectedGender', ['cookieStorage']);\r\n  if (c === 'women') {\r\n    return 'f';\r\n  } else if (c === 'men') {\r\n    return 'm'\r\n  } else if (c === 'kids') {\r\n    return 'k'\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction getPurchasedCategory() {\r\n  return new Promise((resolve, reject) => {\r\n    SL.Recommendations.get(\r\n      [{\r\n        id: '6527eb4885f59dd61a01a597'\r\n      }], {\r\n        maxProducts: 5,\r\n      },\r\n      function (err, data) {\r\n        if (data) {\r\n          const productsArr = data.data[0].slots\r\n          const ptCategories = []\r\n          productsArr.map(function (el, i) {\r\n            el.item.category = el.item.categories[el.item.categories.length - 1];\r\n            ptCategories.push(el.item.category)\r\n          });\r\n          resolve(ptCategories);\r\n        } else {\r\n          reject();\r\n        }\r\n\r\n      },\r\n    );\r\n  });\r\n}","weight":100,"variables":[],"id":"652558e530345b2a760d30b8"}],"timeframe":false,"targetingWhen":false},{"id":"64b954d5267795a8d3091c4d","name":"Experience 1","version":"66027ed70e72c07b0802ee84","status":1,"target":[{"type":"PageType","conds":[{"id":"64cb65d4954742a8d10a7b05","value":"HOMEPAGE","method":"equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":".sl-hp-recs .product__price-wrapper,\r\n.sl-hp-recs .sl-product-description{\r\ndisplay: none;\r\n}\r\n.sl-hp-recs .sl-heading {color: #f94f0d;}\r\n.sl-hp-recs .swiper-pagination {bottom:-10px;}\r\n.sl-hp-recs{padding:0 80px;position: relative;margin-bottom: 30px;}\r\n.sl-hp-recs #sl_recs_widget{position: static;}\r\n.sl-hp-recs .dy-nav-button {cursor: pointer;}\r\n@media (min-width: 1024px) {\r\n.sl-hp-recs .sl-imageSizes {\r\n    width: 184px;\r\n    height: 275px;\r\n}\r\n}\r\n@media (max-width:1023px){\r\n    .sl-hp-recs{padding:0px;}\r\n   .sl-hp-recs .dy-nav-button{\r\n       display: none;\r\n   } \r\n   .sl-hp-recs .swiper, .sl-hp-recs .sl-style-list{flex-direction: row;display: flex;overflow: auto;}\r\n   .sl-hp-recs .sl-style-list::-webkit-scrollbar { \r\n        display: none;  \r\n    }\r\n   .sl-hp-recs .sl-style-container {display: flex;max-width: calc((100% - 8px * 1.5) \/ 2.5);}\r\n}","jsCode":"let KNOWN_USER_STRATEGY = '64ba62a13ac255ab97062df8'\r\nlet UNKNOWN_USER_STRATEGY = '64ba62808deceb3c46016b5a';\r\nlet AUDIENCE_ID = '6422ed6a571df285e601cdc6';\r\n\r\nlet STRATEGY_ID = UNKNOWN_USER_STRATEGY;\r\n\r\nconst currentAudiences = SL.Audiences.getCurrent();\r\nif (currentAudiences && currentAudiences.includes(AUDIENCE_ID)) {\r\n  STRATEGY_ID = KNOWN_USER_STRATEGY;\r\n}\r\n\r\nconst gender = getGender();\r\nif (gender === 'k') {\r\n  STRATEGY_ID = '6543a9bf5693ad4d520370fe'\r\n}\r\n\r\nSL.waitForVariable('SL.Templates').then(() => {\r\n  if (document.querySelector('.sl-hp-recs')) return;\r\n\r\n  SL.Templates.gridRecs.insert({\r\n    title: \"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0432\u0430\u0441\",\r\n    selector: \".sl-hp-recs > div\",\r\n    strategyId: STRATEGY_ID,\r\n    campaignObj: ${slClickObj},\r\n    layout: 'slider',\r\n    rules: getRules(),\r\n    analytics: {\r\n      campaignName: '${slCampaignName}',\r\n      campaignId: '${slTagId}',\r\n      experienceName: '${slExperienceName}',\r\n      variationName: '${slVariationName}',\r\n      strategyName: '_',\r\n      strategyId: STRATEGY_ID\r\n    }\r\n  });\r\n});\r\n\r\nSL.waitForElement('[data-test-id=\"sliderTitleWrapper\"]', (els) => {\r\n  let targetNode;\r\n  for (let i = 0; i < els.length; i++) {\r\n    if (els[i].innerText.trim() === '\u041d\u041e\u0412\u041e\u0415 \u0412 \u0411\u0420\u0415\u041d\u0414\u0410\u0425') {\r\n      targetNode = els[i].closest('[data-test-id=\"fewSlidesSliderBlock\"]');\r\n      break;\r\n    }\r\n  }\r\n  if (targetNode) {\r\n    targetNode.insertAdjacentHTML('afterend', '<div class=\"sl-hp-recs\"><div><\/div><\/div>');\r\n  }\r\n})\r\n\r\nwindow.slAnalytics.show({\r\n  campaignName: '${slCampaignName}',\r\n  campaignId: '${slTagId}',\r\n  experienceName: '${slExperienceName}',\r\n  variationName: '${slVariationName}',\r\n  strategyName: '_',\r\n  strategyId: STRATEGY_ID\r\n})\r\n\r\nfunction getRules() {\r\n  const rules = [];\r\n  const gender = getGender();\r\n  if (!gender) return rules;\r\n\r\n  if (gender === 'k') {\r\n    rules.push({\r\n      id: 1,\r\n      type: 'include',\r\n      slots: [],\r\n      query: {\r\n        conditions: [{\r\n          field: 'categories',\r\n          arguments: [{\r\n            action: 'equal',\r\n            value: ['\u0414\u0435\u0442\u0441\u043a\u043e\u0435'],\r\n          },],\r\n        },],\r\n      },\r\n    })\r\n  }\r\n  else {\r\n    rules.push({\r\n      id: 1,\r\n      type: 'include',\r\n      slots: [],\r\n      query: {\r\n        conditions: [{\r\n          field: 'gender',\r\n          arguments: [{\r\n            action: 'equal',\r\n            value: [gender],\r\n          },],\r\n        },],\r\n      },\r\n    });\r\n  }\r\n\r\n  return rules;\r\n}\r\n\r\nfunction getGender() {\r\n  const c = SL.StorageUtils.get('selectedGender', ['cookieStorage']);\r\n  if (c === 'women') {\r\n    return 'f';\r\n  } else if (c === 'men') {\r\n    return 'm'\r\n  } else if (c === 'kids') {\r\n    return 'k'\r\n  } else {\r\n    return false;\r\n  }\r\n}","weight":100,"variables":[],"id":"64b954d5267795a8d3091c50"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"633c25b96acf9d38000643c1":{"name":"Hide old price on non-ru regions","type":"custom_code","status":0,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"633c25d3d4de8cbcf50c298e","name":"Non ru","version":"633d91c31c6b3f9e14042a3d","status":1,"target":[{"type":"URL","conds":[{"id":"633d91b2610bbed34204d6b0","value":"https:\/\/www.tsum.ru\/","method":"not_contains","ignoreURLParams":1}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Var 1","htmlCode":null,"cssCode":".price_type_old {display:none !important;}\r\n.price.price_type_new {\r\n  color: #000 !important;\r\n}","jsCode":null,"weight":100,"variables":[],"id":"633c25df2dc2fc146e01c315"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"633c29c2d4de8cbcf50c298f":{"name":"HP - gender select","type":"custom_code","status":0,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"633c29ed6acf9d38000643c6","name":"Exp 1","version":"633c2a1315988845b004fe0c","status":1,"target":[{"type":"DeviceCategory","conds":[{"id":"633c29ed6acf9d38000643c4","value":"mobile","method":"equal"}]},{"type":"PageType","conds":[{"id":"633c29ed6acf9d38000643c5","value":"HOMEPAGE","method":"equal"}]}],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Var 1","htmlCode":null,"cssCode":".dy-${slVariationId} {\r\n  display:flex;\r\n  padding: 8px;\r\n  justify-content: center;\r\n}\r\n.dy-${slVariationId} a {\r\n  font: normal 12px\/44px TSUMLenta,San Francisco,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif;\r\n  letter-spacing: 1.2px;\r\n  color: #1b1b1b;\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  cursor: pointer;\r\n  border-radius: 6px;\r\n  display:flex;\r\n  align-items:center;\r\n  height:40px;\r\n  padding: 13px 26px 14px;\r\n  text-decoration:none;\r\n}\r\n.dy-${slVariationId} a.active {\r\n  border: solid 2px #f94f0d;\r\n}\r\n\r\n@media screen and (max-width: 599px) {\r\n  .dy-${slVariationId} {\r\n    border-top: 1px solid #d9d9d9;\r\n  }\r\n}\r\n\r\n@media (min-width:1024px) {\r\n  .dy-${slVariationId} {display:none;}\r\n}","jsCode":"if (document.getElementById('dy-hp-genders')) return;\r\nfunction init() {\r\n  SL.waitForElement('home-mobile-menu', function (el) {\r\n    const div = document.createElement('div');\r\n    div.id = 'dy-hp-genders';\r\n    div.classList.add('dy-${slVariationId}');\r\n    div.innerHTML = getGenderHtml();\r\n    el[0].before(div);\r\n\r\n    const gender = SL.StorageUtils.get('catalogGender', ['cookieStorage']) || 'women';\r\n\r\n    div.querySelector('[data-value=\"' + gender + '\"]').classList.add('active');\r\n\r\n    div.querySelectorAll('a').forEach(a => {\r\n      a.addEventListener('click', function (e) {\r\n        const value = e.target.dataset.value;\r\n        SL.StorageUtils.set('catalogGender', value, ['cookieStorage'], { domain: \".tsum.ru\", expires: 2529000 });\r\n        SL.API('event', { name:\"Click HP gender select\"})\r\n      })\r\n    })\r\n  });\r\n}\r\n\r\nif (!window.dyAngularLoaded) {\r\n    document.addEventListener('dy-ready',function(){\r\n        window.dyAngularLoaded = true;\r\n        init();\r\n    });\r\n  document.addEventListener('sl-ready', function () {\r\n     window.dyAngularLoaded = true;\r\n        init();\r\n})\r\n\r\n} else {\r\n    init();\r\n}\r\n\r\n\r\nfunction getGenderHtml() {\r\n  return '<a href=\"\/\" class=\"dy-click-link-\" data-value=\"women\">\u0416\u0435\u043d\u0441\u043a\u043e\u0435<\/a> <a href=\"\/men\" class=\"dy-click-link-\" data-value=\"men\">\u041c\u0443\u0436\u0441\u043a\u043e\u0435<\/a> <a href=\"\/kids\" class=\"dy-click-link-\" data-value=\"kids\">\u0414\u0435\u0442\u0441\u043a\u043e\u0435<\/a>';\r\n}","weight":100,"variables":[],"id":"633c2a0c857f0ff81f0bd34e"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"6425a7b111fad4619a0c0baf":{"name":"A\/A test","type":"custom_code","status":0,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"page_load","value":"0"}]}],"exps":[{"id":"6425a806a34794aefc0eeae6","name":"A\/A all site","version":"65ae4b21fe8a840ec0072bb9","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Var1","htmlCode":null,"cssCode":null,"jsCode":"SL.waitForVariable('window.slAnalytics').then(() => {\r\n    window.slAnalytics.show({\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n    })\r\n})","weight":50,"variables":[],"id":"6425a812083a980895099dda"},{"name":"Var2","htmlCode":null,"cssCode":null,"jsCode":"SL.waitForVariable('window.slAnalytics').then(() => {\r\n    window.slAnalytics.show({\r\n        campaignName: '${slCampaignName}',\r\n        campaignId: '${slTagId}',\r\n        experienceName: '${slExperienceName}',\r\n        variationName: '${slVariationName}',\r\n    })\r\n})","weight":50,"variables":[],"id":"642ac17ba34794aefc0eeb2d"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"645bb8e76d7949a1ce034f35":{"name":"Sigma Test","type":"custom_code","status":0,"frequency":0,"target":[],"trigger":[{"conds":[{"type":"time_on_page","value":"12"}]}],"exps":[{"id":"645bb8e76d7949a1ce034f39","name":"Experience 1","version":"645bb8e76d7949a1ce034f3f","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":null,"jsCode":"{title: \"hello\"}","weight":50,"variables":[],"id":"645bb8e76d7949a1ce034f3b"},{"name":"Variation 2","htmlCode":null,"cssCode":"\/\/test","jsCode":null,"weight":50,"variables":[],"id":"645bb8e76d7949a1ce034f3d"}],"timeframe":false,"targetingWhen":false}],"cssSelector":null,"insertMethod":null,"priority":null,"settings":{"isSpa":0,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}},"65798f5364a4b16c660c56f4":{"name":"Gift card - promo","type":"custom_code","status":0,"frequency":0,"target":[{"type":"URL","conds":[{"id":"65798f5364a4b16c660c56f2","value":"www.tsum.ru\/about\/giftcard\/buy\/","method":"equal","ignoreURLParams":1}]}],"trigger":[{"conds":[{"type":"page_load","value":0}]}],"exps":[{"id":"65798f5364a4b16c660c56f7","name":"Experience 1","version":"65798f5364a4b16c660c56fb","status":1,"target":[],"attribution":{"sticky":1,"start":0,"end":0},"variations":[{"name":"Variation 1","htmlCode":null,"cssCode":".gf-disclaimer {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 16px;\r\n    font-size: 12px;\r\n    line-height: 18px;\r\n    text-align: center;\r\n    border: 1px solid #1b1b1b;\r\n    border-radius: 16px;\r\n    background: #fff;\r\n    margin: 8px 0;\r\n}\r\n\r\n@media (min-width:1024px) {\r\n    .gf-disclaimer {\r\n        margin-bottom:-30px;\r\n    }\r\n}","jsCode":"SL.waitForElement('form[class*=\"style__cardType\"]', (el) => {\r\n    if (document.querySelector('.gf-disclaimer')) return;\r\n    const html = '<div class=\"gf-disclaimer\">\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430\u044f \u044d\u043a\u0441\u043f\u0440\u0435\u0441\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 3 \u0447\u0430\u0441\u043e\u0432 \u0434\u043b\u044f&nbsp;\u043a\u0430\u0440\u0442 \u043d\u043e\u043c\u0438\u043d\u0430\u043b\u043e\u043c \u043e\u0442 50 000 \u0440\u0443\u0431\u043b\u0435\u0439<\/div>';\r\n    el[0].insertAdjacentHTML('beforebegin', html);\r\n})","weight":100,"variables":[],"id":"65798f5364a4b16c660c56f9"}],"timeframe":false,"targetingWhen":false}],"cssSelector":"","insertMethod":null,"priority":null,"settings":{"isSpa":1,"position":null,"autoHide":null,"backdropColor":null,"backdropClose":null,"showCloseIcon":null,"hideAfterCloseClicked":null}}};
window.SL.Strategies = {};
window.SL.sectionConfig = {"_id":{"$oid":"6315df8d49698c81d603e1da"},"name":"TSUM (prod)","account_id":{"$oid":"6315df777136eb5aa20b09a7"},"currency_id":{"$oid":"62f0e0609aa4d70c46001e81"},"domain":"tsum.ru","type":null,"timezone":"Europe\/Moscow","timezone_offset":10800,"updated_at":"2024-04-17T07:53:55.512000Z","created_at":"2022-09-05T11:37:49.719000Z","currency_name":"RUB","hide_campaigns":false};
window.SL.Segments = {"6422eadc571df285e601cdbb":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eadc571df285e601cdba","value":"mobile","method":"equal"}]}]},"6422eaf6a34794aefc0eea7e":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eaf6a34794aefc0eea7d","value":"desktop","method":"equal"}]}]},"6422eb17d9ea38c202022b64":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb17d9ea38c202022b63","value":"tablet","method":"equal"}]}]},"6422eb3c1f204f8625000f26":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb3c1f204f8625000f24","value":"desktop","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb3c1f204f8625000f25","value":"Chrome","method":"equal"}]}]},"6422eb53083a980895099d32":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb53083a980895099d30","value":"desktop","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb53083a980895099d31","value":"Safari","method":"equal"}]}]},"6422eb72a34794aefc0eea83":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb72a34794aefc0eea81","value":"desktop","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb72a34794aefc0eea82","value":"Yandex","method":"equal"}]}]},"6422eb87658fe276db00d33d":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb87658fe276db00d33b","value":"mobile","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb87658fe276db00d33c","value":"Yandex","method":"equal"}]}]},"6422eb88571df285e601cdc0":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb88571df285e601cdbe","value":"mobile","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb88571df285e601cdbf","value":"Safari","method":"equal"}]}]},"6422eb8ad9ea38c202022b69":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"DeviceCategory","conds":[{"id":"6422eb8ad9ea38c202022b67","value":"mobile","method":"equal"}]},{"type":"Browser","conds":[{"id":"6422eb8ad9ea38c202022b68","value":"Chrome","method":"equal"}]}]},"6422ebfcd9ea38c202022b6d":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Region","conds":[{"id":"6422ebfcd9ea38c202022b6c","value":"MOW","method":"equal"}]}]},"6422ec3cd9ea38c202022b71":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Region","conds":[{"id":"6422ec3cd9ea38c202022b70","value":"SPE","method":"equal"}]}]},"6422ec6711fad4619a0c0b54":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Audience","conds":[{"id":"6422ec6711fad4619a0c0b52","value":"6422ec3cd9ea38c202022b71","method":"not_belong"}]},{"type":"Audience","conds":[{"id":"6422ec6711fad4619a0c0b53","value":"6422ebfcd9ea38c202022b6d","method":"not_belong"}]},{"type":"Audience","conds":[{"id":"6422f05f8c8b0661830f95fb","value":"6422efe5555e8d839c045d06","method":"not_belong"}]}]},"6422eca4d9ea38c202022b75":{"belonging_window":"0","lookback_window":"current_session","type":1,"conditions":[{"type":"ProductsPurchased","conds":[{"id":"652819052e278acb610690fe","countMethod":"equal","count":1}]}]},"6422ecd499dcd5fb6905ffbe":{"belonging_window":"0","lookback_window":"current_session","type":1,"conditions":[{"type":"ProductsPurchased","conds":[{"id":"652818fb5b5c783b4b0cfcb1","countMethod":"equal","count":2}]}]},"6422ed1e8c8b0661830f95f5":{"belonging_window":"0","lookback_window":"current_session","type":1,"conditions":[{"type":"ProductsPurchased","conds":[{"id":"652818f22e278acb610690fa","countMethod":"more_or_equal","count":3}]}]},"6422ed4599dcd5fb6905ffc2":{"belonging_window":"0","lookback_window":"current_session","type":1,"conditions":[{"type":"ProductsAddedToCart","conds":[{"id":"6422ed4599dcd5fb6905ffc1","countMethod":"more_or_equal","count":1}]}]},"6422ed6a571df285e601cdc6":{"belonging_window":"180","lookback_window":"3_months","type":1,"conditions":[{"type":"ProductsViewed","conds":[{"id":"652818eb4dbf28b6b8059182","countMethod":"more_or_equal","count":5}]}]},"6422ed91d1d0a9d83205174f":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"TrafficSource","conds":[{"id":"6422ed91d1d0a9d83205174e","value":"Direct","method":"equal"}]}]},"6422eda5ec56d5a30b051af2":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"TrafficSource","conds":[{"id":"6422eda5ec56d5a30b051af1","value":"Paid Search","method":"equal"}]}]},"6422edb6083a980895099d38":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"TrafficSource","conds":[{"id":"6422edb6083a980895099d37","value":"Referral","method":"equal"}]}]},"6422edcc571df285e601cdca":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"TrafficSource","conds":[{"id":"6422edcc571df285e601cdc9","value":"Search","method":"equal"}]}]},"6422ee16d1d0a9d832051753":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"TrafficSource","conds":[{"id":"6422ee16d1d0a9d832051752","value":"Social","method":"equal"}]}]},"6422ee45d9ea38c202022b7b":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Audience","conds":[{"id":"6422ee45d9ea38c202022b78","value":"6422eca4d9ea38c202022b75","method":"not_belong"}]},{"type":"Audience","conds":[{"id":"6422ee45d9ea38c202022b79","value":"6422ecd499dcd5fb6905ffbe","method":"not_belong"}]},{"type":"Audience","conds":[{"id":"6422ee45d9ea38c202022b7a","value":"6422ed1e8c8b0661830f95f5","method":"not_belong"}]}]},"6422efe5555e8d839c045d06":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Region","conds":[{"id":"6422efe5555e8d839c045d05","value":"MOS","method":"equal"}]}]},"6422f0a38927d30e7103b7f1":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"Region","conds":[{"id":"6422f0a38927d30e7103b7f0","value":"NIZ","method":"equal"}]}]},"6526baab385bb0dba20373fc":{"belonging_window":"180","lookback_window":"1_year","type":0,"conditions":[{"type":"ProductsPurchased","conds":[{"id":"6526baab385bb0dba20373fa","countMethod":"more_or_equal","count":1}]}]},"657c3b6a7329ce4e200cf104":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"URLVisit","conds":[{"id":"657c3b6a7329ce4e200cf102","countMethod":"more_or_equal","count":1,"ignoreURLParams":0}]}]},"657c3b79ad9e856d870fd436":{"belonging_window":"0","lookback_window":"current_session","type":0,"conditions":[{"type":"ProductsViewed","conds":[{"id":"657c3b79ad9e856d870fd434","countMethod":"more_or_equal","count":1}]}]}};
