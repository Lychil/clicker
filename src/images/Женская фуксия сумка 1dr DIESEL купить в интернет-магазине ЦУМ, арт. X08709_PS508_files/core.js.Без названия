(()=>{var e={569:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(81),i=s.n(n),o=s(645),a=s.n(o)()(i());a.push([e.id,"@-webkit-keyframes gfFadeIn{from{opacity:0}to{opacity:1}}@keyframes gfFadeIn{from{opacity:0}to{opacity:1}}",""]);const r=a},829:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(81),i=s.n(n),o=s(645),a=s.n(o)()(i());a.push([e.id,".gf--notification{display:none;align-items:center;justify-content:center;position:fixed;z-index:99999;opacity:0;visibility:hidden;transition:.2s linear}.gf--notification.gf--is-open{opacity:1;visibility:visible;display:flex;-webkit-animation:.4s gfFadeIn;animation:.4s gfFadeIn}.gf--notification-bottom-right{bottom:15px;right:15px}.gf--notification-bottom-left{bottom:15px;left:15px}.gf--notification-top-left{top:15px;left:15px}.gf--notification-top-right{top:15px;right:15px}.gf--notification-bottom-bar{bottom:0;left:0;width:100%}.gf--notification-bottom-bar .gf--notification-content{width:100%}.gf--notification-content{position:relative;z-index:10}.gf--notification-close{position:absolute;right:-10px;top:-10px;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:3px;box-sizing:content-box;color:#000;width:15px;height:15px;background:#fff;border-radius:15px}",""]);const r=a},123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(81),i=s.n(n),o=s(645),a=s.n(o)()(i());a.push([e.id,".sl--overlay{display:none;align-items:center;justify-content:center;position:fixed;top:0;left:0;z-index:99999;width:100%;height:100%;opacity:0;visibility:hidden;transition:.2s linear}.sl--overlay-backdrop{left:0;position:fixed;right:0;top:0;bottom:0;background:BG_COLOR}.sl--overlay.sl--is-open{opacity:1;visibility:visible;display:flex;-webkit-animation:gfFadeIn .4s;animation:gfFadeIn .4s;}.sl--overlay-center-top{align-items:flex-start}.sl--overlay-center-bottom{align-items:flex-end}.sl--overlay-content{position:relative;z-index:10}.sl--overlay-close{position:absolute;right:-30px;top:-30px;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:5px;box-sizing:content-box;color:#fff}",""]);const r=a},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&a[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},520:(e,t,s)=>{var n=s(569);n&&n.__esModule&&(n=n.default),e.exports="string"==typeof n?n:n.toString()},137:(e,t,s)=>{var n=s(829);n&&n.__esModule&&(n=n.default),e.exports="string"==typeof n?n:n.toString()},329:(e,t,s)=>{var n=s(123);n&&n.__esModule&&(n=n.default),e.exports="string"==typeof n?n:n.toString()}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e={event:"//ev.stellarlabs.ai/event",page:"//ev.stellarlabs.ai/page",impression:"//ev.stellarlabs.ai/impression",batch:"//ev.stellarlabs.ai/batch",click:"//ev.stellarlabs.ai/click",user:"//ev.stellarlabs.ai",cdn:"//cdn01.stellarlabs.ai",productSet:"//ev.stellarlabs.ai/productset",products:"//ev.stellarlabs.ai/products",recs:"//ev.stellarlabs.ai/recs",recsBatch:"//ev.stellarlabs.ai/recsBatch",recsEvent:"//ev.stellarlabs.ai/recsEvent",admin:"//app.gravityfield.ai/api/v1/preview",syncSegments:"//ev.stellarlabs.ai/aud",affinity:"//ev.stellarlabs.ai/affinity",ads:"//srv.gravityads.ai"},t={section:null,pageContext:null,geo:{},trafficSource:null,waiters:{}},n=new class{makeRequest(e,s){return new Promise((function(n,i){var o=new XMLHttpRequest;o.open(e.method,e.url,!0),s&&(o.withCredentials=!0),(e.url.includes("//ev.stellarlabs.ai")||e.url.includes("//srv.gravityads.ai"))&&o.setRequestHeader("section_id",t.section),o.onload=function(){o.status>=200&&o.status<300?n(o.response):i({status:o.status,statusText:o.statusText,response:o.response})},o.onerror=function(){i({status:o.status,statusText:o.statusText})},e.headers&&Object.keys(e.headers).forEach((function(t){o.setRequestHeader(t,e.headers[t])}));var a=e.params;a&&"object"==typeof a&&e.headers&&e.headers["content-type"]&&"application/json"===e.headers["content-type"]?a=JSON.stringify(a):a&&"object"==typeof a&&(a=Object.keys(a).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])})).join("&")),o.send(a)}))}get(e,t){return this.makeRequest({method:"GET",url:e},t)}post(e,t,s,n){return this.makeRequest({method:"POST",url:e,params:t,headers:s},n)}},i=new class{isDefined(e){return null!=e}getSecondLevelDomain(){try{if(document.domain.split(".").length<=2||/^([0-9]+\.){3}[0-9]+$/.test(document.domain))return document.domain;var e=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]{2,2}\.[-\w]{2})$/i.exec(document.domain);if(!e)return document.domain;var t=e[0],s=t.split(".");if(3===s.length){var n=s[2],i=s[1];if(["ru","de"].indexOf(n)>-1)return["ac","co","com","net","tp","gov","edu","int","ltd","mil","org","pp","msk"].indexOf(i)>-1?t:[i,n].join(".")}return t}catch(e){return document.domain}}random(){const e=new Uint32Array(1);return(window.crypto||window.msCrypto).getRandomValues(e),e[0]/4294967296}},o=new class{constructor(){this.localStorage="localStorage",this.cookieStorage="cookieStorage",this.sessionStorage="sessionStorage",this.dataMap={},this._storages={},this.secondLevelDomain=i.getSecondLevelDomain(),this.init()}get(e,t,s){if(!i.isDefined(t))return null;"string"==typeof t&&(t=[t]);for(let n=0;n<t.length;n++){let o=this._storages[t[n]].getItem(e,s);if(i.isDefined(o))return o}return null}set(e,t,s,n){if(!i.isDefined(s))return null;"string"==typeof s&&(s=[s]);for(let i=0;i<s.length;i++)this._storages[s[i]].setItem(e,t,n)}getInternal(e){const t=this.dataMap[e];return i.isDefined(t)?this.get(t.key,t.storages,t.options):null}setInternal(e,t){const s=this.dataMap[e];if(i.isDefined(s))for(let e=0;e<s.storages.length;e++)this._storages[s.storages[e]].setItem(s.key,t,s.options)}removeInternal(e){const t=this.dataMap[e];if(i.isDefined(t))for(let e=0;e<t.storages.length;e++)this.remove(t.key,[t.storages[e]])}remove(e,t){if(i.isDefined(t)){"string"==typeof t&&(t=[t]);for(let s=0;s<t.length;s++)this._storages[t[s]].removeItem(e)}}init(){this.dataMap={uid:{key:"_slid",storages:[this.cookieStorage,this.localStorage],options:{domain:this.secondLevelDomain,expires:31536e3}},uid_server:{key:"_slid_server",storages:[this.cookieStorage],options:{domain:this.secondLevelDomain,expires:31536e3}},session:{key:"_slsession",storages:[this.cookieStorage,this.localStorage,this.sessionStorage],options:{domain:this.secondLevelDomain,expires:1800}},preview:{key:"_slpreview",storages:[this.sessionStorage]},helper:{key:"_sl_helper",storages:[this.cookieStorage],options:{domain:this.secondLevelDomain,expires:1800}},inspector:{key:"_sl_inspector",storages:[this.cookieStorage],options:{domain:this.secondLevelDomain,expires:1800}},aud:{key:"_slaud",storages:[this.localStorage]},log:{key:"_sllog",storages:[this.localStorage]},freq:{key:"_slfreq",storages:[this.cookieStorage,this.localStorage],options:{domain:this.secondLevelDomain,expires:31536e3}},fs:{key:"_slfs",storages:[this.cookieStorage],options:{domain:this.secondLevelDomain,expires:7200}},lp:{key:"_sllp",storages:[this.localStorage]}},this._storages.localStorage={getItem:e=>localStorage.getItem(e),setItem:(e,t)=>localStorage.setItem(e,t),removeItem:e=>localStorage.removeItem(e)},this._storages.sessionStorage={getItem:e=>sessionStorage.getItem(e),setItem:(e,t)=>sessionStorage.setItem(e,t),removeItem:e=>sessionStorage.removeItem(e)},this._storages.cookieStorage=new class{getItem(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}setItem(e,t,s){var n=(s=s||{}).expires,o=i.getSecondLevelDomain();if(s.domain=s.domain||"."+o,"number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=s.expires=a}n&&n.toUTCString&&(s.expires=n.toUTCString()),s.path="/";var r=e+"="+(t=encodeURIComponent(t));for(var c in s)if(s.hasOwnProperty(c)){r+="; "+c;var l=s[c];!0!==l&&(r+="="+l)}document.cookie=r}removeItem(e){this.setItem(e,null,{expires:-1})}}}},a=new class{constructor(){this.isEnabled=o.getInternal("log")||!1}enable(){this.isEnabled=!0,o.setInternal("log",!0)}disable(){this.isEnabled=!1,o.removeInternal("log")}error(e,t){this.isEnabled&&console.error(e,t)}warn(e,t){this.isEnabled&&console.warn(e,t)}info(e,t){this.isEnabled&&console.log(e,t)}},r=(e,t,s)=>{for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t&&!1===t.call(s,e[n],n,e))return;return e},c=(e,t,s)=>{const n=s._pubsub_topics,i=n[e]?[...n[e]]:[];for(let n=0,o=i.length;n<o;n+=1){const o=i[n].token,a=i[n];if(s._options.immediateExceptions)a.callback(t,{name:e,token:o});else try{a.callback(t,{name:e,token:o})}catch(e){setTimeout((()=>{throw e}),0)}!0===a.once&&s.unsubscribe(o)}},l=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return s.length<=1?s[0]:[...s]},d=(e,t,s,n)=>!!e._pubsub_topics[t]&&(n?c(t,s,e):setTimeout((()=>{c(t,s,e)}),0),!0);class u{constructor(e){this._pubsub_topics={},this._pubsub_uid=-1,this._options={immediateExceptions:!1,...e}}subscribe(e,t,s){const n=this._pubsub_topics,i=this._pubsub_uid+=1,o={};if("function"!=typeof t)throw new TypeError("When subscribing for an event, a callback function must be defined.");return n[e]||(n[e]=[]),o.token=i,o.callback=t,o.once=!!s,n[e].push(o),i}subscribeOnce(e,t){return this.subscribe(e,t,!0)}publish(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return d(this,e,l(e,...s),!1)}publishSync(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return d(this,e,l(e,...s),!0)}unsubscribe(e){const t=this._pubsub_topics;let s=!1;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]){let i=t[n].length;for(;i;){if(i-=1,t[n][i].token===e)return t[n].splice(i,1),0===t[n].length&&delete t[n],e;n===e&&(t[n].splice(i,1),0===t[n].length&&delete t[n],s=!0)}if(!0===s)return e}return!1}unsubscribeAll(){return this._pubsub_topics={},this}hasSubscribers(e){const t=this._pubsub_topics;let s=!1;return null==e?(r(t,((e,t)=>{if(t)return s=!0,!1})),s):Object.prototype.hasOwnProperty.call(t,e)}subscribers(){const e={};return r(this._pubsub_topics,((t,s)=>{e[s]=[...t]})),e}subscribersByTopic(e){return this._pubsub_topics[e]?[...this._pubsub_topics[e]]:[]}alias(e){return r(e,((t,s)=>{var n,i;u.prototype[s]&&(u.prototype[e[s]]=(n=s,i=this,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i[n].apply(i,t)}))})),this}}u.createInstance=e=>new u(e);const h=(new u).alias({subscribe:"on",subscribeOnce:"once",publish:"trigger",publishSync:"triggerSync",unsubscribe:"off",hasSubscribers:"has"}),p=()=>{const e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,s,n){e[s]=n})),e},g=()=>{const e={},t=p(),s=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];for(let n in t)s.includes(n)&&(e[n]=t[n]);return e},m=function(e,t){let s=new Promise(((t,s)=>{let n=setTimeout((()=>{clearTimeout(n),s("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,s])},f=function(e){try{return eval.call(window,e)}catch(e){a.warn("Error with executing",e)}},v=function(e){const t=o.getInternal("session");return t&&t!==e&&o.removeInternal("fs"),!(t&&(!t||t===e)||(o.setInternal("lp",window.location.href),h.trigger("update_session"),0))},w=async(e,t,s,n,i)=>{s=s||1,b((()=>{try{const t=document.querySelectorAll(e);return t.length>=s&&t}catch(e){return-1}}),n,i).then(t).catch((()=>{}))},y=async(e,t,s)=>new Promise(((n,i)=>{"string"!=typeof e&&i();const o=e.split(".");b((()=>function(e,t){for(let s=0;s<t.length;s++){if(!e||!e.hasOwnProperty(t[s])||void 0===e[t[s]])return!1;e=e[t[s]]}return!0}(window,o)),t,s).then(n).catch((()=>{}))})),b=async(e,t,s)=>new Promise(((n,i)=>{let o=0;t=t||100;const a=setInterval((()=>{let t=e();-1===t?(clearInterval(a),i()):t?(clearInterval(a),n(t)):s&&o>=s?(clearInterval(a),i()):o++}),t)})),I=async e=>{const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map((e=>e.toString(16).padStart(2,"0"))).join("")},S=(e,t)=>Object.keys(e).filter((s=>t(e[s]))).reduce(((t,s)=>(t[s]=e[s],t)),{}),k=()=>{const e=new Uint32Array(1);return(window.crypto||window.msCrypto).getRandomValues(e),e[0]/4294967296},x=()=>{let e="";for(let t=0;t<8;t++)e+=k().toString(36).slice(-4);return e},C=class{constructor(e,t){this.onBatchReady=t,this.delay=e||100,this.timer=0,this.timerRunning=!1,this.requestsArray=[]}add(e){this.timerRunning||this.startTimer(),this.requestsArray.push(e)}startTimer(){this.timerRunning=!0,this.timer=setTimeout((()=>{this.timer=0,this.returnBatch(),this.requestsArray.length=0,this.stopTimer()}),this.delay)}stopTimer(){this.timerRunning=!1,clearTimeout(this.timer)}returnBatch(){this.onBatchReady(this.requestsArray)}},_=new class{constructor(){this.impressionBatch=new C(100,(e=>{this.logBatch(e)}))}logEngagementBatch(e){return this.impressionBatch.add({...e})}logBatch(t){const s={data:t,...this.getRequestBaseData()};n.post(`${e.ads}/batch`,s,{"content-type":"application/json"}).then().catch((e=>{a.error("batch failed",e)}))}logEngagement(t,s){const i={data:[t],...this.getRequestBaseData()};n.post(`${e.ads}/${s}`,i,{"content-type":"application/json"}).then().catch((e=>{a.error("batch failed",e)}))}getRequestBaseData(){return{user:{uid:t.uid||o.getInternal("uid"),aud:t.segments,tsrc:t.trafficSource},session:{ses:t.session||o.getInternal("session")},sec:t.section,ctx:{...t.pageContext,url:window.location.href,referrer:document.referrer&&!document.referrer.includes(document.domain)?document.referrer.split("?")[0]:null,utm:g()},device:{}}}getCampaigns(t){const s={...this.getRequestBaseData(),data:t.map((e=>({placementId:e,options:{isImplicitImpression:!0,returnAnalyticsMetadata:!0,exclude:!0}})))};return new Promise(((t,i)=>{n.post(`${e.ads}/choose`,s,{"content-type":"application/json"}).then((e=>{if(e)try{const s=JSON.parse(e);t(s||!1)}catch(e){i(e)}})).catch((e=>{i(e),a.error("get ads campaign failed",e)}))}))}},E=new class{equals(e,t){return e==t}notEquals(e,t){return e!=t}contains(e,t){try{return-1!==(e=e.toString()).indexOf(t)}catch(e){return!1}}notContains(e,t){try{return-1===(e=e.toString()).indexOf(t)}catch(e){return!1}}regexp(e,t){return new RegExp(t).test(e)}exists(e){return e&&void 0!==e&&""!==e}notExists(e){return!e}greaterThan(e,t){return parseFloat(e)>parseFloat(t)}greaterEquals(e,t){return parseFloat(e)>=parseFloat(t)}lowerThan(e,t,s){return parseFloat(e)<parseFloat(t)}lowerEquals(e,t,s){return parseFloat(e)<=parseFloat(t)}belongs(e,t){return!(!e||0===e.length)&&e.includes(t)}notBelongs(e,t){return!!e&&!e.includes(t)}match(e,t){switch(e.method.toLowerCase()){case"=":case"eq":case"equals":case"equal":return this.equals(t,e.value);case"not":case"not_equals":case"not_equal":return this.notEquals(t,e.value);case"contains":return Array.isArray(t)?this.belongs(t,e.value):this.contains(t,e.value);case"not_contains":return Array.isArray(t)?this.notBelong(t,e.value):this.notContains(t,e.value);case"regexp":return this.regexp(t,e.value);case"gt":case">":case"above":case"more":return this.greaterThan(t,e.value);case"lt":case"<":case"below":case"less":return this.lowerThan(t,e.value);case"gte":case"ge":case">=":case"more_or_equal":return this.greaterEquals(t,e.value);case"lte":case"le":case"<=":case"less_or_equal":return this.lowerEquals(t,e.value);case"exists":return this.exists(e.value);case"not_exist":return this.notExists(e.value);case"belongs":case"belongs_to":return this.belongs(t,e.value);case"not_belong":case"not_belong_to":return this.notBelong(t,e.value);default:return!1}}},L=(e,t)=>new Promise((async(s,n)=>{for(const n of e)try{await T(n,t)}catch(e){return s(!1)}s(!0)})),P=(e,t)=>{for(let s=0;s<e.length;s++)if(E.match(e[s],t))return!0;return!1},T=(e,s)=>{const n=!!s,i=(a=s)?a&&"1_day"===a?"day":a&&"current_session"===a?"ses":a?"hist":void 0:"ses";var a;return new Promise(((s,a)=>{switch(e.type){case"City":{var r;const n=null===(r=t.geo)||void 0===r?void 0:r.city_id;P(e.conds,n)?s(!0):a(!1);break}case"Country":{var c;const n=null===(c=t.geo)||void 0===c?void 0:c.country_iso;P(e.conds,n)?s(!0):a(!1);break}case"TrafficSource":{const n=t.trafficSource;P(e.conds,n)?s(!0):a(!1);break}case"Region":{var l;const n=null===(l=t.geo)||void 0===l?void 0:l.region_iso;P(e.conds,n)?s(!0):a(!1);break}case"DeviceCategory":{var d;const n=null===(d=t.deviceInfo)||void 0===d?void 0:d.type;P(e.conds,n)?s(!0):a(!1);break}case"OperatingSystem":{var u;const n=null===(u=t.deviceInfo)||void 0===u?void 0:u.os;P(e.conds,n)?s(!0):a(!1);break}case"PageType":{var h;const n=null===(h=t.pageContext)||void 0===h?void 0:h.type;P(e.conds,n)?s(!0):a(!1);break}case"CategoryPage":{var p,g;const n=null===(p=t.pageContext)||void 0===p?void 0:p.data;if("CATEGORY"===(null===(g=t.pageContext)||void 0===g?void 0:g.type)&&n&&n.length){const t=n[n.length-1];P(e.conds,t)?s(!0):a(!1)}else a(!1);break}case"CartPage":{var m,v;const n=null===(m=t.pageContext)||void 0===m?void 0:m.data;"CART"===(null===(v=t.pageContext)||void 0===v?void 0:v.type)&&n&&P(e.conds,n)?s(!0):a(!1);break}case"SearchPage":{var w,b;const n=null===(w=t.pageContext)||void 0===w?void 0:w.data;"SEARCH"===(null===(b=t.pageContext)||void 0===b?void 0:b.type)&&n&&n[0]&&P(e.conds,n[0])?s(!0):a(!1);break}case"Audience":if(n){const t=[];for(let s=0;s<e.conds.length;s++){const{value:n,method:i}=e.conds[s],o=window.SL.Segments[n];if(o){const e=new Promise(((e,t)=>{$.check(o).then((s=>{"belongs"===i&&s||"not_belong"===i&&!1===s?e(!0):t(!1)}))}));t.push(e)}}if(t.length){Promise.any(t).then((()=>{s(!0)})).catch((()=>{a(!1)}));break}a(!1);break}P(e.conds,t.segments)?s(!0):a(!1);break;case"Browser":P(e.conds,t.browser)?s(!0):a(!1);break;case"NewUser":{const t=o.getInternal("fs")?"1":"0";P(e.conds,t)?s(!0):a(!1);break}case"LandingURL":{const t=o.getInternal("lp");P(e.conds,t)?s(!0):a(!1);break}case"URL":const{host:I,pathname:S,search:k,hash:x}=window.location;let C=I+S+k+x,_=!1;for(let t=0;t<e.conds.length;t++)if(e.conds[t].ignoreURLParams&&(C=C.split("?")[0]),E.match(e.conds[t],C)){_=!0;break}_?s(!0):a(!1);break;case"Cookie":{let t,n=!1;for(let s=0;s<e.conds.length;s++)if(t=o.get(e.conds[s].key,["cookieStorage"])||!1,e.conds[s].method.includes("exist")&&(e.conds[s].value=t),E.match(e.conds[s],t)){n=!0;break}n?s(!0):a(!1);break}case"ProductPopularityPurchases":case"ProductPopularityViews":{const t=e.type.includes("Purchases")?"purchase":"view";y(`window.SL.productInterest.${t}`,100,40).then((()=>{let n=!1;for(let s=0;s<e.conds.length;s++){let i=e.conds[s].key,o=window.SL.productInterest[t][i];if(E.match(e.conds[s],o)){n=!0;break}}n?s(!0):a(!1)}));break}case"Evaluator":const L=[];for(let t=0;t<e.conds.length;t++){const{key:s,value:n,method:i}=e.conds[t],o=window.SL.evals[s];if(o){const e=new Promise(((e,t)=>{const s=f(o.code);s&&"function"==typeof s.then?s.then((t=>{e({result:t,cond:{value:n,method:i}})})):e({result:s,cond:{value:n,method:i}})}));L.push(e)}}if(L.length){Promise.allSettled(L).then((e=>{let t=!1;for(let s=0;s<e.length;s++)if(void 0!==e[s].value.result&&E.match(e[s].value.cond,e[s].value.result.toString())){t=!0;break}t?s(!0):a(!1)}));break}a(!1);break;case"ProductPage":y("window.SL.pageDataLoaded",100,40).then((()=>{let n,i=!1;for(let s=0;s<e.conds.length;s++){var o;if(n=e.conds[s].type,"any_product"===n&&"PRODUCT"===(null===(o=t.pageContext)||void 0===o?void 0:o.type)){i=!0;break}const a=e.conds[s].value;let r=0;for(let e=0;e<a.length;e++){let t=a[e].key,s=window.SL.pageData[t];if(void 0===s)break;{const i={...a[e]};"categories"!==t&&"keywords"!==t||(i.method="equal"===i.method?"belongs":"not_belong");let o=E.match(i,s);if("product_with_property"===n&&o)r++;else{if("product_without_property"!==n||o)break;r++}}}if(r==a.length){i=!0;break}}i?s(!0):a(!1)}));break;case"ProductsViewed":case"ProductsPurchased":case"ProductsAddedToCart":case"NumberOfPageviews":case"URLVisit":case"EventTriggerByProperty":case"EventTrigger":case"CategoryPageVisit":case"SearchPageVisit":case"HomePageVisit":case"CartPageVisit":{let n=!1;for(let s=0;s<e.conds.length;s++){const{id:o,type:a,count:r,countMethod:c,value:l}=e.conds[s];if(!t.hits[i])continue;const d=t.hits[i][o]?t.hits[i][o]:0;if(E.match({method:c,value:r},d)){n=!0;break}}n?s(!0):a(!1);break}case"ChurnProbability":{let n=!1;for(let s=0;s<e.conds.length;s++){const{id:i,count:o,countMethod:a}=e.conds[s];if(!t.hits.churn||!t.hits.churn[i])continue;const r=t.hits.churn[i];if(E.match({method:a,value:o},r)){n=!0;break}}n?s(!0):a(!1);break}case"TotalPurchaseValue":{let n=!1;for(let s=0;s<e.conds.length;s++){const{id:o,method:a,value:r}=e.conds[s];if(!t.hits[i]||void 0===t.hits[i][o])continue;const c=t.hits[i][o];if(E.match(e.conds[s],c)){n=!0;break}}n?s(!0):a(!1);break}default:a(!1)}}))},$=new class{constructor(){this._countable=[]}getCurrent(){return t.segments}check(e){const{lookback_window:t,conditions:s}=e;return L(s,t)}async rebuild(){const e=this._countable,s=window.SL.Segments;if(!e.length)return;const n=[];for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])&&await this.check(s[e[t]])&&n.push(e[t]);const i=[...t.segments];return t.segments=[...new Set([...t.segments.filter((t=>!e.includes(t))),...n])],((e,t)=>{const s=e.slice().sort(),n=t.slice().sort();return s.length===n.length&&s.every(((e,t)=>e===n[t]))})(i,t.segments)||A.syncSegments(),t.segments}async build(){const e=window.SL.Segments,s=[];for(let t in e)e.hasOwnProperty(t)&&(e[t].type&&this._countable.push(t),await this.check(e[t])&&s.push(t));return t.segments=[...new Set([...t.segments,...s])],t.segments}},A=new class{constructor(){this.impressionBatch=new C(100,(e=>{this.logBatch(e)})),this.affinity={isThrottled:!1,promise:null}}getEventBaseData(){return{uid:t.uid||o.getInternal("uid"),ses:t.session||o.getInternal("session"),sec:t.section,url:window.location.href,ctx:t.pageContext,aud:t.segments,tsrc:t.trafficSource,reqts:(new Date).getTime()+t.timeDiff}}logEvent(s,i){const r={...this.getEventBaseData(),...s},c=i?e[i]:e.event;"page"===i&&delete window.SL.pageDataLoaded,n.post(`${c}`,r,{"content-type":"application/json"}).then((e=>{if(e)try{var n;const s=JSON.parse(e);"page"===i&&(t.pageData=window.SL.pageData={},t.productInterest=window.SL.productInterest={}),s.uid&&o.setInternal("uid",s.uid),s.ses&&(v(s.ses),t.session=s.ses,o.setInternal("session",s.ses)),null!=s&&null!==(n=s.pageData)&&void 0!==n&&n.length&&(t.pageData=window.SL.pageData=s.pageData[0]),null!=s&&s.productInterest&&(t.productInterest=window.SL.productInterest=s.productInterest),"page"===i&&(window.SL.pageDataLoaded=!0);let a={};if(s.cond_hits_day&&(a.day=s.cond_hits_day),s.cond_hits_ses&&(a.ses=s.cond_hits_ses),s.hits&&(a=s.hits),Object.keys(a).length>0){if(t.hits){for(let e in t.hits)if(void 0!==a[e]&&a.hasOwnProperty(e)&&(t.hits[e]={...t.hits[e],...a[e]},"day"===e))for(let s in a[e])0===t.hits.hist.length&&(t.hits.hist={}),t.hits.hist[s]?t.hits.hist[s]=Number(t.hits.hist[s])+1:t.hits.hist[s]=1}else t.hits=a;$.rebuild()}}catch(e){}h.trigger("sl-event-internal",{data:s,response:e,type:i})})).catch((e=>{h.trigger("sl-event-internal",{data:s,response:e,type:i}),a.error("event failed",e)}))}logPageView(e){this.logEvent({cap:1,name:"pageview",...e},"page")}logClick(e){this.logEngagement(e,"click")}logBatch(t){const s={data:t,...this.getEventBaseData()};n.post(`${e.batch}`,s,{"content-type":"application/json"}).then().catch((e=>{a.error("batch failed",e)}))}logEngagement(t,s){if("impression"===s||"WRIMP"===s)return this.impressionBatch.add({...t,type:s});const i=this.getEventBaseData(),o={...t,...i};delete o.exps,n.post(`${e[s]}`,o,{"content-type":"application/json"}).then().catch((e=>{a.error("eng failed",e)}))}syncSegments(){const s={uid:o.getInternal("uid"),ses:o.getInternal("session"),sec:t.section,seg:t.segments.reduce(((e,t,s)=>{if(window.SL.Segments[t]){const s="current_session"===window.SL.Segments[t].lookback_window?0:1;e[t]=s}return e}),{})};n.post(`${e.syncSegments}`,s,{"content-type":"application/json"}).then().catch((e=>{a.error("imp failed",e)}))}logRecsEvent(t){const s={...this.getEventBaseData(),...t};n.post(e.recsEvent,s,{"content-type":"application/json"}).then().catch((e=>{a.error("recsEvent failed",e)}))}getProductSets(s){if(!s||!s.length)return!1;const i={sec:t.section,ids:s};return t.pageContext.lng&&(i.lng=t.pageContext.lng),new Promise(((t,s)=>{n.post(`${e.productSet}`,i,{"content-type":"application/json"}).then((e=>{if(e)try{const s=JSON.parse(e);s.productsets?t(s.productsets):t(!1)}catch(e){s(!1)}})).catch((e=>{s(!1),a.error("productset failed",e)}))}))}getProductsData(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((o,r)=>{if(!s||!s.length)return o(!1);const c={sec:t.section,ids:s,includeProductInterest:i.interest,includeProductData:i.data,timeframes:i.timeframes};t.pageContext.lng&&(c.lng=t.pageContext.lng),n.post(`${e.products}`,c,{"content-type":"application/json"}).then((e=>{if(e)try{const t=JSON.parse(e);o(t||!1)}catch(e){r(e)}})).catch((e=>{r(e),a.error("productsData failed",e)}))}))}getRecommendationsBatch(s,i){const r={uid:o.getInternal("uid"),ses:o.getInternal("session"),sec:t.section,data:s,options:i};return new Promise(((t,s)=>{n.post(`${e.recsBatch}`,r,{"content-type":"application/json"}).then((e=>{if(e)try{const s=JSON.parse(e);t(s)}catch(e){s(!1)}})).catch((e=>{s(e),a.error("recsBatch failed",e)}))}))}getRecommendations(s,i){const r={uid:o.getInternal("uid"),ses:o.getInternal("session"),sec:t.section,id:s,options:i};return new Promise(((t,i)=>{n.post(`${e.recs}?id=${s}`,r,{"content-type":"application/json"}).then((e=>{if(e)try{const s=JSON.parse(e);t(s)}catch(e){i(!1)}})).catch((e=>{i(e),a.error("recs failed",e)}))}))}getUserData(){const s=o.getInternal("uid_server")||o.getInternal("uid"),i=o.getInternal("session"),a=o.getInternal("lp"),r={sec:t.section};document.referrer&&!document.referrer.includes(document.domain)&&(r.referrer=document.referrer.split("?")[0]),s&&"undefined"!==s&&(r.uid=s),i&&"undefined"!==i&&(r.ses=i),a&&i||o.setInternal("lp",window.location.href);const c=g(),l=new URLSearchParams({...r,...c}).toString(),d=`${e.user}/?${l}`;return n.get(d,!0)}getVariationPreview(s){const i={sec:t.section,uuid:s},o=new URLSearchParams(i).toString(),a=`${e.admin}?${o}`;return n.get(a)}getAffinity(){if(this.affinity.isThrottled)return this.affinity.promise;this.affinity.isThrottled=!0;const s={sec:t.section,uid:t.uid},i=new URLSearchParams(s).toString(),o=`${e.affinity}?${i}`;return this.affinity.promise=new Promise(((e,t)=>{n.get(o).then((s=>{try{e(JSON.parse(s))}catch(e){t({})}})).catch((()=>{t({})}))})),this.affinity.promise.finally((()=>{setTimeout((()=>{this.affinity.isThrottled=!1}),200)})),this.affinity.promise}},D=class{constructor(e,t,s){this.onProductImpression=s,this.elements=Array.from(e).map(((e,t)=>(e.gfImpressionId=e.dataset.slProductId||t,e))),this.delay=t||1e3,this.timeouts={},this.timer=0,this.timerRunning=!1,this.impressionsArray=[],this.elements.length&&(this.observeImpression(),this.threshold=this.getThreshold(e[0]))}getThreshold(e){const t=window.innerHeight/e.clientHeight;return t&&t<.6?Math.min(1,.5*t):.5}observeImpression(){const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting?this.timeouts[e.target.gfImpressionId]=setTimeout((()=>{Array.from(this.elements).filter((t=>t.gfImpressionId===e.target.gfImpressionId)).forEach((e=>t.unobserve(e))),this.impressionsArray.includes(e.target)||this.arrayPush(e.target)}),this.delay):clearTimeout(this.timeouts[e.target.gfImpressionId])}))}),{threshold:this.threshold});this.elements.forEach((t=>{e.observe(t)}))}arrayPush(e){this.timerRunning||this.startTimer(),this.impressionsArray.push(e)}startTimer(){this.timerRunning=!0,this.timer=setTimeout((()=>{this.timer=0,this.report(),this.impressionsArray.length=0,this.stopTimer()}),100)}stopTimer(){this.timerRunning=!1,clearTimeout(this.timer)}report(){this.onProductImpression(this.impressionsArray)}};function O(e,t){e.adSets=e.adSets||{};const s={};t.forEach((t=>{const n=t.dataset.slProductSlot||t.dataset.slotId;t.gfWidgetId=e.gfUniqueId;const i=Number(n),o=t.dataset.slCampaignId,a=t.dataset.slAdsetId;e.adSets[a]||(e.adSets[a]={adsetId:t.dataset.slAdsetId,creativeId:t.dataset.slCreativeId,testId:t.dataset.slTestId,strategyId:t.dataset.slSid,fallback:"true"===t.dataset.slFallback,placementId:t.dataset.slPlacementId,campaignId:o,feedId:t.dataset.slFeedId||e.dataset.slFeedId,widgetId:t.gfWidgetId,pid:t.dataset.slPid?Number(t.dataset.slPid):void 0},_.logEngagementBatch({...e.adSets[a],type:"WRIMP"}));const r={sku:t.dataset.slProductId,fallback:Boolean(t.dataset.slProductFallback)||!1,slotId:i>-1?i:null,strId:Number(t.dataset.slStrategyId)||null};s[t.dataset.slAdsetId]?s[t.dataset.slAdsetId].push(r):s[t.dataset.slAdsetId]=[r]})),Object.keys(s).forEach((t=>{const n={...e.adSets[t],slots:s[t],type:"PIMP"};_.logEngagementBatch(n)}))}function R(e,t){const s=e.target.closest("[data-sl-product-id]"),n=s.dataset,i=n.slProductSlot||n.slotId,o=Number(i),a={adsetId:n.slAdsetId,creativeId:n.slCreativeId,testId:n.slTestId,campaignId:n.slCampaignId,placementId:n.slPlacementId,widgetId:s.gfWidgetId,pid:n.slPid?Number(n.slPid):void 0};_.logEngagementBatch({...a,strategyId:n.slSid,feedId:n.slFeedId||t||null,fallback:"true"===n.slFallback,slots:[{sku:n.slProductId,fallback:"true"===n.slProductFallback||!1,slotId:o>-1?o:null,strId:Number(n.slStrategyId)||null}],type:"PCLICK"}),_.logEngagementBatch({...a,type:"ADCLICK"})}const M=new class{get(e){let s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!e||0===e.length||"function"!=typeof i||!i)return!1;if(n.context||(n.context=t.pageContext),"string"==typeof e)s=A.getRecommendations(e,n);else{if(!Array.isArray(e))return!1;{const t=e.map((e=>"string"==typeof e?{id:e}:e)).filter((e=>!!e.id));if(!t.length)return!1;s=A.getRecommendationsBatch(t,n)}}s.then((e=>{try{i(!1,e)}catch(e){a.error("recs callback failed",e)}})).catch((e=>i(e,null)))}track(e,t){if(!e)return!1;if(e.executed)return!1;e.executed=!0,e.gfUniqueId=x();const s=e.querySelectorAll("[data-sl-product-id]"),n=e.dataset.slExternal&&"true"===e.dataset.slExternal,i={wId:e.dataset.slWidgetId||null,fId:e.dataset.slFeedId||null,campaignId:(null==t?void 0:t.cam)||e.dataset.slCampaignId||null,experienceId:(null==t?void 0:t.exp)||e.dataset.slExperienceId||null,versionId:(null==t?void 0:t.ver)||e.dataset.slVersionId||null,variationId:(null==t?void 0:t.var)||e.dataset.slVariationId||null,external:n,widgetId:e.gfUniqueId},o=Boolean(e.dataset.slFallback)||!1;A.logRecsEvent({data:[{...i,type:"WIMP",fallback:o}]}),new D(s,1e3,(t=>{const s=[],n=t.map((e=>{const t=e.dataset.slProductSlot||e.dataset.slotId,n=Number(t);return e.dataset.slCreativeId&&s.push(e),{sku:e.dataset.slProductId,fallback:"true"===e.dataset.slProductFallback,slotId:n>-1?n:null,strId:Number(e.dataset.slStrategyId)||null}}));e.wrimp||(e.wrimp=!0,A.logRecsEvent({data:[{...i,type:"WRIMP",fallback:o}]}),e.dispatchEvent(new CustomEvent("gf_wrimp",{detail:{slots:n}})));let a={...i,slots:n,type:"PIMP"};A.logRecsEvent({data:[a]}),s.length&&O(e,s)})),Array.from(s).map((e=>{e.addEventListener("click",(e=>{const{slProductId:t,slProductFallback:s,slProductSlot:n,slStrategyId:o,slotId:a,slCreativeId:r}=e.target.closest("[data-sl-product-id]").dataset;A.logRecsEvent({data:[{...i,slots:[{sku:t,fallback:"true"===s,slotId:Number(n)||Number(a)||null,strId:Number(o)||null}],type:"PCLICK"}]}),r&&R(e,i.fId)}))}))}impression(){}},j=(e,t,s)=>{const n=s.slots,i=`{{${t}}}`,o=(e=N(e,i,s)).indexOf(i),a=e.lastIndexOf(i),r=e.slice(o+i.length,a),c=(null==n?void 0:n.length)>0?((e,t,s)=>{let n="";const i=e.indexOf(">");for(let s=0;s<t.length;s++)n+=q(e,t[s],s,i).replace(/{{([^{}]+)}}/g,(function(e,n){return void 0!==t[s].item[n]?t[s].item[n]:""}));return n})(r,n):"";return e.slice(0,o)+c+e.slice(a+i.length)},q=(e,t,s,n)=>{let i=[{key:"product-fallback",value:t.fallback},{key:"product-id",value:t.item.sku},{key:"strategy-id",value:t.strId},{key:"product-slot",value:s}];t.creative_id&&i.push({key:"creative-id",value:t.creative_id},{key:"adset-id",value:t.adset_id},{key:"campaign-id",value:t.campaign_id},{key:"test-id",value:t.test_id},{key:"sid",value:t.strategy_id},{key:"feed-id",value:t.feed_id},{key:"fallback",value:t.fallback},{key:"placement-id",value:t.placement_id},{key:"pid",value:t.priority_id});const o=i.map((e=>`data-sl-${e.key}="${void 0!==e.value?e.value:""}"`)).join(" ");return-1!==n?e.slice(0,n)+" "+o+e.slice(n):e},N=(e,t,s)=>{const n=[{key:"widget-id",value:s.wId||null},{key:"feed-id",value:s.fId||null},{key:"fallback",value:s.fallback},{key:"external",value:!1}].map((e=>`data-sl-${e.key}="${e.value}"`)).join(" "),i=B(e,t),o=i[0].lastIndexOf(">");return-1===o?e:H(i[0],n,o)+t+i[1]},B=(e,t)=>{var s=e.indexOf(t);return-1!==s?[e.substring(0,s),e.substring(s+t.length)]:[e,""]},H=(e,t,s)=>e.slice(0,s)+t+e.slice(s);function U(e,t,s){if(!e)return null;let n={dyVariationId:t.variationId,dyTagId:t.campaignId,dyExperienceId:t.experienceId,slVariationId:t.variationId,slTagId:t.campaignId,slExperienceId:t.experienceId,slVersionId:t.versionId,slExperienceName:t.experienceName,slCampaignName:t.campaignName,slVariationName:t.variationName,slClickObj:JSON.stringify({var:[t.variationId],ver:t.versionId,exp:t.experienceId,cam:t.campaignId})};return n.gfTrackObj=n.slClickObj,s&&(n={...n,...s}),function(e,t){var s=e;for(var n in t)t.hasOwnProperty(n)&&("object"==typeof t[n]&&t[n]&&t[n].period&&(t[n]=window.SL.productInterest&&window.SL.productInterest[t[n].type]?window.SL.productInterest[t[n].type][t[n].period]:0),s=s.replace(new RegExp("\\${"+n+"}|\\{{"+n+"}}","g"),t[n]));return s}(e,n)}function V(e,t,s){const{recsVariables:n,htmlCode:i}=e;let o="";return o=U(i,{},t),n&&s&&(Object.keys(n).forEach((e=>{o=o.replaceAll(`{{${e}}}`,`{{${n[e]}}}`)})),o=j(o,"Recommendations",{slots:s})),o}function F(e,t,s){if(!s)return e;/^(?:f|ht)tps?:\/\//i.test(e)||(e=`${window.location.protocol}//${window.location.host}${e}`);const n=new URL(e);return n.searchParams.append(t,s),n.toString()}class W extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.desktopImage&&this.desktopImage.includes("index.html"),t=this.mobileImage&&this.mobileImage.includes("index.html");F(this.link,"erid",this.erid);let s="";(e||t)&&(s+=`<div class="wrapper"></div><iframe scrolling="no" seamless frameborder="0" src="${this.desktopImage||this.mobileImage}"></iframe>`),e||t||(s=`<img src="${this.desktopImage||this.mobileImage}">`),this.shadowRoot.innerHTML=`\n      <style>\n        a {\n          text-decoration: none;\n        }\n        img {\n          max-width: 100%;\n        }\n        img, iframe, .wrapper {\n          width:${this.desktopWidth?`${this.desktopWidth}px`:"100%"};\n          height:${this.desktopHeight?`${this.desktopHeight}px`:"100%"};\n        }\n        .wrapper {position:absolute;z-index:1;}\n        .relative {position:relative;}\n        @media (max-width: 767px) {\n          img, iframe {\n            content: url(${this.mobileImage||this.desktopImage});\n          }\n          img, iframe, .wrapper {\n            width:${this.mobileWidth?`${this.mobileWidth}px`:"100%"};\n            height:${this.mobileHeight?`${this.mobileHeight}px`:"100%"};\n          }\n        }\n      </style>\n      <div class="relative"><a href="${this.updatedLink}" target="_blank">${s}</a></div>\n      \n    `}}function z(e,t,s){if(!window.IntersectionObserver)return;const n={threshold:(null==s?void 0:s.threshold)||.5};new IntersectionObserver((function(e,s){e[0].isIntersecting&&(t(),s.disconnect())}),n).observe(e)}function J(e,t,s,n){let i=null;try{i=document.querySelector(e)}catch(e){return!1}if(!i)return!1;const o="string"==typeof s,a=o?document.createElement("div"):s;if(a.className="sl-observable-unit",o&&(a.innerHTML=s),n&&Object.keys(n).forEach((e=>{a.setAttribute(`data-sl-${e}-id`,n[e])})),"replace"===t){if(0===s.length)return i;i.parentNode.replaceChild(a,i)}else"after"===t?i.after(a):"before"===t&&i.before(a);return a}function G(e){const t=e.nextElementSibling;return!t&&e.parentElement?G(e.parentElement):t}window.customElements&&customElements.define("gravity-banner",W);const Y=class{constructor(){this.templates=window.SL.adTemplates,this.placements=window.SL.Placements,this.creatives=window.SL.Creatives,this.clients=window.SL.adClients||{},this.spaPlacements=S(this.placements,(e=>null==e?void 0:e.isSpa)),this.run()}findElements(e){let t=[],s=null;const n=this;return function i(){for(let s=0;s<e.length;s++)try{const n=document.querySelector(e[s].cssSelector);n&&(t.push({id:e[s].id,element:n}),e.splice(s,1),s--)}catch(t){a.info(`Placement: invalid selector ${e[s].cssSelector}`)}t.length>0&&(n.getCampaigns(t),t=[]),e.length>0?s=setTimeout(i,100):clearTimeout(s)}(),()=>{clearTimeout(s)}}async checkPlacements(e){const t=[],s=Object.keys(e).map((s=>{const n=e[s];return L(n.target).then((e=>{e&&"inline"!==n.type&&t.push({id:s,cssSelector:n.cssSelector})}))}));await Promise.all(s),t.length&&this.findElements(t,this.getCampaigns)}getCampaigns(e){const t=this;_.getCampaigns(e.map((e=>e.id))).then((e=>{const{choices:s}=e;s&&s.length&&s.forEach((e=>{t.execute(e)}))}))}execute(e){const t=e.id,s=this.placements[t],{format:n,type:i,template:o,cssSelector:a,insertMethod:r}=s,c=this.getCode(s,o),{variables:l={},cssCode:d,jsCode:u}=c,h=e.adsets;if(!h)try{const e=G(document.querySelector(a));return void(e&&function(e,t){if(!e)return!1;if(e.executed)return!1;e.executed=!0;const s={placementId:t};z(e,(()=>{_.logEngagement({...s,type:"WRIMP"},"impression")}),{threshold:.01})}(e,t))}catch(e){return}const p=h[0].creative_id;let g=l&&this.creatives[p]&&this.creatives[p][t]?{...l,...this.creatives[p][t].variables}:l;const m=this.creatives[p].client;let v;m&&(g={...g,ordInn:this.clients[m].inn,ordTitle:this.clients[m].title});let w={};if("RecommendationWidget"===n){const e=function(e,t,s){let n=[];return e.forEach((e=>{e.payload&&e.payload.data&&e.payload.data.slots&&(n=n.concat(e.payload.data.slots.map((n=>{var i;return n.adset_id=e.adset_id,n.creative_id=e.creative_id,n.campaign_id=e.campaign_id,n.strategy_id=e.strategy_id,n.test_id=e.test_id,n.fallback=e.fallback,n.feed_id=e.feed_id,n.placement_id=t,n.priority_id=e.pid,n.item=n.productData,n.item.url=F(n.productData.url,"erid",null===(i=s[e.creative_id])||void 0===i?void 0:i.erid),n}))))})),n}(h,t,this.creatives);v=V(c,g,e)}else"Banner"===n&&1===h.length&&(w={placement:t,creative:h[0].creative_id,campaign:h[0].campaign_id,adset:h[0].adset_id,test:h[0].test_id,p:h[0].pid||""},v=function(e){return!(e.htmlCode||e.jsCode||e.cssCode)}(c)?function(e,t){const{"Mobile Width":s,"Mobile Height":n,"Mobile Image":i,"Desktop Width":o,"Desktop Height":a,"Desktop Image":r,Link:c}=e,l=document.createElement("gravity-banner");return Object.assign(l,{link:c,desktopImage:r,desktopWidth:o,desktopHeight:a,mobileImage:i,mobileWidth:s,mobileHeight:n,erid:t}),l}(g,this.creatives[p].erid):V(c,g));const y=J(a,r,v,w),b=`sl-css-${t}`;if(d&&!window["sl-css"][b]){const e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-id",b),e.innerHTML=U(d,{},g),document.head.appendChild(e),window["sl-css"][b]=1}u&&f(`(function(){${U(u,{},g)}\n})();`),"RecommendationWidget"===n?function(e){if(!e)return!1;if(e.executed)return!1;e.executed=!0,e.gfUniqueId=x();const t=e.querySelectorAll("[data-sl-product-id]");new D(t,1e3,(t=>{O(e,t)})),Array.from(t).forEach((e=>{e.addEventListener("click",R)}))}(y):"Banner"===n&&function(e){if(!e)return!1;if(e.executed)return!1;e.executed=!0;const t={adsetId:e.dataset.slAdsetId,creativeId:e.dataset.slCreativeId,testId:e.dataset.slTestId,campaignId:e.dataset.slCampaignId,placementId:e.dataset.slPlacementId,pid:e.dataset.slPId?Number(e.dataset.slPId):void 0};z(e,(()=>{_.logEngagement({...t,type:"WRIMP"},"impression")})),e.addEventListener("click",(()=>{_.logEngagement({...t,type:"ADCLICK"},"click")}))}(y)}getCode(e,t){const s=t?this.templates[t]:e;return{variables:s.variables,recsVariables:s.recsVariables,htmlCode:s.htmlCode,cssCode:s.cssCode,jsCode:s.jsCode,recs:s.recs}}run(e){const t=e?this.spaPlacements:this.placements;this.checkPlacements(t)}},K=(e,t,s)=>{const n=window.SL.timezone,i=t?new Date(e.replace("Z","")):new Date(e.replace("Z",n));return!!(s&&new Date<i)||!s&&new Date>=i},Q=e=>{if(!e)return!0;const t=!e.user_timezone&&window.SL.timezone,s=e.user_timezone?new Date:X(t),n=Z(s);if(e[n].length)for(let i=0;i<e[n].length;i++){const o=e.user_timezone?new Date:new Date(`${ee()}T${e[n][i].start}:00.000${t}`),a="00:00"===e[n][i].end?1:0,r=e.user_timezone?new Date:new Date(`${ee(a)}T${e[n][i].end}:00.000${t}`);if(s>=o&&s<r)return!0}return!1},Z=e=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getUTCDay()],X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Z";const t=new Date,s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0"),c=String(t.getMilliseconds()).padStart(3,"0"),l=`${s}-${n}-${i}T${o}:${a}:${r}.${c}${e}`;return new Date(l)},ee=e=>{const t=new Date;return e&&t.setDate(t.getDate()+1),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},te=e=>Object.assign(...e.split(";").map((e=>e.split(":"))).map((e=>{let[t,s,n]=e;return{[t]:{version:s,frequency:n}}}))),se=e=>{const t=o.getInternal("freq");if(null===t)return!0;const s=Math.round(Date.now()/1e3),n=te(t);return void 0===n[e.id]||!(!n[e.id]||n[e.id].version==e.version)||!(n[e.id].frequency<=0)&&s>n[e.id].frequency};var ne=s(329),ie=s.n(ne),oe=s(520),ae=s.n(oe);const re='<svg focusable="false" width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',ce=class{constructor(e){let{htmlCode:t,cssCode:s,jsCode:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options={destroyOnClose:!0,disableScroll:!1,closeIcon:null,closeEventName:null,closeClickCallback:null,position:"middle",autoHide:0,backdropColor:"rgba(0,0,0,.7)",backdropClose:!0,showCloseIcon:!0,hideAfterCloseClicked:!1,...i},this.setStyles(s),this.setLayout(t),this.setJS(n)}replaceVariables(e){let t;return t=e.replace("BG_COLOR",this.options.backdropColor),t}setStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.createElement("style");t.innerHTML=this.replaceVariables(ie())+ae(),t.innerHTML+=e,document.head.appendChild(t),this.styles=t}setLayout(e){const t=document.createElement("div"),s=t.appendChild(document.createElement("div")),n=t.appendChild(document.createElement("div")),i=document.createElement("span"),a=n.appendChild(document.createElement("div")),r=this.options.closeIcon?this.options.closeIcon:re;t.classList.add("sl--overlay"),t.classList.add("sl--overlay-"+this.options.position),s.classList.add("sl--overlay-backdrop"),n.classList.add("sl--overlay-inner"),a.classList.add("sl--overlay-content"),i.classList.add("sl--overlay-close"),a.innerHTML=e,i.innerHTML=r,this.options.showCloseIcon&&a.appendChild(i),i.addEventListener("click",(e=>{this.close(),this.options.hideAfterCloseClicked&&this.options.campaignId&&o.set("_sloh_"+this.options.campaignId,1,["localStorage"]),this.options.closeEventName&&SL.API("event",{name:this.options.closeEventName}),"function"==typeof this.options.closeClickCallback&&this.options.closeClickCallback()}),!1),this.options.backdropClose&&s.addEventListener("click",(e=>{this.close(),this.options.closeEventName&&SL.API("event",{name:this.options.closeEventName})}),!1),document.body.append(t),this.element=t}setJS(e){e&&f("(function(){"+e+"\n})()")}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.element.classList.add("sl--is-open"),this.options.autoHide&&setTimeout((()=>{this.close()}),1e3*this.options.autoHide),e()}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.element.classList.remove("sl--is-open"),this.options.destroyOnClose&&this.destroy(),e()}destroy(){this.element.remove(),this.styles.remove()}};var le=s(137),de=s.n(le);const ue=class{constructor(t){this.campaigns=window.SL.Campaigns,this.spaCampaigns=S(this.campaigns,(e=>{var t;return null==e||null===(t=e.settings)||void 0===t?void 0:t.isSpa}));const s=p(),n=JSON.parse(o.getInternal("preview"));this.preview_id=s.sl_preview_id||s.sl_cid||(null==n?void 0:n.campaignId),s.sl_preview_id||s.sl_preview||n?async function(){return new Promise(((t,s)=>{const n=document.createElement("script");n.setAttribute("src",`${e.cdn}/core/preview.js`),document.head.appendChild(n),n.onload=function(){t(!0)},n.onerror=function(){t(!1)}}))}().then((()=>{this.run()})):this.run(),t&&this.onUpdateSession(),h.on("update_session",(()=>{this.onUpdateSession()}))}onUpdateSession(){(e=>{const t=o.getInternal("freq");if(null===t)return!0;const s=te(t),n={};Object.entries(e).map((e=>e[1].exps.map((e=>{n[e.id]=e.version})))),Object.keys(s).forEach((e=>{n[e]&&n[e]===s[e].version||delete s[e]}));const i=[];for(let e in s)s.hasOwnProperty(e)&&i.push(`${e}:${s[e].version}:${s[e].frequency}`);o.setInternal("freq",i.join(";"))})(this.campaigns)}async executeVarition(e,t,s){var n;let i=e.template?window.SL.templates[e.template].cssCode:e.cssCode;const a=e.template?window.SL.templates[e.template].jsCode:e.jsCode;let r=e.template?window.SL.templates[e.template].htmlCode:e.htmlCode;const c="sl-css-"+t.variationId;let l=!1;const d={var:t.variationId,ver:t.versionId,exp:t.experienceId,cam:t.campaignId};if(r=U(r,t,e.variables),r&&null!==(n=e.recs)&&void 0!==n&&n.length){const t=await(e=>new Promise((t=>{M.get(e,{},((e,s)=>{t(!e&&s)}))})))(e.recs);e.recs.forEach((s=>{var n,i;let o=!(null==t||null===(n=t.data)||void 0===n||!n.length)&&t.data.find((e=>e.wId==s.id));if(o||(o={wId:s.id,slots:[]}),null!=t&&null!==(i=t.data)&&void 0!==i&&i.length){const e=t.data.findIndex((e=>e.wId===o.wId));e>=0&&t.data.splice(e,1)}e.recsVariables&&Object.keys(e.recsVariables).forEach((t=>{r=r.replaceAll(`{{${t}}}`,`{{${e.recsVariables[t]}}}`)})),r=j(r,s.name,o)}))}if(r){var u;let n;if(s.cssSelector&&s.insertMethod)n=J(s.cssSelector,s.insertMethod,r);else if("overlay"===s.type){const o=new ce({htmlCode:r,cssCode:U(i,t,e.variables)},s.settings);l=!0,o.open(),n=o.element}else if("notification"===s.type){const a=new class{constructor(e){let{htmlCode:t,cssCode:s,jsCode:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options={destroyOnClose:!0,disableScroll:!1,closeIcon:null,closeEventName:null,closeClickCallback:null,position:"bottom-right",autoHide:0,showCloseIcon:!0,hideAfterCloseClicked:!1,...i},this.setStyles(s),this.setLayout(t),this.setJS(n)}setStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.createElement("style");t.innerHTML=de()+ae(),t.innerHTML+=e,document.head.appendChild(t),this.styles=t}setLayout(e){const t=document.createElement("div"),s=t.appendChild(document.createElement("div")),n=document.createElement("span"),i=this.options.closeIcon?this.options.closeIcon:re;t.classList.add("gf--notification"),t.classList.add("gf--notification-"+this.options.position),s.classList.add("gf--notification-content"),n.classList.add("gf--notification-close"),s.innerHTML=e,n.innerHTML=i,this.options.showCloseIcon&&s.appendChild(n),n.addEventListener("click",(e=>{this.close(),this.options.hideAfterCloseClicked&&this.options.campaignId&&o.set("_sloh_"+this.options.campaignId,1,["localStorage"]),this.options.closeEventName&&SL.API("event",{name:this.options.closeEventName}),"function"==typeof this.options.closeClickCallback&&this.options.closeClickCallback()}),!1),this.options.backdropClose&&backdrop.addEventListener("click",(e=>{this.close(),this.options.closeEventName&&SL.API("event",{name:this.options.closeEventName})}),!1),document.body.append(t),this.element=t}setJS(e){e&&f("(function(){"+e+"\n})()")}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.element.classList.add("gf--is-open"),this.options.autoHide&&setTimeout((()=>{this.close()}),1e3*this.options.autoHide),e()}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.element.classList.remove("gf--is-open"),this.options.destroyOnClose&&this.destroy(),e()}destroy(){this.element.remove(),this.styles.remove()}}({htmlCode:r,cssCode:U(i,t,e.variables)},s.settings);l=!0,a.open(),n=a.element}n&&(n.addEventListener("click",(()=>{A.logClick({...d,var:[d.var]})})),new D([n],1e3,(()=>{A.logEngagement({...d,var:[d.var]},"WRIMP")}))),n&&null!==(u=e.recs)&&void 0!==u&&u.length&&n.querySelectorAll("[data-sl-widget-id]").forEach((e=>{M.track(e,d)}))}if(!l&&i&&!window["sl-css"][c]){const s=document.createElement("style");s.setAttribute("type","text/css"),s.setAttribute("data-id",c),s.innerHTML=U(i,t,e.variables),document.head.appendChild(s),window["sl-css"][c]=1}a&&f("(function(){"+U(a,t,e.variables)+"\n})();")}chooseVariation(e){const s=e.variations,n=1===e.attribution.sticky?t.uid:t.session,i=s.reduce(((e,t)=>e+t.weight),0),o=function(e){let t=5381;for(let s=0;s<e.length;s++)t=33*t^e.charCodeAt(s);return t>>>0}(n+e.version);let a=0;for(let e=0;e<s.length;e++){const t=s[e];if(a+=t.weight/i,o/2**32<a)return t}return s[s.length-1]}getVariation(e){let t;const s=e.variations;return t=0===e.attribution.sticky?function(e,t){if(e.length!==t.length)throw new Error("Items and weights must be of the same size");if(!e.length)throw new Error("Items must not be empty");const s=[];for(let e=0;e<t.length;e+=1)s[e]=t[e]+(s[e-1]||0);const n=s[s.length-1]*Math.random();for(let t=0;t<e.length;t+=1)if(s[t]>=n)return e[t]}(s,s.map((e=>e.weight))):this.chooseVariation(e),t}async chooseExperience(e,t){for(let n=0;n<e.exps.length;n++)try{if(a.info(`Campaign: ${t} . Checking experience ${e.exps[n].id}`),e.exps[n].status){const t=void 0===e.frequency||0===e.frequency||se(e.exps[n]),i=!e.exps[n].timeframe||!((s=e.exps[n].timeframe)&&(s.start&&!K(s.start,s.user_timezone)||s.end&&!K(s.end,s.user_timezone,!0))),o=!e.exps[n].targetingWhen||Q(e.exps[n].targetingWhen);if(t)if(i)if(o){if(await m(4500,L(e.exps[n].target)))return e.exps[n]}else a.info(`Experience: ${e.exps[n].name} does not meet targeting when`);else a.info(`Experience: ${e.exps[n].name} does not meet timeframe`);else a.info(`Experience: ${e.exps[n].name} does not meet frequency`)}}catch(e){}var s;return!1}conditionPromise(e,s){const n=[];for(let i=0;i<e.length;i++){const o=new Promise(((n,o)=>{const{type:a,value:r}=e[i],c=`${s}-${a}`;switch(a){case"page_load":n(!0);break;case"time_on_page":t.waiters[c]&&n(!1),t.waiters[c]=setTimeout((()=>{delete t.waiters[c],n(!0)}),1e3*r);break;case"wait_for_element":t.waiters[c]?n(!1):(t.waiters[c]=1,w(r,(()=>{delete t.waiters[c],n(!0)})));break;case"event":void 0!==t.waiters[c]?n(!1):t.waiters[c]=h.on("sl-event",(e=>{e&&e.eventName===r&&(h.off(t.waiters[c]),delete t.waiters[c],n(!0))}));break;case"exit_intent":void 0!==t.waiters[c]?n(!1):t.waiters[c]=h.on("sl-mouse-leave-doc",(()=>{h.off(t.waiters[c]),delete t.waiters[c],n(!0)}));break;default:n(!1)}}));n.push(o)}return Promise.race(n)}async triggerCampaign(e,t){var s;const n=this,i=n.campaigns[e]||(null==t?void 0:t.previewCampaign);if(!i)return;if(this.preview_id&&this.preview_id===e)return;if(!(i.status||null!=t&&t.previewCampaign))return;if(["overlay","notification"].includes(i.type)&&o.get("_sloh_"+e,["localStorage"]))return;if(null!==(s=i.target)&&void 0!==s&&s.length&&!await L(i.target))return void a.info(`Campaign: ${e} does not meet target conditions`);const r=i.trigger;if(i.insertMethod)if("embed"!==i.insertMethod&&i.cssSelector)r.unshift({conds:[{type:"wait_for_element",value:i.cssSelector}]});else if("embed"==i.insertMethod){if(!t||!t.target)return;i.cssSelector=t.target,i.insertMethod=t.insertMethod||"replace"}var c;return(await(async()=>{const t=[];for(let s=0;s<r.length;s++)t.push(await n.conditionPromise(r[s].conds,e));return t})()).every(Boolean)?null!==(c=i.target)&&void 0!==c&&c.length&&!await L(i.target)?void a.info(`Campaign: ${e} does not meet target conditions`):n.chooseExperience(i,e).then((s=>{if(!s)return a.info(`Campaign: ${e} does not meet the conditions`),!1;{a.info(`Campaign: ${e}. Selected experience: `,s,"Start choosing variations");const r=n.getVariation(s);if(((e,t)=>{if(!t||0===t)return;const s=o.getInternal("freq");let n={};s&&(n=te(s)),n[e.id]={version:e.version,frequency:t>0?Math.round(Date.now()/1e3)+t:t};const i=[];for(let e in n)n.hasOwnProperty(e)&&i.push(`${e}:${n[e].version}:${n[e].frequency}`);o.setInternal("freq",i.join(";"))})(s,i.frequency),null!=t&&t.previewCampaign)return{success:!0,variation:r,experience:s};n.executeVarition(r,{variationName:r.name,variationId:r.id,experienceId:s.id,experienceName:s.name,campaignId:e,campaignName:i.name,versionId:s.version.toString()},i),A.logEngagement({var:[r.id.toString()],ver:s.version.toString(),exp:s.id.toString(),cam:e.toString()},"impression")}})):void 0}run(e){const t=e?this.spaCampaigns:this.campaigns;Object.keys(t).forEach((e=>{this.triggerCampaign(e).then((e=>{}))}))}},he=new class{constructor(){p().sl_ihelper&&o.setInternal("helper",1),this.isEnabled=null===o.getInternal("helper")?0:1}init(){if(!this.isEnabled)return;let t=document.createElement("script");t.setAttribute("src",`${e.cdn}/helper/script.js`),document.head.appendChild(t)}};class pe{styles=pe.#e();canvas=pe.#t();targetElem;interval;toggled;constructor(){this.#s()}async togglePrompt(){const e=this.canvas.getContext("2d");return this.canvas.classList.add("enabled"),this.toggled=!0,new Promise((t=>{document.addEventListener("mousedown",(()=>{e.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.classList.remove("enabled"),this.toggled=!1,t(this.targetElem)}))}))}destroy(){this.styles.remove(),this.canvas.remove(),clearInterval(this.interval),this.toggled=!1}#n(){const e=document.elementsFromPoint(this.cursor.x,this.cursor.y)[1];e&&(this.#i(e),this.#o(e))}#i(e){this.targetElem!==e&&(pe.#a(e)&&!this.interval?this.interval=setInterval((()=>this.#o(e)),16):(clearInterval(this.interval),this.interval=null),this.targetElem=e)}#o(e){const t=this.canvas.getContext("2d"),s=e.getBoundingClientRect(),n=Math.round(s.top)+.5,i=Math.round(s.right)+.5,o=Math.round(s.bottom)+.5,a=Math.round(s.left)+.5;t.clearRect(0,0,this.canvas.width,this.canvas.height),t.setLineDash([3,2]),t.fillStyle="#569dd941",t.fillRect(a,n,i-a,o-n),t.strokeStyle="#7508cb",t.beginPath(),t.moveTo(0,n),t.lineTo(this.canvas.width,n),t.stroke(),t.beginPath(),t.moveTo(0,o),t.lineTo(this.canvas.width,o),t.stroke(),t.beginPath(),t.moveTo(a,0),t.lineTo(a,this.canvas.height),t.stroke(),t.beginPath(),t.moveTo(i,0),t.lineTo(i,this.canvas.height),t.stroke()}#r(){const e=this.canvas;e.setAttribute("width",e.clientWidth.toString()),e.setAttribute("height",e.clientHeight.toString())}#s(){document.addEventListener("mousemove",(e=>{this.cursor={x:e.clientX,y:e.clientY},this.toggled&&this.#n()}),{passive:!0}),document.addEventListener("scroll",(()=>{this.toggled&&this.#n()})),document.addEventListener("mouseout",(()=>{this.toggled&&this.canvas.classList.remove("enabled")})),document.addEventListener("mouseover",(()=>{this.toggled&&this.canvas.classList.add("enabled")})),window.addEventListener("resize",(()=>{this.#r()}))}static#e(){const e=document.createElement("style");return e.innerHTML="\n            #element-selector {\n              display: none;\n              z-index: calc(9e999);\n              position: fixed;\n              top: 0;\n              left: 0;\n              width: 100%;\n              height: 100%;\n            }\n  \n            #element-selector.enabled {\n              display: block;\n            }\n          ",document.getElementsByTagName("head")[0].appendChild(e),e}static#t(){const e=document.createElement("canvas");e.setAttribute("id","element-selector"),e.classList.add("enabled");const t=document.body.lastChild;return document.body.insertBefore(e,t),e.setAttribute("width",e.clientWidth.toString()),e.setAttribute("height",e.clientHeight.toString()),e.classList.remove("enabled"),e}static#a=e=>e.getAnimations().length>0}const ge=pe,me=new class{constructor(){p().gf_einspector&&(this.isEnabled=!0)}init(){this.isEnabled&&(new ge).togglePrompt().then((e=>{const t=this.getDomPath(e);window.opener.postMessage({cssSelector:t},"*"),window.close()}))}getDomPath(e){let t="";if(e.id)return`#${e.id}`;e.classList.length>0&&(t=e.classList.value.split(" ").map((e=>`.${e}`)).join(""));const s=Array.from(e.parentNode.children).indexOf(e);return s>0&&(t+=`:nth-child(${s+1})`),e.parentNode!==document&&e.parentNode!==document.body&&(t=`${this.getDomPath(e.parentNode)} ${t}`),t}},fe={start:performance.now(),before_init:0,dynamic_script_loaded:0,user_data_loaded:0},ve=new class{constructor(){this.actions=[]}init(e){let t=this;const s=t.actions.length;for(let e=0;e<s;e++)try{this.executeAction(t.actions[e])}catch(e){console.log(e)}t.actions=t.actions.slice(s),setTimeout((function(){t.init(e)}),e)}addAction(e){this.actions.push(e)}executeAction(e){switch(e[0]){case"event":var t,s;"object"==typeof e[1]&&(e[1].properties&&(e[1].props=e[1].properties,delete e[1].properties),e[1].props&&e[1].props.dyType&&(e[1].props.eventType=e[1].props.dyType,delete e[1].props.dyType),null!==(t=e[1])&&void 0!==t&&null!==(s=t.props)&&void 0!==s&&s.eventType||(e[1].props={...e[1].props,eventType:"custom"}),e[1].props.hashedEmail&&"object"==typeof e[1].props.hashedEmail&&(e[1].props.email=e[1].props.hashedEmail.value,delete e[1].props.hashedEmail),e[1].props.email?I(e[1].props.email.toLowerCase()).then((t=>{delete e[1].props.email,e[1].props.hashedEmail=t,A.logEvent(e[1],"event")})):A.logEvent(e[1],"event"),h.trigger("sl-event",{event:e[1],eventName:e[1].name,properties:e[1].props}));break;case"pageview":A.logPageView(e[1]);break;case"spa":window.SL.initOnSpa(e[1]);break;default:console.log("default")}}},we=new class{constructor(){}on(e,t,s){document.addEventListener(e,(function(e){for(var n=e.target;n&&n!=this;n=n.parentNode)if(n.matches(t)){s.call(n,e);break}}),!1)}sendEventInViewport(e,t,s){if(window.IntersectionObserver){var n={root:s&&s.root?s.root:null,rootMargin:s&&s.rootMargin?s.rootMargin:"0px",threshold:s&&s.threshold?s.threshold:1},i=new IntersectionObserver((function(e,s){e[0].isIntersecting&&("string"==typeof t?window.SL.API("event",{name:t}):window.SL.API("event",t),s.disconnect())}),n),o="string"==typeof e?document.querySelector(e):e;o?i.observe(o):"string"==typeof e&&s&&s.wait&&w(e,(e=>{i.observe(e[0])}))}}waitUntil(e,t,s,n,i){if(e())t();else{var o;n||(n=100);var a=setInterval((function(){e()&&(clearInterval(a),o&&clearTimeout(o),t())}),n);i&&(o=setTimeout((function(){clearInterval(a),s()}),i))}}runCampaign(e,t){e&&window.SL.CampaignsRunner.triggerCampaign(e,t)}track(e,t){e&&t&&t.var&&new D([e],1e3,(()=>{A.logEngagement(t,"WRIMP")}))}};window.SL=window.SL||window.SL||window.GF||{},window.SL.section=window.SL.section||0,window.SL.pageContext=window.SL.pageContext||{type:"OTHER"},window["sl-css"]=window["sl-css"]||{},window.SL=new class{constructor(){this.isSpa=window.SL.isSpa||!1,this.syncLoad=window.SL.syncLoad||!1,this.section=t.section=window.SL.section,this.pageContext=t.pageContext=window.SL.pageContext,this.Campaigns=window.SL.Campaigns||{},this.Placements=window.SL.Placements||{},this.Creatives=window.SL.Creatives||{},this.adClients=window.SL.adClients||{},this.QManager=ve,this.StorageUtils=o,this.ServerUtils=A,this.Audiences=$,this.Recommendations=M,this.Log=a,this.Ajax=n,this.Overlay=ce,this.PubSub=h,this.waitForElement=w,this.waitForVariable=y,this.getProductSets=this.ServerUtils.getProductSets,this.digestString=I,this.Utils=we,this.sectionConfig=window.SL.sectionConfig,this.evals=window.SL.evals,this.templates=window.SL.templates,this.Segments=window.SL.Segments,fe.before_init=performance.now(),window.SL.section?(()=>{if(window.location.href.includes("sl_disable=true"))return!1;if(window.location.href.includes("sl_get_affinity=true")){const s=o.getInternal("uid"),n=`${e.affinity}?uid=${s}&sec=${t.section}`;return window.location.href=n,!1}return!0})()&&this.init():console.warn("SL: section is not defined")}API(){this.QManager.addAction(arguments)}init(){Promise.all([this.getUserData(),this.loadDynamicScript()]).then((e=>{document.dispatchEvent(new CustomEvent("gf-ready"));const s=e[0]?JSON.parse(e[0]):{},n=v(s.ses);new class{constructor(e){for(let t in e)e.hasOwnProperty(t)&&(this.key=e[t]);e.uid&&(o.setInternal("uid",e.uid),o.setInternal("session",e.ses),o.setInternal("aud",e.audiences)),t.uid=e.uid,t.browser=e.browser,t.session=e.ses,t.geo=e.geo,t.hits=e.hits,t.segments=Array.isArray(e.audiences)?e.audiences:[],t.timeDiff=1e3*e.serverTime-(new Date).getTime(),t.trafficSource=e.trafficSource,e.isNewUser&&o.setInternal("fs",Date.now())}}(s),t.trafficSource=s.trafficSource,t.deviceInfo=s.deviceInfo,this.Audiences.build().then((e=>{let t=this.QManager.actions.filter((e=>"spa"===e[0])).length;this.QManager.init(50),this.userData=s,!this.isSpa||t>0?(this.CampaignsRunner=new ue(n),window.SL.Placements&&(this.PlacementsRunner=new Y),this.isSpa||this.API("pageview",{perf:fe})):this.PubSub.once("spa",(()=>{this.Log.info("init on spa"),this.CampaignsRunner=new ue(n),window.SL.Placements&&(this.PlacementsRunner=new Y)})),he.init(),me.init()})),(()=>{let e=!0;document.addEventListener("mouseout",(function(t){e=!1,!t.toElement&&!t.relatedTarget&&t.clientY<=20&&setTimeout((function(){e||h.trigger("sl-mouse-leave-doc")}),10)})),document.addEventListener("mousemove",(function(){e=!0}))})()}))}initOnSpa(e){this.Log.info("spa event",e),e.context&&(this.pageContext=t.pageContext=e.context),e.countAsPageview&&(t.pageData=window.SL.pageData={},delete window.SL.pageDataLoaded,this.API("pageview",{url:e.url})),this.PubSub.trigger("spa",e),this.PubSub.trigger("sl-event-internal",{data:e,response:null,type:"spa"}),this.CampaignsRunner&&this.CampaignsRunner.run(!0),this.PlacementsRunner&&this.PlacementsRunner.run(!0)}loadDynamicScript(){const s=this;return new Promise(((n,i)=>{if(s.syncLoad)s.waitForVariable("window.SL.sectionConfig").then((()=>{fe.dynamic_script_loaded=performance.now(),n(!0)}));else{const i=document.createElement("script");i.type="text/javascript",i.async=!1,i.onload=function(){fe.dynamic_script_loaded=performance.now(),n(!0)},i.onerror=function(){fe.dynamic_script_loaded=0,s.Log.error("failed script load"),n(!0)},i.src=`${e.cdn}/sections/${t.section}/dynamic.js`,t.section?document.head.appendChild(i):(s.Log.error("No section"),fe.dynamic_script_loaded=0,n(!0))}}))}getUserData(){const e=this;return new Promise(((t,s)=>{this.ServerUtils.getUserData().then((e=>{fe.user_data_loaded=performance.now(),t(e)})).catch((t=>{e.Log.error("failed user load"),s(t)}))}))}},window.SL=window.GF=window.SL})()})();